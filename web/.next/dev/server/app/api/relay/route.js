/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/relay/route";
exports.ids = ["app/api/relay/route"];
exports.modules = {

/***/ "(rsc)/./app/api/relay/route.ts":
/*!********************************!*\
  !*** ./app/api/relay/route.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @cityofzion/neon-js */ \"(rsc)/./node_modules/@cityofzion/neon-js/dist/index.js\");\n/* harmony import */ var _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _public_zk_verification_key_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../public/zk/verification_key.json */ \"(rsc)/./public/zk/verification_key.json\");\n\n\n\nconst runtime = 'nodejs';\nconst RPC_URL = process.env.RPC_URL || 'http://seed1t5.neo.org:20332';\nconst RELAYER_WIF = process.env.RELAYER_WIF || '';\nconst VAULT_HASH = process.env.VAULT_HASH || '';\nconst ALLOWED_TOKEN_HASHES = process.env.ALLOWED_TOKEN_HASHES || '';\nconst RELAYER_ALLOWED_ORIGINS = process.env.RELAYER_ALLOWED_ORIGINS || '';\nconst RELAYER_API_KEY = process.env.RELAYER_API_KEY || '';\nconst RELAYER_PROOF_MODE_RAW = (process.env.RELAYER_PROOF_MODE || 'snark').trim().toLowerCase();\nconst HASH160_HEX_RE = /^(?:0x)?[0-9a-fA-F]{40}$/;\nconst HEX32_RE = /^[0-9a-fA-F]{64}$/;\nconst BASE64_RE = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}(?:==)?|[A-Za-z0-9+/]{3}=)?$/;\nconst INT_RE = /^(?:0|[1-9]\\d*)$/;\nconst MAX_BODY_BYTES = 128 * 1024;\nconst MIN_FEE = 100000000n;\nconst RATE_WINDOW_MS = 60000;\nconst RATE_MAX_REQUESTS = 30;\nconst NULLIFIER_LOCK_TTL_MS = 120000;\nconst NETWORK_MAGIC_CACHE_MS = 300000;\nconst RELAYER_PROOF_MODE = RELAYER_PROOF_MODE_RAW === 'prototype' ? 'prototype' : 'snark';\nconst rateLimitStore = new Map();\nconst nullifierLocks = new Map();\nconst tokenAllowlist = parseTokenAllowlist(ALLOWED_TOKEN_HASHES);\nconst originAllowlist = parseOriginAllowlist(RELAYER_ALLOWED_ORIGINS);\nlet cachedNetworkMagic = null;\nlet snarkjsPromise = null;\nfunction isGroth16Proof(value) {\n    if (!value || typeof value !== 'object') return false;\n    const candidate = value;\n    return Array.isArray(candidate.pi_a) && Array.isArray(candidate.pi_b) && Array.isArray(candidate.pi_c) && typeof candidate.protocol === 'string' && typeof candidate.curve === 'string';\n}\nfunction normalizeHash160(value, fieldName) {\n    const trimmed = value.trim();\n    if (!HASH160_HEX_RE.test(trimmed)) {\n        throw new Error(`${fieldName} must be a valid 20-byte script hash`);\n    }\n    return trimmed.replace(/^0x/i, '').toLowerCase();\n}\nfunction toScriptHash(value, fieldName) {\n    const trimmed = value.trim();\n    if (_cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.wallet.isAddress(trimmed)) {\n        return _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.wallet.getScriptHashFromAddress(trimmed);\n    }\n    return normalizeHash160(trimmed, fieldName);\n}\nfunction normalizeHex32(value, fieldName) {\n    const normalized = value.trim().replace(/^0x/i, '').toLowerCase();\n    if (!HEX32_RE.test(normalized)) {\n        throw new Error(`${fieldName} must be a 32-byte hex value`);\n    }\n    return normalized;\n}\nfunction parseIntString(value, fieldName) {\n    const trimmed = value.trim();\n    if (!INT_RE.test(trimmed)) {\n        throw new Error(`${fieldName} must be an integer string`);\n    }\n    return BigInt(trimmed);\n}\nfunction normalizePublicInput(value, index) {\n    if (typeof value !== 'string' && typeof value !== 'number' && typeof value !== 'bigint') {\n        throw new Error(`publicInputs[${index}] must be numeric`);\n    }\n    const raw = `${value}`.trim();\n    if (!INT_RE.test(raw)) {\n        throw new Error(`publicInputs[${index}] must be non-negative integer`);\n    }\n    return BigInt(raw).toString();\n}\nfunction parseOptionalBase64(value, fieldName) {\n    if (typeof value !== 'string') return null;\n    const normalized = value.trim();\n    if (normalized.length === 0) {\n        throw new Error(`${fieldName} must not be empty when provided`);\n    }\n    if (!BASE64_RE.test(normalized)) {\n        throw new Error(`${fieldName} must be valid base64`);\n    }\n    const bytes = Buffer.from(normalized, 'base64');\n    if (bytes.length === 0) {\n        throw new Error(`${fieldName} must decode to non-empty bytes`);\n    }\n    return normalized;\n}\nfunction toBase64Hex(hex) {\n    return Buffer.from(hex, 'hex').toString('base64');\n}\nfunction parseTokenAllowlist(raw) {\n    const entries = raw.split(',').map((item)=>item.trim()).filter(Boolean).filter((item)=>HASH160_HEX_RE.test(item)).map((item)=>item.replace(/^0x/i, '').toLowerCase());\n    if (entries.length === 0) return null;\n    return new Set(entries);\n}\nfunction parseOriginAllowlist(raw) {\n    const entries = raw.split(',').map((item)=>item.trim()).filter(Boolean).map((item)=>{\n        try {\n            return new URL(item).origin;\n        } catch  {\n            return '';\n        }\n    }).filter(Boolean);\n    if (entries.length === 0) return null;\n    return new Set(entries);\n}\nfunction getClientIp(req) {\n    const forwarded = req.headers.get('x-forwarded-for');\n    if (forwarded) {\n        return forwarded.split(',')[0].trim();\n    }\n    return req.headers.get('x-real-ip') || 'unknown';\n}\nfunction isRateLimited(key) {\n    const now = Date.now();\n    const current = rateLimitStore.get(key);\n    if (!current || current.resetAt <= now) {\n        rateLimitStore.set(key, {\n            count: 1,\n            resetAt: now + RATE_WINDOW_MS\n        });\n        return false;\n    }\n    if (current.count >= RATE_MAX_REQUESTS) {\n        return true;\n    }\n    current.count += 1;\n    rateLimitStore.set(key, current);\n    return false;\n}\nfunction isOriginAllowed(req) {\n    if (!originAllowlist) return true;\n    const origin = req.headers.get('origin');\n    if (!origin) return false;\n    let normalizedOrigin;\n    try {\n        normalizedOrigin = new URL(origin).origin;\n    } catch  {\n        return false;\n    }\n    return originAllowlist.has(normalizedOrigin);\n}\nfunction cleanNullifierLocks(now) {\n    for (const [key, expiresAt] of nullifierLocks.entries()){\n        if (expiresAt <= now) {\n            nullifierLocks.delete(key);\n        }\n    }\n}\nfunction acquireNullifierLock(nullifierHex) {\n    const now = Date.now();\n    cleanNullifierLocks(now);\n    const existing = nullifierLocks.get(nullifierHex);\n    if (typeof existing === 'number' && existing > now) {\n        return false;\n    }\n    nullifierLocks.set(nullifierHex, now + NULLIFIER_LOCK_TTL_MS);\n    return true;\n}\nfunction releaseNullifierLock(nullifierHex) {\n    nullifierLocks.delete(nullifierHex);\n}\nfunction parseRpcBool(value) {\n    if (value === true || value === false) return value;\n    if (typeof value === 'string') {\n        const normalized = value.toLowerCase();\n        if (normalized === 'true') return true;\n        if (normalized === 'false') return false;\n        if (INT_RE.test(value)) return BigInt(value) !== 0n;\n    }\n    if (typeof value === 'number') return value !== 0;\n    return false;\n}\nfunction parseRpcByteArrayHex(item, fieldName) {\n    if (item.type !== 'ByteString' && item.type !== 'Buffer' && item.type !== 'ByteArray') {\n        throw new Error(`${fieldName} must be a byte string`);\n    }\n    if (typeof item.value !== 'string') {\n        throw new Error(`${fieldName} is missing byte value`);\n    }\n    return Buffer.from(item.value, 'base64').toString('hex');\n}\nfunction encodeProofPayload(mode, proof, proofPayloadBase64) {\n    if (mode === 'prototype') {\n        const overridePayload = parseOptionalBase64(proofPayloadBase64, 'proofPayloadBase64');\n        if (overridePayload) {\n            return overridePayload;\n        }\n        // Compatibility with the current test verifier contract, which checks proof[0] == 0x01.\n        return Buffer.from([\n            0x01\n        ]).toString('base64');\n    }\n    if (!isGroth16Proof(proof)) {\n        throw new Error('Invalid proof payload.');\n    }\n    return Buffer.from(JSON.stringify(proof)).toString('base64');\n}\nfunction encodePublicInputsPayload(publicInputs) {\n    return Buffer.from(JSON.stringify(publicInputs)).toString('base64');\n}\nasync function getNetworkMagic() {\n    const now = Date.now();\n    if (cachedNetworkMagic && cachedNetworkMagic.expiresAt > now) {\n        return cachedNetworkMagic.value;\n    }\n    const client = new _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.rpc.RPCClient(RPC_URL);\n    const version = await client.getVersion();\n    const network = version?.protocol?.network;\n    if (typeof network !== 'number' || !Number.isInteger(network) || network <= 0) {\n        throw new Error('Unable to resolve network magic from RPC endpoint');\n    }\n    cachedNetworkMagic = {\n        value: network,\n        expiresAt: now + NETWORK_MAGIC_CACHE_MS\n    };\n    return network;\n}\nasync function loadSnarkjs() {\n    if (!snarkjsPromise) {\n        snarkjsPromise = Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/wasmcurves\"), __webpack_require__.e(\"vendor-chunks/wasmbuilder\"), __webpack_require__.e(\"vendor-chunks/web-worker\"), __webpack_require__.e(\"vendor-chunks/snarkjs\"), __webpack_require__.e(\"vendor-chunks/circom_runtime\"), __webpack_require__.e(\"vendor-chunks/r1csfile\"), __webpack_require__.e(\"vendor-chunks/@iden3\"), __webpack_require__.e(\"vendor-chunks/@noble\"), __webpack_require__.e(\"vendor-chunks/ejs\"), __webpack_require__.e(\"vendor-chunks/fastfile\"), __webpack_require__.e(\"_rsc_node_modules_web-worker_cjs_lazy_recursive-_rsc_node_modules_web-worker_cjs_sync_recursive\")]).then(__webpack_require__.bind(__webpack_require__, /*! snarkjs */ \"(rsc)/./node_modules/snarkjs/main.js\"));\n    }\n    return snarkjsPromise;\n}\nasync function callVaultBoolMethod(vaultScriptHash, operation, inputHex32) {\n    const client = new _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.rpc.RPCClient(RPC_URL);\n    const result = await client.invokeFunction(`0x${vaultScriptHash}`, operation, [\n        _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.sc.ContractParam.byteArray(toBase64Hex(inputHex32))\n    ]);\n    if (result.state === 'FAULT') {\n        throw new Error(`Vault precheck ${operation} failed: ${result.exception || 'unknown fault'}`);\n    }\n    const value = result.stack && result.stack[0] && result.stack[0].value || false;\n    return parseRpcBool(value);\n}\nasync function callVaultByteMethod(vaultScriptHash, operation) {\n    const client = new _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.rpc.RPCClient(RPC_URL);\n    const result = await client.invokeFunction(`0x${vaultScriptHash}`, operation, []);\n    if (result.state === 'FAULT') {\n        throw new Error(`Vault read ${operation} failed: ${result.exception || 'unknown fault'}`);\n    }\n    const item = result.stack && result.stack[0];\n    if (!item) {\n        throw new Error(`Vault read ${operation} returned empty stack`);\n    }\n    return parseRpcByteArrayHex(item, operation);\n}\nasync function isNullifierUsedOnChain(vaultScriptHash, nullifierHex) {\n    try {\n        return await callVaultBoolMethod(vaultScriptHash, 'isNullifierUsed', nullifierHex);\n    } catch  {\n        return await callVaultBoolMethod(vaultScriptHash, 'IsNullifierUsed', nullifierHex);\n    }\n}\nasync function isKnownRootOnChain(vaultScriptHash, rootHex) {\n    try {\n        return await callVaultBoolMethod(vaultScriptHash, 'isKnownRoot', rootHex);\n    } catch  {\n        return await callVaultBoolMethod(vaultScriptHash, 'IsKnownRoot', rootHex);\n    }\n}\nasync function getCurrentRootOnChain(vaultScriptHash) {\n    let rootHex;\n    try {\n        rootHex = await callVaultByteMethod(vaultScriptHash, 'getCurrentRoot');\n    } catch  {\n        rootHex = await callVaultByteMethod(vaultScriptHash, 'GetCurrentRoot');\n    }\n    if (rootHex.length === 0) {\n        return null;\n    }\n    if (!HEX32_RE.test(rootHex)) {\n        throw new Error('Vault current root is not 32 bytes');\n    }\n    return rootHex;\n}\nasync function GET() {\n    if (!RELAYER_WIF || !VAULT_HASH) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            configured: false,\n            error: 'Server is missing configuration (RELAYER_WIF or VAULT_HASH).'\n        }, {\n            status: 503,\n            headers: {\n                'Cache-Control': 'no-store'\n            }\n        });\n    }\n    try {\n        const relayerAccount = new _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.wallet.Account(RELAYER_WIF);\n        const vaultScriptHash = normalizeHash160(VAULT_HASH, 'VAULT_HASH');\n        const [networkMagic, currentRoot] = await Promise.all([\n            getNetworkMagic(),\n            getCurrentRootOnChain(vaultScriptHash)\n        ]);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            configured: true,\n            relayerAddress: relayerAccount.address,\n            vaultHash: `0x${vaultScriptHash}`,\n            currentRoot: currentRoot ? `0x${currentRoot}` : null,\n            networkMagic,\n            proofMode: RELAYER_PROOF_MODE\n        }, {\n            headers: {\n                'Cache-Control': 'no-store'\n            }\n        });\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            configured: false,\n            error: error instanceof Error ? error.message : 'Failed to initialize relayer config.'\n        }, {\n            status: 503,\n            headers: {\n                'Cache-Control': 'no-store'\n            }\n        });\n    }\n}\nasync function POST(req) {\n    let lockedNullifierHex = null;\n    let keepNullifierLock = false;\n    try {\n        if (!RELAYER_WIF || !VAULT_HASH) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Server is missing configuration (RELAYER_WIF or VAULT_HASH).'\n            }, {\n                status: 500\n            });\n        }\n        const contentLengthHeader = req.headers.get('content-length');\n        if (contentLengthHeader) {\n            const contentLength = Number(contentLengthHeader);\n            if (Number.isFinite(contentLength) && contentLength > MAX_BODY_BYTES) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: 'Request body too large.'\n                }, {\n                    status: 413\n                });\n            }\n        }\n        const ip = getClientIp(req);\n        if (isRateLimited(ip)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Too many requests. Retry later.'\n            }, {\n                status: 429\n            });\n        }\n        if (!isOriginAllowed(req)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Origin not allowed.'\n            }, {\n                status: 403\n            });\n        }\n        if (RELAYER_API_KEY) {\n            const clientApiKey = req.headers.get('x-relayer-api-key');\n            if (!clientApiKey || clientApiKey !== RELAYER_API_KEY) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: 'Missing or invalid relayer API key.'\n                }, {\n                    status: 401\n                });\n            }\n        }\n        let body;\n        try {\n            body = await req.json();\n        } catch  {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invalid JSON body.'\n            }, {\n                status: 400\n            });\n        }\n        if (typeof body?.tokenHash !== 'string' || typeof body?.merkleRoot !== 'string' || typeof body?.nullifierHash !== 'string' || typeof body?.recipient !== 'string' || typeof body?.relayer !== 'string' || typeof body?.amount !== 'string' || typeof body?.fee !== 'string') {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invalid request fields.'\n            }, {\n                status: 400\n            });\n        }\n        if (!Array.isArray(body.publicInputs) || body.publicInputs.length < 6) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'publicInputs must be an array with 6 values.'\n            }, {\n                status: 400\n            });\n        }\n        if (RELAYER_PROOF_MODE === 'snark' && !isGroth16Proof(body.proof)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invalid proof payload.'\n            }, {\n                status: 400\n            });\n        }\n        const relayerAccount = new _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.wallet.Account(RELAYER_WIF);\n        const serverRelayerScriptHash = normalizeHash160(relayerAccount.scriptHash, 'server relayer');\n        const vaultScriptHash = normalizeHash160(VAULT_HASH, 'VAULT_HASH');\n        const tokenScriptHash = normalizeHash160(body.tokenHash, 'tokenHash');\n        if (tokenAllowlist && !tokenAllowlist.has(tokenScriptHash)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Token is not allowed by relayer policy.'\n            }, {\n                status: 403\n            });\n        }\n        const recipientScriptHash = toScriptHash(body.recipient, 'recipient');\n        const requestedRelayerScriptHash = toScriptHash(body.relayer, 'relayer');\n        if (requestedRelayerScriptHash !== serverRelayerScriptHash) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Relayer mismatch.'\n            }, {\n                status: 400\n            });\n        }\n        const merkleRootHex = normalizeHex32(body.merkleRoot, 'merkleRoot');\n        const nullifierHashHex = normalizeHex32(body.nullifierHash, 'nullifierHash');\n        if (!acquireNullifierLock(nullifierHashHex)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Nullifier is already being processed.'\n            }, {\n                status: 409\n            });\n        }\n        lockedNullifierHex = nullifierHashHex;\n        const amount = parseIntString(body.amount, 'amount');\n        const fee = parseIntString(body.fee, 'fee');\n        if (amount <= 0n) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'amount must be greater than zero.'\n            }, {\n                status: 400\n            });\n        }\n        if (fee < MIN_FEE) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Fee must be at least 1.0 (100000000).'\n            }, {\n                status: 400\n            });\n        }\n        if (amount <= fee) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'amount must be greater than fee.'\n            }, {\n                status: 400\n            });\n        }\n        const normalizedPublicInputs = body.publicInputs.map((item, index)=>normalizePublicInput(item, index));\n        const expectedPublicInputs = [\n            BigInt(`0x${merkleRootHex}`).toString(),\n            BigInt(`0x${nullifierHashHex}`).toString(),\n            BigInt(`0x${_cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.u.reverseHex(recipientScriptHash)}`).toString(),\n            BigInt(`0x${_cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.u.reverseHex(serverRelayerScriptHash)}`).toString(),\n            amount.toString(),\n            fee.toString()\n        ];\n        for(let i = 0; i < expectedPublicInputs.length; i++){\n            if (normalizedPublicInputs[i] !== expectedPublicInputs[i]) {\n                if (lockedNullifierHex) {\n                    releaseNullifierLock(lockedNullifierHex);\n                    lockedNullifierHex = null;\n                }\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: `publicInputs mismatch at index ${i}.`\n                }, {\n                    status: 400\n                });\n            }\n        }\n        const [knownRoot, usedNullifier] = await Promise.all([\n            isKnownRootOnChain(vaultScriptHash, merkleRootHex),\n            isNullifierUsedOnChain(vaultScriptHash, nullifierHashHex)\n        ]);\n        if (!knownRoot) {\n            if (lockedNullifierHex) {\n                releaseNullifierLock(lockedNullifierHex);\n                lockedNullifierHex = null;\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Unknown merkle root.'\n            }, {\n                status: 400\n            });\n        }\n        if (usedNullifier) {\n            if (lockedNullifierHex) {\n                releaseNullifierLock(lockedNullifierHex);\n                lockedNullifierHex = null;\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Nullifier already used.'\n            }, {\n                status: 409\n            });\n        }\n        if (RELAYER_PROOF_MODE === 'snark') {\n            const snarkjs = await loadSnarkjs();\n            const isValid = await snarkjs.groth16.verify(_public_zk_verification_key_json__WEBPACK_IMPORTED_MODULE_2__, normalizedPublicInputs, body.proof);\n            if (!isValid) {\n                if (lockedNullifierHex) {\n                    releaseNullifierLock(lockedNullifierHex);\n                    lockedNullifierHex = null;\n                }\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: 'Invalid Zero-Knowledge Proof.'\n                }, {\n                    status: 400\n                });\n            }\n        }\n        const proofPayload = encodeProofPayload(RELAYER_PROOF_MODE, body.proof, body.proofPayloadBase64);\n        const publicInputsPayload = encodePublicInputsPayload(normalizedPublicInputs);\n        const args = [\n            _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.sc.ContractParam.hash160(tokenScriptHash),\n            _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.sc.ContractParam.byteArray(proofPayload),\n            _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.sc.ContractParam.byteArray(publicInputsPayload),\n            _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.sc.ContractParam.byteArray(toBase64Hex(merkleRootHex)),\n            _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.sc.ContractParam.byteArray(toBase64Hex(nullifierHashHex)),\n            _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.sc.ContractParam.hash160(recipientScriptHash),\n            _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.sc.ContractParam.hash160(serverRelayerScriptHash),\n            _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.sc.ContractParam.integer(amount.toString()),\n            _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.sc.ContractParam.integer(fee.toString())\n        ];\n        const networkMagic = await getNetworkMagic();\n        const contract = new _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.experimental.SmartContract(vaultScriptHash, {\n            networkMagic,\n            rpcAddress: RPC_URL,\n            account: relayerAccount\n        });\n        const signers = [\n            new _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.tx.Signer({\n                account: relayerAccount.scriptHash,\n                scopes: _cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_1__.tx.WitnessScope.CalledByEntry\n            })\n        ];\n        const txid = await contract.invoke('withdraw', args, signers);\n        keepNullifierLock = true;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            txid,\n            message: 'Withdrawal submitted to network.',\n            mode: RELAYER_PROOF_MODE\n        });\n    } catch (error) {\n        console.error('Relay Error:', error instanceof Error ? error.message : 'unknown error');\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error instanceof Error ? error.message : 'Internal relayer error'\n        }, {\n            status: 500\n        });\n    } finally{\n        if (lockedNullifierHex && !keepNullifierLock) {\n            releaseNullifierLock(lockedNullifierHex);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU9nSSxPQUFnQjtRQUN2QitELFFBQVEvRCxLQUFLLENBQUMsZ0JBQWdCQSxpQkFBaUI1RixRQUFRNEYsTUFBTVksT0FBTyxHQUFHO1FBQ3ZFLE9BQU85SixxREFBWUEsQ0FBQ2dKLElBQUksQ0FDdEI7WUFDRWdFLFNBQVM7WUFDVDlELE9BQU9BLGlCQUFpQjVGLFFBQVE0RixNQUFNWSxPQUFPLEdBQUc7UUFDbEQsR0FDQTtZQUFFWCxRQUFRO1FBQUk7SUFFbEIsU0FBVTtRQUNSLElBQUlhLHNCQUFzQixDQUFDQyxtQkFBbUI7WUFDNUN4RCxxQkFBcUJ1RDtRQUN2QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL25lby9naXQvem5lcDE3L3dlYi9hcHAvYXBpL3JlbGF5L3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgdHgsIHdhbGxldCwgc2MsIGV4cGVyaW1lbnRhbCwgdSwgcnBjIH0gZnJvbSAnQGNpdHlvZnppb24vbmVvbi1qcydcbmltcG9ydCB0eXBlIHsgR3JvdGgxNlByb29mLCBQdWJsaWNTaWduYWxzIH0gZnJvbSAnc25hcmtqcydcbmltcG9ydCB2S2V5IGZyb20gJy4uLy4uLy4uL3B1YmxpYy96ay92ZXJpZmljYXRpb25fa2V5Lmpzb24nXG5cbmV4cG9ydCBjb25zdCBydW50aW1lID0gJ25vZGVqcydcblxuY29uc3QgUlBDX1VSTCA9IHByb2Nlc3MuZW52LlJQQ19VUkwgfHwgJ2h0dHA6Ly9zZWVkMXQ1Lm5lby5vcmc6MjAzMzInXG5jb25zdCBSRUxBWUVSX1dJRiA9IHByb2Nlc3MuZW52LlJFTEFZRVJfV0lGIHx8ICcnXG5jb25zdCBWQVVMVF9IQVNIID0gcHJvY2Vzcy5lbnYuVkFVTFRfSEFTSCB8fCAnJ1xuY29uc3QgQUxMT1dFRF9UT0tFTl9IQVNIRVMgPSBwcm9jZXNzLmVudi5BTExPV0VEX1RPS0VOX0hBU0hFUyB8fCAnJ1xuY29uc3QgUkVMQVlFUl9BTExPV0VEX09SSUdJTlMgPSBwcm9jZXNzLmVudi5SRUxBWUVSX0FMTE9XRURfT1JJR0lOUyB8fCAnJ1xuY29uc3QgUkVMQVlFUl9BUElfS0VZID0gcHJvY2Vzcy5lbnYuUkVMQVlFUl9BUElfS0VZIHx8ICcnXG5jb25zdCBSRUxBWUVSX1BST09GX01PREVfUkFXID0gKHByb2Nlc3MuZW52LlJFTEFZRVJfUFJPT0ZfTU9ERSB8fCAnc25hcmsnKS50cmltKCkudG9Mb3dlckNhc2UoKVxuXG5jb25zdCBIQVNIMTYwX0hFWF9SRSA9IC9eKD86MHgpP1swLTlhLWZBLUZdezQwfSQvXG5jb25zdCBIRVgzMl9SRSA9IC9eWzAtOWEtZkEtRl17NjR9JC9cbmNvbnN0IEJBU0U2NF9SRSA9IC9eKD86W0EtWmEtejAtOSsvXXs0fSkqKD86W0EtWmEtejAtOSsvXXsyfSg/Oj09KT98W0EtWmEtejAtOSsvXXszfT0pPyQvXG5jb25zdCBJTlRfUkUgPSAvXig/OjB8WzEtOV1cXGQqKSQvXG5jb25zdCBNQVhfQk9EWV9CWVRFUyA9IDEyOCAqIDEwMjRcbmNvbnN0IE1JTl9GRUUgPSAxMDAwMDAwMDBuXG5jb25zdCBSQVRFX1dJTkRPV19NUyA9IDYwXzAwMFxuY29uc3QgUkFURV9NQVhfUkVRVUVTVFMgPSAzMFxuY29uc3QgTlVMTElGSUVSX0xPQ0tfVFRMX01TID0gMTIwXzAwMFxuY29uc3QgTkVUV09SS19NQUdJQ19DQUNIRV9NUyA9IDMwMF8wMDBcblxudHlwZSBQcm9vZk1vZGUgPSAnc25hcmsnIHwgJ3Byb3RvdHlwZSdcblxudHlwZSBSZWxheVJlcXVlc3RCb2R5ID0ge1xuICB0b2tlbkhhc2g6IHN0cmluZ1xuICBwcm9vZj86IHVua25vd25cbiAgcHJvb2ZQYXlsb2FkQmFzZTY0Pzogc3RyaW5nXG4gIHB1YmxpY0lucHV0czogdW5rbm93blxuICBtZXJrbGVSb290OiBzdHJpbmdcbiAgbnVsbGlmaWVySGFzaDogc3RyaW5nXG4gIHJlY2lwaWVudDogc3RyaW5nXG4gIHJlbGF5ZXI6IHN0cmluZ1xuICBhbW91bnQ6IHN0cmluZ1xuICBmZWU6IHN0cmluZ1xufVxuXG50eXBlIFNuYXJranNMaWtlID0ge1xuICBncm90aDE2OiB7XG4gICAgdmVyaWZ5OiAodmVyaWZpY2F0aW9uS2V5OiB1bmtub3duLCBwdWJsaWNTaWduYWxzOiBQdWJsaWNTaWduYWxzLCBwcm9vZjogR3JvdGgxNlByb29mKSA9PiBQcm9taXNlPGJvb2xlYW4+XG4gIH1cbn1cblxudHlwZSBScGNTdGFja0l0ZW0gPSB7XG4gIHR5cGU/OiBzdHJpbmdcbiAgdmFsdWU/OiB1bmtub3duXG59XG5cbmNvbnN0IFJFTEFZRVJfUFJPT0ZfTU9ERTogUHJvb2ZNb2RlID0gUkVMQVlFUl9QUk9PRl9NT0RFX1JBVyA9PT0gJ3Byb3RvdHlwZScgPyAncHJvdG90eXBlJyA6ICdzbmFyaydcblxuY29uc3QgcmF0ZUxpbWl0U3RvcmUgPSBuZXcgTWFwPHN0cmluZywgeyBjb3VudDogbnVtYmVyOyByZXNldEF0OiBudW1iZXIgfT4oKVxuY29uc3QgbnVsbGlmaWVyTG9ja3MgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpXG5jb25zdCB0b2tlbkFsbG93bGlzdCA9IHBhcnNlVG9rZW5BbGxvd2xpc3QoQUxMT1dFRF9UT0tFTl9IQVNIRVMpXG5jb25zdCBvcmlnaW5BbGxvd2xpc3QgPSBwYXJzZU9yaWdpbkFsbG93bGlzdChSRUxBWUVSX0FMTE9XRURfT1JJR0lOUylcblxubGV0IGNhY2hlZE5ldHdvcmtNYWdpYzogeyB2YWx1ZTogbnVtYmVyOyBleHBpcmVzQXQ6IG51bWJlciB9IHwgbnVsbCA9IG51bGxcbmxldCBzbmFya2pzUHJvbWlzZTogUHJvbWlzZTxTbmFya2pzTGlrZT4gfCBudWxsID0gbnVsbFxuXG5mdW5jdGlvbiBpc0dyb3RoMTZQcm9vZih2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIEdyb3RoMTZQcm9vZiB7XG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlXG4gIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4gIHJldHVybiAoXG4gICAgQXJyYXkuaXNBcnJheShjYW5kaWRhdGUucGlfYSkgJiZcbiAgICBBcnJheS5pc0FycmF5KGNhbmRpZGF0ZS5waV9iKSAmJlxuICAgIEFycmF5LmlzQXJyYXkoY2FuZGlkYXRlLnBpX2MpICYmXG4gICAgdHlwZW9mIGNhbmRpZGF0ZS5wcm90b2NvbCA9PT0gJ3N0cmluZycgJiZcbiAgICB0eXBlb2YgY2FuZGlkYXRlLmN1cnZlID09PSAnc3RyaW5nJ1xuICApXG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUhhc2gxNjAodmFsdWU6IHN0cmluZywgZmllbGROYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCB0cmltbWVkID0gdmFsdWUudHJpbSgpXG4gIGlmICghSEFTSDE2MF9IRVhfUkUudGVzdCh0cmltbWVkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtmaWVsZE5hbWV9IG11c3QgYmUgYSB2YWxpZCAyMC1ieXRlIHNjcmlwdCBoYXNoYClcbiAgfVxuICByZXR1cm4gdHJpbW1lZC5yZXBsYWNlKC9eMHgvaSwgJycpLnRvTG93ZXJDYXNlKClcbn1cblxuZnVuY3Rpb24gdG9TY3JpcHRIYXNoKHZhbHVlOiBzdHJpbmcsIGZpZWxkTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKVxuICBpZiAod2FsbGV0LmlzQWRkcmVzcyh0cmltbWVkKSkge1xuICAgIHJldHVybiB3YWxsZXQuZ2V0U2NyaXB0SGFzaEZyb21BZGRyZXNzKHRyaW1tZWQpXG4gIH1cbiAgcmV0dXJuIG5vcm1hbGl6ZUhhc2gxNjAodHJpbW1lZCwgZmllbGROYW1lKVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVIZXgzMih2YWx1ZTogc3RyaW5nLCBmaWVsZE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB2YWx1ZS50cmltKCkucmVwbGFjZSgvXjB4L2ksICcnKS50b0xvd2VyQ2FzZSgpXG4gIGlmICghSEVYMzJfUkUudGVzdChub3JtYWxpemVkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtmaWVsZE5hbWV9IG11c3QgYmUgYSAzMi1ieXRlIGhleCB2YWx1ZWApXG4gIH1cbiAgcmV0dXJuIG5vcm1hbGl6ZWRcbn1cblxuZnVuY3Rpb24gcGFyc2VJbnRTdHJpbmcodmFsdWU6IHN0cmluZywgZmllbGROYW1lOiBzdHJpbmcpOiBiaWdpbnQge1xuICBjb25zdCB0cmltbWVkID0gdmFsdWUudHJpbSgpXG4gIGlmICghSU5UX1JFLnRlc3QodHJpbW1lZCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7ZmllbGROYW1lfSBtdXN0IGJlIGFuIGludGVnZXIgc3RyaW5nYClcbiAgfVxuICByZXR1cm4gQmlnSW50KHRyaW1tZWQpXG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVB1YmxpY0lucHV0KHZhbHVlOiB1bmtub3duLCBpbmRleDogbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgJiYgdHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJyAmJiB0eXBlb2YgdmFsdWUgIT09ICdiaWdpbnQnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBwdWJsaWNJbnB1dHNbJHtpbmRleH1dIG11c3QgYmUgbnVtZXJpY2ApXG4gIH1cbiAgY29uc3QgcmF3ID0gYCR7dmFsdWV9YC50cmltKClcbiAgaWYgKCFJTlRfUkUudGVzdChyYXcpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBwdWJsaWNJbnB1dHNbJHtpbmRleH1dIG11c3QgYmUgbm9uLW5lZ2F0aXZlIGludGVnZXJgKVxuICB9XG4gIHJldHVybiBCaWdJbnQocmF3KS50b1N0cmluZygpXG59XG5cbmZ1bmN0aW9uIHBhcnNlT3B0aW9uYWxCYXNlNjQodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCwgZmllbGROYW1lOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHJldHVybiBudWxsXG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB2YWx1ZS50cmltKClcbiAgaWYgKG5vcm1hbGl6ZWQubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAke2ZpZWxkTmFtZX0gbXVzdCBub3QgYmUgZW1wdHkgd2hlbiBwcm92aWRlZGApXG4gIH1cbiAgaWYgKCFCQVNFNjRfUkUudGVzdChub3JtYWxpemVkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtmaWVsZE5hbWV9IG11c3QgYmUgdmFsaWQgYmFzZTY0YClcbiAgfVxuXG4gIGNvbnN0IGJ5dGVzID0gQnVmZmVyLmZyb20obm9ybWFsaXplZCwgJ2Jhc2U2NCcpXG4gIGlmIChieXRlcy5sZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7ZmllbGROYW1lfSBtdXN0IGRlY29kZSB0byBub24tZW1wdHkgYnl0ZXNgKVxuICB9XG5cbiAgcmV0dXJuIG5vcm1hbGl6ZWRcbn1cblxuZnVuY3Rpb24gdG9CYXNlNjRIZXgoaGV4OiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gQnVmZmVyLmZyb20oaGV4LCAnaGV4JykudG9TdHJpbmcoJ2Jhc2U2NCcpXG59XG5cbmZ1bmN0aW9uIHBhcnNlVG9rZW5BbGxvd2xpc3QocmF3OiBzdHJpbmcpOiBTZXQ8c3RyaW5nPiB8IG51bGwge1xuICBjb25zdCBlbnRyaWVzID0gcmF3XG4gICAgLnNwbGl0KCcsJylcbiAgICAubWFwKChpdGVtKSA9PiBpdGVtLnRyaW0oKSlcbiAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgLmZpbHRlcigoaXRlbSkgPT4gSEFTSDE2MF9IRVhfUkUudGVzdChpdGVtKSlcbiAgICAubWFwKChpdGVtKSA9PiBpdGVtLnJlcGxhY2UoL14weC9pLCAnJykudG9Mb3dlckNhc2UoKSlcblxuICBpZiAoZW50cmllcy5sZW5ndGggPT09IDApIHJldHVybiBudWxsXG4gIHJldHVybiBuZXcgU2V0KGVudHJpZXMpXG59XG5cbmZ1bmN0aW9uIHBhcnNlT3JpZ2luQWxsb3dsaXN0KHJhdzogc3RyaW5nKTogU2V0PHN0cmluZz4gfCBudWxsIHtcbiAgY29uc3QgZW50cmllcyA9IHJhd1xuICAgIC5zcGxpdCgnLCcpXG4gICAgLm1hcCgoaXRlbSkgPT4gaXRlbS50cmltKCkpXG4gICAgLmZpbHRlcihCb29sZWFuKVxuICAgIC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuZXcgVVJMKGl0ZW0pLm9yaWdpblxuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiAnJ1xuICAgICAgfVxuICAgIH0pXG4gICAgLmZpbHRlcihCb29sZWFuKVxuXG4gIGlmIChlbnRyaWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGxcbiAgcmV0dXJuIG5ldyBTZXQoZW50cmllcylcbn1cblxuZnVuY3Rpb24gZ2V0Q2xpZW50SXAocmVxOiBSZXF1ZXN0KTogc3RyaW5nIHtcbiAgY29uc3QgZm9yd2FyZGVkID0gcmVxLmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKVxuICBpZiAoZm9yd2FyZGVkKSB7XG4gICAgcmV0dXJuIGZvcndhcmRlZC5zcGxpdCgnLCcpWzBdLnRyaW0oKVxuICB9XG4gIHJldHVybiByZXEuaGVhZGVycy5nZXQoJ3gtcmVhbC1pcCcpIHx8ICd1bmtub3duJ1xufVxuXG5mdW5jdGlvbiBpc1JhdGVMaW1pdGVkKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgY29uc3QgY3VycmVudCA9IHJhdGVMaW1pdFN0b3JlLmdldChrZXkpXG5cbiAgaWYgKCFjdXJyZW50IHx8IGN1cnJlbnQucmVzZXRBdCA8PSBub3cpIHtcbiAgICByYXRlTGltaXRTdG9yZS5zZXQoa2V5LCB7IGNvdW50OiAxLCByZXNldEF0OiBub3cgKyBSQVRFX1dJTkRPV19NUyB9KVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgaWYgKGN1cnJlbnQuY291bnQgPj0gUkFURV9NQVhfUkVRVUVTVFMpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgY3VycmVudC5jb3VudCArPSAxXG4gIHJhdGVMaW1pdFN0b3JlLnNldChrZXksIGN1cnJlbnQpXG4gIHJldHVybiBmYWxzZVxufVxuXG5mdW5jdGlvbiBpc09yaWdpbkFsbG93ZWQocmVxOiBSZXF1ZXN0KTogYm9vbGVhbiB7XG4gIGlmICghb3JpZ2luQWxsb3dsaXN0KSByZXR1cm4gdHJ1ZVxuICBjb25zdCBvcmlnaW4gPSByZXEuaGVhZGVycy5nZXQoJ29yaWdpbicpXG4gIGlmICghb3JpZ2luKSByZXR1cm4gZmFsc2VcblxuICBsZXQgbm9ybWFsaXplZE9yaWdpbjogc3RyaW5nXG4gIHRyeSB7XG4gICAgbm9ybWFsaXplZE9yaWdpbiA9IG5ldyBVUkwob3JpZ2luKS5vcmlnaW5cbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgcmV0dXJuIG9yaWdpbkFsbG93bGlzdC5oYXMobm9ybWFsaXplZE9yaWdpbilcbn1cblxuZnVuY3Rpb24gY2xlYW5OdWxsaWZpZXJMb2Nrcyhub3c6IG51bWJlcik6IHZvaWQge1xuICBmb3IgKGNvbnN0IFtrZXksIGV4cGlyZXNBdF0gb2YgbnVsbGlmaWVyTG9ja3MuZW50cmllcygpKSB7XG4gICAgaWYgKGV4cGlyZXNBdCA8PSBub3cpIHtcbiAgICAgIG51bGxpZmllckxvY2tzLmRlbGV0ZShrZXkpXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFjcXVpcmVOdWxsaWZpZXJMb2NrKG51bGxpZmllckhleDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgY2xlYW5OdWxsaWZpZXJMb2Nrcyhub3cpXG4gIGNvbnN0IGV4aXN0aW5nID0gbnVsbGlmaWVyTG9ja3MuZ2V0KG51bGxpZmllckhleClcbiAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ251bWJlcicgJiYgZXhpc3RpbmcgPiBub3cpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBudWxsaWZpZXJMb2Nrcy5zZXQobnVsbGlmaWVySGV4LCBub3cgKyBOVUxMSUZJRVJfTE9DS19UVExfTVMpXG4gIHJldHVybiB0cnVlXG59XG5cbmZ1bmN0aW9uIHJlbGVhc2VOdWxsaWZpZXJMb2NrKG51bGxpZmllckhleDogc3RyaW5nKTogdm9pZCB7XG4gIG51bGxpZmllckxvY2tzLmRlbGV0ZShudWxsaWZpZXJIZXgpXG59XG5cbmZ1bmN0aW9uIHBhcnNlUnBjQm9vbCh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4ge1xuICBpZiAodmFsdWUgPT09IHRydWUgfHwgdmFsdWUgPT09IGZhbHNlKSByZXR1cm4gdmFsdWVcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gdmFsdWUudG9Mb3dlckNhc2UoKVxuICAgIGlmIChub3JtYWxpemVkID09PSAndHJ1ZScpIHJldHVybiB0cnVlXG4gICAgaWYgKG5vcm1hbGl6ZWQgPT09ICdmYWxzZScpIHJldHVybiBmYWxzZVxuICAgIGlmIChJTlRfUkUudGVzdCh2YWx1ZSkpIHJldHVybiBCaWdJbnQodmFsdWUpICE9PSAwblxuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSByZXR1cm4gdmFsdWUgIT09IDBcbiAgcmV0dXJuIGZhbHNlXG59XG5cbmZ1bmN0aW9uIHBhcnNlUnBjQnl0ZUFycmF5SGV4KGl0ZW06IFJwY1N0YWNrSXRlbSwgZmllbGROYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoaXRlbS50eXBlICE9PSAnQnl0ZVN0cmluZycgJiYgaXRlbS50eXBlICE9PSAnQnVmZmVyJyAmJiBpdGVtLnR5cGUgIT09ICdCeXRlQXJyYXknKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAke2ZpZWxkTmFtZX0gbXVzdCBiZSBhIGJ5dGUgc3RyaW5nYClcbiAgfVxuICBpZiAodHlwZW9mIGl0ZW0udmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAke2ZpZWxkTmFtZX0gaXMgbWlzc2luZyBieXRlIHZhbHVlYClcbiAgfVxuICByZXR1cm4gQnVmZmVyLmZyb20oaXRlbS52YWx1ZSwgJ2Jhc2U2NCcpLnRvU3RyaW5nKCdoZXgnKVxufVxuXG5mdW5jdGlvbiBlbmNvZGVQcm9vZlBheWxvYWQobW9kZTogUHJvb2ZNb2RlLCBwcm9vZjogdW5rbm93biwgcHJvb2ZQYXlsb2FkQmFzZTY0Pzogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKG1vZGUgPT09ICdwcm90b3R5cGUnKSB7XG4gICAgY29uc3Qgb3ZlcnJpZGVQYXlsb2FkID0gcGFyc2VPcHRpb25hbEJhc2U2NChwcm9vZlBheWxvYWRCYXNlNjQsICdwcm9vZlBheWxvYWRCYXNlNjQnKVxuICAgIGlmIChvdmVycmlkZVBheWxvYWQpIHtcbiAgICAgIHJldHVybiBvdmVycmlkZVBheWxvYWRcbiAgICB9XG5cbiAgICAvLyBDb21wYXRpYmlsaXR5IHdpdGggdGhlIGN1cnJlbnQgdGVzdCB2ZXJpZmllciBjb250cmFjdCwgd2hpY2ggY2hlY2tzIHByb29mWzBdID09IDB4MDEuXG4gICAgcmV0dXJuIEJ1ZmZlci5mcm9tKFsweDAxXSkudG9TdHJpbmcoJ2Jhc2U2NCcpXG4gIH1cblxuICBpZiAoIWlzR3JvdGgxNlByb29mKHByb29mKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwcm9vZiBwYXlsb2FkLicpXG4gIH1cblxuICByZXR1cm4gQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkocHJvb2YpKS50b1N0cmluZygnYmFzZTY0Jylcbn1cblxuZnVuY3Rpb24gZW5jb2RlUHVibGljSW5wdXRzUGF5bG9hZChwdWJsaWNJbnB1dHM6IFB1YmxpY1NpZ25hbHMpOiBzdHJpbmcge1xuICByZXR1cm4gQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkocHVibGljSW5wdXRzKSkudG9TdHJpbmcoJ2Jhc2U2NCcpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldE5ldHdvcmtNYWdpYygpOiBQcm9taXNlPG51bWJlcj4ge1xuICBjb25zdCBub3cgPSBEYXRlLm5vdygpXG4gIGlmIChjYWNoZWROZXR3b3JrTWFnaWMgJiYgY2FjaGVkTmV0d29ya01hZ2ljLmV4cGlyZXNBdCA+IG5vdykge1xuICAgIHJldHVybiBjYWNoZWROZXR3b3JrTWFnaWMudmFsdWVcbiAgfVxuXG4gIGNvbnN0IGNsaWVudCA9IG5ldyBycGMuUlBDQ2xpZW50KFJQQ19VUkwpXG4gIGNvbnN0IHZlcnNpb24gPSBhd2FpdCBjbGllbnQuZ2V0VmVyc2lvbigpXG4gIGNvbnN0IG5ldHdvcmsgPSB2ZXJzaW9uPy5wcm90b2NvbD8ubmV0d29ya1xuICBpZiAodHlwZW9mIG5ldHdvcmsgIT09ICdudW1iZXInIHx8ICFOdW1iZXIuaXNJbnRlZ2VyKG5ldHdvcmspIHx8IG5ldHdvcmsgPD0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHJlc29sdmUgbmV0d29yayBtYWdpYyBmcm9tIFJQQyBlbmRwb2ludCcpXG4gIH1cblxuICBjYWNoZWROZXR3b3JrTWFnaWMgPSB7XG4gICAgdmFsdWU6IG5ldHdvcmssXG4gICAgZXhwaXJlc0F0OiBub3cgKyBORVRXT1JLX01BR0lDX0NBQ0hFX01TXG4gIH1cbiAgcmV0dXJuIG5ldHdvcmtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbG9hZFNuYXJranMoKTogUHJvbWlzZTxTbmFya2pzTGlrZT4ge1xuICBpZiAoIXNuYXJranNQcm9taXNlKSB7XG4gICAgc25hcmtqc1Byb21pc2UgPSBpbXBvcnQoJ3NuYXJranMnKSBhcyB1bmtub3duIGFzIFByb21pc2U8U25hcmtqc0xpa2U+XG4gIH1cbiAgcmV0dXJuIHNuYXJranNQcm9taXNlXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNhbGxWYXVsdEJvb2xNZXRob2QodmF1bHRTY3JpcHRIYXNoOiBzdHJpbmcsIG9wZXJhdGlvbjogc3RyaW5nLCBpbnB1dEhleDMyOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3QgY2xpZW50ID0gbmV3IHJwYy5SUENDbGllbnQoUlBDX1VSTClcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50Lmludm9rZUZ1bmN0aW9uKGAweCR7dmF1bHRTY3JpcHRIYXNofWAsIG9wZXJhdGlvbiwgW3NjLkNvbnRyYWN0UGFyYW0uYnl0ZUFycmF5KHRvQmFzZTY0SGV4KGlucHV0SGV4MzIpKV0pXG4gIGlmIChyZXN1bHQuc3RhdGUgPT09ICdGQVVMVCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFZhdWx0IHByZWNoZWNrICR7b3BlcmF0aW9ufSBmYWlsZWQ6ICR7cmVzdWx0LmV4Y2VwdGlvbiB8fCAndW5rbm93biBmYXVsdCd9YClcbiAgfVxuXG4gIGNvbnN0IHZhbHVlID0gKHJlc3VsdC5zdGFjayAmJiByZXN1bHQuc3RhY2tbMF0gJiYgKHJlc3VsdC5zdGFja1swXSBhcyBScGNTdGFja0l0ZW0pLnZhbHVlKSB8fCBmYWxzZVxuICByZXR1cm4gcGFyc2VScGNCb29sKHZhbHVlKVxufVxuXG5hc3luYyBmdW5jdGlvbiBjYWxsVmF1bHRCeXRlTWV0aG9kKHZhdWx0U2NyaXB0SGFzaDogc3RyaW5nLCBvcGVyYXRpb246IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGNsaWVudCA9IG5ldyBycGMuUlBDQ2xpZW50KFJQQ19VUkwpXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudC5pbnZva2VGdW5jdGlvbihgMHgke3ZhdWx0U2NyaXB0SGFzaH1gLCBvcGVyYXRpb24sIFtdKVxuICBpZiAocmVzdWx0LnN0YXRlID09PSAnRkFVTFQnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBWYXVsdCByZWFkICR7b3BlcmF0aW9ufSBmYWlsZWQ6ICR7cmVzdWx0LmV4Y2VwdGlvbiB8fCAndW5rbm93biBmYXVsdCd9YClcbiAgfVxuXG4gIGNvbnN0IGl0ZW0gPSAocmVzdWx0LnN0YWNrICYmIHJlc3VsdC5zdGFja1swXSkgYXMgUnBjU3RhY2tJdGVtIHwgdW5kZWZpbmVkXG4gIGlmICghaXRlbSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVmF1bHQgcmVhZCAke29wZXJhdGlvbn0gcmV0dXJuZWQgZW1wdHkgc3RhY2tgKVxuICB9XG4gIHJldHVybiBwYXJzZVJwY0J5dGVBcnJheUhleChpdGVtLCBvcGVyYXRpb24pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGlzTnVsbGlmaWVyVXNlZE9uQ2hhaW4odmF1bHRTY3JpcHRIYXNoOiBzdHJpbmcsIG51bGxpZmllckhleDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IGNhbGxWYXVsdEJvb2xNZXRob2QodmF1bHRTY3JpcHRIYXNoLCAnaXNOdWxsaWZpZXJVc2VkJywgbnVsbGlmaWVySGV4KVxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gYXdhaXQgY2FsbFZhdWx0Qm9vbE1ldGhvZCh2YXVsdFNjcmlwdEhhc2gsICdJc051bGxpZmllclVzZWQnLCBudWxsaWZpZXJIZXgpXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gaXNLbm93blJvb3RPbkNoYWluKHZhdWx0U2NyaXB0SGFzaDogc3RyaW5nLCByb290SGV4OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgY2FsbFZhdWx0Qm9vbE1ldGhvZCh2YXVsdFNjcmlwdEhhc2gsICdpc0tub3duUm9vdCcsIHJvb3RIZXgpXG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBhd2FpdCBjYWxsVmF1bHRCb29sTWV0aG9kKHZhdWx0U2NyaXB0SGFzaCwgJ0lzS25vd25Sb290Jywgcm9vdEhleClcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRDdXJyZW50Um9vdE9uQ2hhaW4odmF1bHRTY3JpcHRIYXNoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgbGV0IHJvb3RIZXg6IHN0cmluZ1xuICB0cnkge1xuICAgIHJvb3RIZXggPSBhd2FpdCBjYWxsVmF1bHRCeXRlTWV0aG9kKHZhdWx0U2NyaXB0SGFzaCwgJ2dldEN1cnJlbnRSb290JylcbiAgfSBjYXRjaCB7XG4gICAgcm9vdEhleCA9IGF3YWl0IGNhbGxWYXVsdEJ5dGVNZXRob2QodmF1bHRTY3JpcHRIYXNoLCAnR2V0Q3VycmVudFJvb3QnKVxuICB9XG5cbiAgaWYgKHJvb3RIZXgubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBpZiAoIUhFWDMyX1JFLnRlc3Qocm9vdEhleCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZhdWx0IGN1cnJlbnQgcm9vdCBpcyBub3QgMzIgYnl0ZXMnKVxuICB9XG4gIHJldHVybiByb290SGV4XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XG4gIGlmICghUkVMQVlFUl9XSUYgfHwgIVZBVUxUX0hBU0gpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIGNvbmZpZ3VyZWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ1NlcnZlciBpcyBtaXNzaW5nIGNvbmZpZ3VyYXRpb24gKFJFTEFZRVJfV0lGIG9yIFZBVUxUX0hBU0gpLidcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAzLCBoZWFkZXJzOiB7ICdDYWNoZS1Db250cm9sJzogJ25vLXN0b3JlJyB9IH1cbiAgICApXG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHJlbGF5ZXJBY2NvdW50ID0gbmV3IHdhbGxldC5BY2NvdW50KFJFTEFZRVJfV0lGKVxuICAgIGNvbnN0IHZhdWx0U2NyaXB0SGFzaCA9IG5vcm1hbGl6ZUhhc2gxNjAoVkFVTFRfSEFTSCwgJ1ZBVUxUX0hBU0gnKVxuICAgIGNvbnN0IFtuZXR3b3JrTWFnaWMsIGN1cnJlbnRSb290XSA9IGF3YWl0IFByb21pc2UuYWxsKFtnZXROZXR3b3JrTWFnaWMoKSwgZ2V0Q3VycmVudFJvb3RPbkNoYWluKHZhdWx0U2NyaXB0SGFzaCldKVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBjb25maWd1cmVkOiB0cnVlLFxuICAgICAgICByZWxheWVyQWRkcmVzczogcmVsYXllckFjY291bnQuYWRkcmVzcyxcbiAgICAgICAgdmF1bHRIYXNoOiBgMHgke3ZhdWx0U2NyaXB0SGFzaH1gLFxuICAgICAgICBjdXJyZW50Um9vdDogY3VycmVudFJvb3QgPyBgMHgke2N1cnJlbnRSb290fWAgOiBudWxsLFxuICAgICAgICBuZXR3b3JrTWFnaWMsXG4gICAgICAgIHByb29mTW9kZTogUkVMQVlFUl9QUk9PRl9NT0RFXG4gICAgICB9LFxuICAgICAgeyBoZWFkZXJzOiB7ICdDYWNoZS1Db250cm9sJzogJ25vLXN0b3JlJyB9IH1cbiAgICApXG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBjb25maWd1cmVkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBpbml0aWFsaXplIHJlbGF5ZXIgY29uZmlnLidcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAzLCBoZWFkZXJzOiB7ICdDYWNoZS1Db250cm9sJzogJ25vLXN0b3JlJyB9IH1cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XG4gIGxldCBsb2NrZWROdWxsaWZpZXJIZXg6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gIGxldCBrZWVwTnVsbGlmaWVyTG9jayA9IGZhbHNlXG5cbiAgdHJ5IHtcbiAgICBpZiAoIVJFTEFZRVJfV0lGIHx8ICFWQVVMVF9IQVNIKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1NlcnZlciBpcyBtaXNzaW5nIGNvbmZpZ3VyYXRpb24gKFJFTEFZRVJfV0lGIG9yIFZBVUxUX0hBU0gpLicgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnRMZW5ndGhIZWFkZXIgPSByZXEuaGVhZGVycy5nZXQoJ2NvbnRlbnQtbGVuZ3RoJylcbiAgICBpZiAoY29udGVudExlbmd0aEhlYWRlcikge1xuICAgICAgY29uc3QgY29udGVudExlbmd0aCA9IE51bWJlcihjb250ZW50TGVuZ3RoSGVhZGVyKVxuICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShjb250ZW50TGVuZ3RoKSAmJiBjb250ZW50TGVuZ3RoID4gTUFYX0JPRFlfQllURVMpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdSZXF1ZXN0IGJvZHkgdG9vIGxhcmdlLicgfSwgeyBzdGF0dXM6IDQxMyB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGlwID0gZ2V0Q2xpZW50SXAocmVxKVxuICAgIGlmIChpc1JhdGVMaW1pdGVkKGlwKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdUb28gbWFueSByZXF1ZXN0cy4gUmV0cnkgbGF0ZXIuJyB9LCB7IHN0YXR1czogNDI5IH0pXG4gICAgfVxuICAgIGlmICghaXNPcmlnaW5BbGxvd2VkKHJlcSkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnT3JpZ2luIG5vdCBhbGxvd2VkLicgfSwgeyBzdGF0dXM6IDQwMyB9KVxuICAgIH1cbiAgICBpZiAoUkVMQVlFUl9BUElfS0VZKSB7XG4gICAgICBjb25zdCBjbGllbnRBcGlLZXkgPSByZXEuaGVhZGVycy5nZXQoJ3gtcmVsYXllci1hcGkta2V5JylcbiAgICAgIGlmICghY2xpZW50QXBpS2V5IHx8IGNsaWVudEFwaUtleSAhPT0gUkVMQVlFUl9BUElfS0VZKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTWlzc2luZyBvciBpbnZhbGlkIHJlbGF5ZXIgQVBJIGtleS4nIH0sIHsgc3RhdHVzOiA0MDEgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgYm9keTogUmVsYXlSZXF1ZXN0Qm9keVxuICAgIHRyeSB7XG4gICAgICBib2R5ID0gKGF3YWl0IHJlcS5qc29uKCkpIGFzIFJlbGF5UmVxdWVzdEJvZHlcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW52YWxpZCBKU09OIGJvZHkuJyB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGJvZHk/LnRva2VuSGFzaCAhPT0gJ3N0cmluZycgfHxcbiAgICAgIHR5cGVvZiBib2R5Py5tZXJrbGVSb290ICE9PSAnc3RyaW5nJyB8fFxuICAgICAgdHlwZW9mIGJvZHk/Lm51bGxpZmllckhhc2ggIT09ICdzdHJpbmcnIHx8XG4gICAgICB0eXBlb2YgYm9keT8ucmVjaXBpZW50ICE9PSAnc3RyaW5nJyB8fFxuICAgICAgdHlwZW9mIGJvZHk/LnJlbGF5ZXIgIT09ICdzdHJpbmcnIHx8XG4gICAgICB0eXBlb2YgYm9keT8uYW1vdW50ICE9PSAnc3RyaW5nJyB8fFxuICAgICAgdHlwZW9mIGJvZHk/LmZlZSAhPT0gJ3N0cmluZydcbiAgICApIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW52YWxpZCByZXF1ZXN0IGZpZWxkcy4nIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYm9keS5wdWJsaWNJbnB1dHMpIHx8IGJvZHkucHVibGljSW5wdXRzLmxlbmd0aCA8IDYpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAncHVibGljSW5wdXRzIG11c3QgYmUgYW4gYXJyYXkgd2l0aCA2IHZhbHVlcy4nIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBpZiAoUkVMQVlFUl9QUk9PRl9NT0RFID09PSAnc25hcmsnICYmICFpc0dyb3RoMTZQcm9vZihib2R5LnByb29mKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHByb29mIHBheWxvYWQuJyB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgY29uc3QgcmVsYXllckFjY291bnQgPSBuZXcgd2FsbGV0LkFjY291bnQoUkVMQVlFUl9XSUYpXG4gICAgY29uc3Qgc2VydmVyUmVsYXllclNjcmlwdEhhc2ggPSBub3JtYWxpemVIYXNoMTYwKHJlbGF5ZXJBY2NvdW50LnNjcmlwdEhhc2gsICdzZXJ2ZXIgcmVsYXllcicpXG4gICAgY29uc3QgdmF1bHRTY3JpcHRIYXNoID0gbm9ybWFsaXplSGFzaDE2MChWQVVMVF9IQVNILCAnVkFVTFRfSEFTSCcpXG5cbiAgICBjb25zdCB0b2tlblNjcmlwdEhhc2ggPSBub3JtYWxpemVIYXNoMTYwKGJvZHkudG9rZW5IYXNoLCAndG9rZW5IYXNoJylcbiAgICBpZiAodG9rZW5BbGxvd2xpc3QgJiYgIXRva2VuQWxsb3dsaXN0Lmhhcyh0b2tlblNjcmlwdEhhc2gpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1Rva2VuIGlzIG5vdCBhbGxvd2VkIGJ5IHJlbGF5ZXIgcG9saWN5LicgfSwgeyBzdGF0dXM6IDQwMyB9KVxuICAgIH1cblxuICAgIGNvbnN0IHJlY2lwaWVudFNjcmlwdEhhc2ggPSB0b1NjcmlwdEhhc2goYm9keS5yZWNpcGllbnQsICdyZWNpcGllbnQnKVxuICAgIGNvbnN0IHJlcXVlc3RlZFJlbGF5ZXJTY3JpcHRIYXNoID0gdG9TY3JpcHRIYXNoKGJvZHkucmVsYXllciwgJ3JlbGF5ZXInKVxuICAgIGlmIChyZXF1ZXN0ZWRSZWxheWVyU2NyaXB0SGFzaCAhPT0gc2VydmVyUmVsYXllclNjcmlwdEhhc2gpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnUmVsYXllciBtaXNtYXRjaC4nIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBtZXJrbGVSb290SGV4ID0gbm9ybWFsaXplSGV4MzIoYm9keS5tZXJrbGVSb290LCAnbWVya2xlUm9vdCcpXG4gICAgY29uc3QgbnVsbGlmaWVySGFzaEhleCA9IG5vcm1hbGl6ZUhleDMyKGJvZHkubnVsbGlmaWVySGFzaCwgJ251bGxpZmllckhhc2gnKVxuICAgIGlmICghYWNxdWlyZU51bGxpZmllckxvY2sobnVsbGlmaWVySGFzaEhleCkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTnVsbGlmaWVyIGlzIGFscmVhZHkgYmVpbmcgcHJvY2Vzc2VkLicgfSwgeyBzdGF0dXM6IDQwOSB9KVxuICAgIH1cbiAgICBsb2NrZWROdWxsaWZpZXJIZXggPSBudWxsaWZpZXJIYXNoSGV4XG5cbiAgICBjb25zdCBhbW91bnQgPSBwYXJzZUludFN0cmluZyhib2R5LmFtb3VudCwgJ2Ftb3VudCcpXG4gICAgY29uc3QgZmVlID0gcGFyc2VJbnRTdHJpbmcoYm9keS5mZWUsICdmZWUnKVxuICAgIGlmIChhbW91bnQgPD0gMG4pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnYW1vdW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8uJyB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuICAgIGlmIChmZWUgPCBNSU5fRkVFKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZlZSBtdXN0IGJlIGF0IGxlYXN0IDEuMCAoMTAwMDAwMDAwKS4nIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG4gICAgaWYgKGFtb3VudCA8PSBmZWUpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnYW1vdW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIGZlZS4nIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBub3JtYWxpemVkUHVibGljSW5wdXRzOiBQdWJsaWNTaWduYWxzID0gYm9keS5wdWJsaWNJbnB1dHMubWFwKChpdGVtLCBpbmRleCkgPT4gbm9ybWFsaXplUHVibGljSW5wdXQoaXRlbSwgaW5kZXgpKVxuICAgIGNvbnN0IGV4cGVjdGVkUHVibGljSW5wdXRzID0gW1xuICAgICAgQmlnSW50KGAweCR7bWVya2xlUm9vdEhleH1gKS50b1N0cmluZygpLFxuICAgICAgQmlnSW50KGAweCR7bnVsbGlmaWVySGFzaEhleH1gKS50b1N0cmluZygpLFxuICAgICAgQmlnSW50KGAweCR7dS5yZXZlcnNlSGV4KHJlY2lwaWVudFNjcmlwdEhhc2gpfWApLnRvU3RyaW5nKCksXG4gICAgICBCaWdJbnQoYDB4JHt1LnJldmVyc2VIZXgoc2VydmVyUmVsYXllclNjcmlwdEhhc2gpfWApLnRvU3RyaW5nKCksXG4gICAgICBhbW91bnQudG9TdHJpbmcoKSxcbiAgICAgIGZlZS50b1N0cmluZygpXG4gICAgXVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBleHBlY3RlZFB1YmxpY0lucHV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKG5vcm1hbGl6ZWRQdWJsaWNJbnB1dHNbaV0gIT09IGV4cGVjdGVkUHVibGljSW5wdXRzW2ldKSB7XG4gICAgICAgIGlmIChsb2NrZWROdWxsaWZpZXJIZXgpIHtcbiAgICAgICAgICByZWxlYXNlTnVsbGlmaWVyTG9jayhsb2NrZWROdWxsaWZpZXJIZXgpXG4gICAgICAgICAgbG9ja2VkTnVsbGlmaWVySGV4ID0gbnVsbFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBgcHVibGljSW5wdXRzIG1pc21hdGNoIGF0IGluZGV4ICR7aX0uYCB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgW2tub3duUm9vdCwgdXNlZE51bGxpZmllcl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBpc0tub3duUm9vdE9uQ2hhaW4odmF1bHRTY3JpcHRIYXNoLCBtZXJrbGVSb290SGV4KSxcbiAgICAgIGlzTnVsbGlmaWVyVXNlZE9uQ2hhaW4odmF1bHRTY3JpcHRIYXNoLCBudWxsaWZpZXJIYXNoSGV4KVxuICAgIF0pXG4gICAgaWYgKCFrbm93blJvb3QpIHtcbiAgICAgIGlmIChsb2NrZWROdWxsaWZpZXJIZXgpIHtcbiAgICAgICAgcmVsZWFzZU51bGxpZmllckxvY2sobG9ja2VkTnVsbGlmaWVySGV4KVxuICAgICAgICBsb2NrZWROdWxsaWZpZXJIZXggPSBudWxsXG4gICAgICB9XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1Vua25vd24gbWVya2xlIHJvb3QuJyB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuICAgIGlmICh1c2VkTnVsbGlmaWVyKSB7XG4gICAgICBpZiAobG9ja2VkTnVsbGlmaWVySGV4KSB7XG4gICAgICAgIHJlbGVhc2VOdWxsaWZpZXJMb2NrKGxvY2tlZE51bGxpZmllckhleClcbiAgICAgICAgbG9ja2VkTnVsbGlmaWVySGV4ID0gbnVsbFxuICAgICAgfVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdOdWxsaWZpZXIgYWxyZWFkeSB1c2VkLicgfSwgeyBzdGF0dXM6IDQwOSB9KVxuICAgIH1cblxuICAgIGlmIChSRUxBWUVSX1BST09GX01PREUgPT09ICdzbmFyaycpIHtcbiAgICAgIGNvbnN0IHNuYXJranMgPSBhd2FpdCBsb2FkU25hcmtqcygpXG4gICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgc25hcmtqcy5ncm90aDE2LnZlcmlmeSh2S2V5LCBub3JtYWxpemVkUHVibGljSW5wdXRzLCBib2R5LnByb29mIGFzIEdyb3RoMTZQcm9vZilcbiAgICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgICBpZiAobG9ja2VkTnVsbGlmaWVySGV4KSB7XG4gICAgICAgICAgcmVsZWFzZU51bGxpZmllckxvY2sobG9ja2VkTnVsbGlmaWVySGV4KVxuICAgICAgICAgIGxvY2tlZE51bGxpZmllckhleCA9IG51bGxcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgWmVyby1Lbm93bGVkZ2UgUHJvb2YuJyB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcHJvb2ZQYXlsb2FkID0gZW5jb2RlUHJvb2ZQYXlsb2FkKFJFTEFZRVJfUFJPT0ZfTU9ERSwgYm9keS5wcm9vZiwgYm9keS5wcm9vZlBheWxvYWRCYXNlNjQpXG4gICAgY29uc3QgcHVibGljSW5wdXRzUGF5bG9hZCA9IGVuY29kZVB1YmxpY0lucHV0c1BheWxvYWQobm9ybWFsaXplZFB1YmxpY0lucHV0cylcblxuICAgIGNvbnN0IGFyZ3MgPSBbXG4gICAgICBzYy5Db250cmFjdFBhcmFtLmhhc2gxNjAodG9rZW5TY3JpcHRIYXNoKSxcbiAgICAgIHNjLkNvbnRyYWN0UGFyYW0uYnl0ZUFycmF5KHByb29mUGF5bG9hZCksXG4gICAgICBzYy5Db250cmFjdFBhcmFtLmJ5dGVBcnJheShwdWJsaWNJbnB1dHNQYXlsb2FkKSxcbiAgICAgIHNjLkNvbnRyYWN0UGFyYW0uYnl0ZUFycmF5KHRvQmFzZTY0SGV4KG1lcmtsZVJvb3RIZXgpKSxcbiAgICAgIHNjLkNvbnRyYWN0UGFyYW0uYnl0ZUFycmF5KHRvQmFzZTY0SGV4KG51bGxpZmllckhhc2hIZXgpKSxcbiAgICAgIHNjLkNvbnRyYWN0UGFyYW0uaGFzaDE2MChyZWNpcGllbnRTY3JpcHRIYXNoKSxcbiAgICAgIHNjLkNvbnRyYWN0UGFyYW0uaGFzaDE2MChzZXJ2ZXJSZWxheWVyU2NyaXB0SGFzaCksXG4gICAgICBzYy5Db250cmFjdFBhcmFtLmludGVnZXIoYW1vdW50LnRvU3RyaW5nKCkpLFxuICAgICAgc2MuQ29udHJhY3RQYXJhbS5pbnRlZ2VyKGZlZS50b1N0cmluZygpKVxuICAgIF1cblxuICAgIGNvbnN0IG5ldHdvcmtNYWdpYyA9IGF3YWl0IGdldE5ldHdvcmtNYWdpYygpXG4gICAgY29uc3QgY29udHJhY3QgPSBuZXcgZXhwZXJpbWVudGFsLlNtYXJ0Q29udHJhY3QodmF1bHRTY3JpcHRIYXNoIGFzIHVua25vd24gYXMgaW1wb3J0KCdAY2l0eW9memlvbi9uZW9uLWNvcmUnKS51LkhleFN0cmluZywge1xuICAgICAgbmV0d29ya01hZ2ljLFxuICAgICAgcnBjQWRkcmVzczogUlBDX1VSTCxcbiAgICAgIGFjY291bnQ6IHJlbGF5ZXJBY2NvdW50XG4gICAgfSlcblxuICAgIGNvbnN0IHNpZ25lcnMgPSBbXG4gICAgICBuZXcgdHguU2lnbmVyKHtcbiAgICAgICAgYWNjb3VudDogcmVsYXllckFjY291bnQuc2NyaXB0SGFzaCxcbiAgICAgICAgc2NvcGVzOiB0eC5XaXRuZXNzU2NvcGUuQ2FsbGVkQnlFbnRyeVxuICAgICAgfSlcbiAgICBdXG5cbiAgICBjb25zdCB0eGlkID0gYXdhaXQgY29udHJhY3QuaW52b2tlKCd3aXRoZHJhdycsIGFyZ3MsIHNpZ25lcnMpXG4gICAga2VlcE51bGxpZmllckxvY2sgPSB0cnVlXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHR4aWQsXG4gICAgICBtZXNzYWdlOiAnV2l0aGRyYXdhbCBzdWJtaXR0ZWQgdG8gbmV0d29yay4nLFxuICAgICAgbW9kZTogUkVMQVlFUl9QUk9PRl9NT0RFXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICBjb25zb2xlLmVycm9yKCdSZWxheSBFcnJvcjonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICd1bmtub3duIGVycm9yJylcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnSW50ZXJuYWwgcmVsYXllciBlcnJvcidcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH0gZmluYWxseSB7XG4gICAgaWYgKGxvY2tlZE51bGxpZmllckhleCAmJiAha2VlcE51bGxpZmllckxvY2spIHtcbiAgICAgIHJlbGVhc2VOdWxsaWZpZXJMb2NrKGxvY2tlZE51bGxpZmllckhleClcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJ0eCIsIndhbGxldCIsInNjIiwiZXhwZXJpbWVudGFsIiwidSIsInJwYyIsInZLZXkiLCJydW50aW1lIiwiUlBDX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJSRUxBWUVSX1dJRiIsIlZBVUxUX0hBU0giLCJBTExPV0VEX1RPS0VOX0hBU0hFUyIsIlJFTEFZRVJfQUxMT1dFRF9PUklHSU5TIiwiUkVMQVlFUl9BUElfS0VZIiwiUkVMQVlFUl9QUk9PRl9NT0RFX1JBVyIsIlJFTEFZRVJfUFJPT0ZfTU9ERSIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsIkhBU0gxNjBfSEVYX1JFIiwiSEVYMzJfUkUiLCJCQVNFNjRfUkUiLCJJTlRfUkUiLCJNQVhfQk9EWV9CWVRFUyIsIk1JTl9GRUUiLCJSQVRFX1dJTkRPV19NUyIsIlJBVEVfTUFYX1JFUVVFU1RTIiwiTlVMTElGSUVSX0xPQ0tfVFRMX01TIiwiTkVUV09SS19NQUdJQ19DQUNIRV9NUyIsInJhdGVMaW1pdFN0b3JlIiwiTWFwIiwibnVsbGlmaWVyTG9ja3MiLCJ0b2tlbkFsbG93bGlzdCIsInBhcnNlVG9rZW5BbGxvd2xpc3QiLCJvcmlnaW5BbGxvd2xpc3QiLCJwYXJzZU9yaWdpbkFsbG93bGlzdCIsImNhY2hlZE5ldHdvcmtNYWdpYyIsInNuYXJranNQcm9taXNlIiwiaXNHcm90aDE2UHJvb2YiLCJ2YWx1ZSIsImNhbmRpZGF0ZSIsIkFycmF5IiwiaXNBcnJheSIsInBpX2EiLCJwaV9iIiwicGlfYyIsInByb3RvY29sIiwiY3VydmUiLCJub3JtYWxpemVIYXNoMTYwIiwiZmllbGROYW1lIiwidHJpbW1lZCIsInRlc3QiLCJFcnJvciIsInJlcGxhY2UiLCJ0b1NjcmlwdEhhc2giLCJpc0FkZHJlc3MiLCJnZXRTY3JpcHRIYXNoRnJvbUFkZHJlc3MiLCJub3JtYWxpemVIZXgzMiIsIm5vcm1hbGl6ZWQiLCJwYXJzZUludFN0cmluZyIsIkJpZ0ludCIsIm5vcm1hbGl6ZVB1YmxpY0lucHV0IiwiaW5kZXgiLCJyYXciLCJ0b1N0cmluZyIsInBhcnNlT3B0aW9uYWxCYXNlNjQiLCJsZW5ndGgiLCJieXRlcyIsIkJ1ZmZlciIsImZyb20iLCJ0b0Jhc2U2NEhleCIsImhleCIsImVudHJpZXMiLCJzcGxpdCIsIm1hcCIsIml0ZW0iLCJmaWx0ZXIiLCJCb29sZWFuIiwiU2V0IiwiVVJMIiwib3JpZ2luIiwiZ2V0Q2xpZW50SXAiLCJyZXEiLCJmb3J3YXJkZWQiLCJoZWFkZXJzIiwiZ2V0IiwiaXNSYXRlTGltaXRlZCIsImtleSIsIm5vdyIsIkRhdGUiLCJjdXJyZW50IiwicmVzZXRBdCIsInNldCIsImNvdW50IiwiaXNPcmlnaW5BbGxvd2VkIiwibm9ybWFsaXplZE9yaWdpbiIsImhhcyIsImNsZWFuTnVsbGlmaWVyTG9ja3MiLCJleHBpcmVzQXQiLCJkZWxldGUiLCJhY3F1aXJlTnVsbGlmaWVyTG9jayIsIm51bGxpZmllckhleCIsImV4aXN0aW5nIiwicmVsZWFzZU51bGxpZmllckxvY2siLCJwYXJzZVJwY0Jvb2wiLCJwYXJzZVJwY0J5dGVBcnJheUhleCIsInR5cGUiLCJlbmNvZGVQcm9vZlBheWxvYWQiLCJtb2RlIiwicHJvb2YiLCJwcm9vZlBheWxvYWRCYXNlNjQiLCJvdmVycmlkZVBheWxvYWQiLCJKU09OIiwic3RyaW5naWZ5IiwiZW5jb2RlUHVibGljSW5wdXRzUGF5bG9hZCIsInB1YmxpY0lucHV0cyIsImdldE5ldHdvcmtNYWdpYyIsImNsaWVudCIsIlJQQ0NsaWVudCIsInZlcnNpb24iLCJnZXRWZXJzaW9uIiwibmV0d29yayIsIk51bWJlciIsImlzSW50ZWdlciIsImxvYWRTbmFya2pzIiwiY2FsbFZhdWx0Qm9vbE1ldGhvZCIsInZhdWx0U2NyaXB0SGFzaCIsIm9wZXJhdGlvbiIsImlucHV0SGV4MzIiLCJyZXN1bHQiLCJpbnZva2VGdW5jdGlvbiIsIkNvbnRyYWN0UGFyYW0iLCJieXRlQXJyYXkiLCJzdGF0ZSIsImV4Y2VwdGlvbiIsInN0YWNrIiwiY2FsbFZhdWx0Qnl0ZU1ldGhvZCIsImlzTnVsbGlmaWVyVXNlZE9uQ2hhaW4iLCJpc0tub3duUm9vdE9uQ2hhaW4iLCJyb290SGV4IiwiZ2V0Q3VycmVudFJvb3RPbkNoYWluIiwiR0VUIiwianNvbiIsImNvbmZpZ3VyZWQiLCJlcnJvciIsInN0YXR1cyIsInJlbGF5ZXJBY2NvdW50IiwiQWNjb3VudCIsIm5ldHdvcmtNYWdpYyIsImN1cnJlbnRSb290IiwiUHJvbWlzZSIsImFsbCIsInJlbGF5ZXJBZGRyZXNzIiwiYWRkcmVzcyIsInZhdWx0SGFzaCIsInByb29mTW9kZSIsIm1lc3NhZ2UiLCJQT1NUIiwibG9ja2VkTnVsbGlmaWVySGV4Iiwia2VlcE51bGxpZmllckxvY2siLCJjb250ZW50TGVuZ3RoSGVhZGVyIiwiY29udGVudExlbmd0aCIsImlzRmluaXRlIiwiaXAiLCJjbGllbnRBcGlLZXkiLCJib2R5IiwidG9rZW5IYXNoIiwibWVya2xlUm9vdCIsIm51bGxpZmllckhhc2giLCJyZWNpcGllbnQiLCJyZWxheWVyIiwiYW1vdW50IiwiZmVlIiwic2VydmVyUmVsYXllclNjcmlwdEhhc2giLCJzY3JpcHRIYXNoIiwidG9rZW5TY3JpcHRIYXNoIiwicmVjaXBpZW50U2NyaXB0SGFzaCIsInJlcXVlc3RlZFJlbGF5ZXJTY3JpcHRIYXNoIiwibWVya2xlUm9vdEhleCIsIm51bGxpZmllckhhc2hIZXgiLCJub3JtYWxpemVkUHVibGljSW5wdXRzIiwiZXhwZWN0ZWRQdWJsaWNJbnB1dHMiLCJyZXZlcnNlSGV4IiwiaSIsImtub3duUm9vdCIsInVzZWROdWxsaWZpZXIiLCJzbmFya2pzIiwiaXNWYWxpZCIsImdyb3RoMTYiLCJ2ZXJpZnkiLCJwcm9vZlBheWxvYWQiLCJwdWJsaWNJbnB1dHNQYXlsb2FkIiwiYXJncyIsImhhc2gxNjAiLCJpbnRlZ2VyIiwiY29udHJhY3QiLCJTbWFydENvbnRyYWN0IiwicnBjQWRkcmVzcyIsImFjY291bnQiLCJzaWduZXJzIiwiU2lnbmVyIiwic2NvcGVzIiwiV2l0bmVzc1Njb3BlIiwiQ2FsbGVkQnlFbnRyeSIsInR4aWQiLCJpbnZva2UiLCJzdWNjZXNzIiwiY29uc29sZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/relay/route.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frelay%2Froute&page=%2Fapi%2Frelay%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frelay%2Froute.ts&appDir=%2Fhome%2Fneo%2Fgit%2Fznep17%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fneo%2Fgit%2Fznep17%2Fweb&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frelay%2Froute&page=%2Fapi%2Frelay%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frelay%2Froute.ts&appDir=%2Fhome%2Fneo%2Fgit%2Fznep17%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fneo%2Fgit%2Fznep17%2Fweb&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_server_app_render_manifests_singleton__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/app-render/manifests-singleton */ \"(rsc)/./node_modules/next/dist/server/app-render/manifests-singleton.js\");\n/* harmony import */ var next_dist_server_app_render_manifests_singleton__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_manifests_singleton__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _home_neo_git_znep17_web_app_api_relay_route_ts__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./app/api/relay/route.ts */ \"(rsc)/./app/api/relay/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/relay/route\",\n        pathname: \"/api/relay\",\n        filename: \"route\",\n        bundlePath: \"app/api/relay/route\"\n    },\n    distDir: \".next/dev\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"/home/neo/git/znep17/web/app/api/relay/route.ts\",\n    nextConfigOutput,\n    userland: _home_neo_git_znep17_web_app_api_relay_route_ts__WEBPACK_IMPORTED_MODULE_17__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.addRequestMeta)(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/relay/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, parsedUrl, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname, clientReferenceManifest, serverActionsManifest } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_6__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    const render404 = async ()=>{\n        // TODO: should route-module itself handle rendering the 404\n        if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n            await routerServerContext.render404(req, res, parsedUrl, false);\n        } else {\n            res.end('This page could not be found');\n        }\n        return null;\n    };\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                if (nextConfig.experimental.adapterPath) {\n                    return await render404();\n                }\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isStaticGeneration = isIsr && !supportsDynamicResponse;\n    // Before rendering (which initializes component tree modules), we have to\n    // set the reference manifests to our global store so Server Action's\n    // encryption util can access to them at the top level of the page module.\n    if (serverActionsManifest && clientReferenceManifest) {\n        (0,next_dist_server_app_render_manifests_singleton__WEBPACK_IMPORTED_MODULE_5__.setManifestsSingleton)({\n            page: srcPage,\n            clientReferenceManifest,\n            serverActionsManifest\n        });\n    }\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            cacheComponents: Boolean(nextConfig.cacheComponents),\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: nextConfig.cacheLife,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext, silenceLog)=>routeModule.onRequestError(req, error, errorContext, silenceLog, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        };\n        const isMinimalMode = Boolean( false || (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode'));\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!isMinimalMode && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_11__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        const silenceLog = false;\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_10__.getRevalidateReason)({\n                                isStaticGeneration,\n                                isOnDemandRevalidate\n                            })\n                        }, silenceLog, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil,\n                isMinimalMode\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!isMinimalMode) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!(isMinimalMode && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_13__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_11__.sendResponse)(nodeNextReq, nodeNextRes, // @ts-expect-error - Argument of type 'Buffer<ArrayBufferLike>' is not assignable to parameter of type 'BodyInit | null | undefined'.\n            new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15__.NoFallbackError)) {\n            const silenceLog = false;\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_10__.getRevalidateReason)({\n                    isStaticGeneration,\n                    isOnDemandRevalidate\n                })\n            }, silenceLog, routerServerContext);\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_11__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZyZWxheSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcmVsYXklMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZyZWxheSUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGbmVvJTJGZ2l0JTJGem5lcDE3JTJGd2ViJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGbmVvJTJGZ2l0JTJGem5lcDE3JTJGd2ViJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPSZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QmaXNHbG9iYWxOb3RGb3VuZEVuYWJsZWQ9ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ0U7QUFDUDtBQUNnQjtBQUNUO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUNVO0FBQzVFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWEsV0FBb0MsSUFBSSxDQUFFO0FBQ3ZELHdCQUF3QixNQUF1QztBQUMvRDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFD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MkI7QUFDdkQ7QUFDQSwrQkFBK0IsNEVBQXNCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDBGQUFxQjtBQUNsRTtBQUNBLGtCQUFrQiw2RUFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOLDZCQUE2Qiw2RkFBZTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDRGQUFtQjtBQUNyRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2RUFBWTtBQUMxQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgeyBhZGRSZXF1ZXN0TWV0YSwgZ2V0UmVxdWVzdE1ldGEgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXF1ZXN0LW1ldGFcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBzZXRNYW5pZmVzdHNTaW5nbGV0b24gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL21hbmlmZXN0cy1zaW5nbGV0b25cIjtcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xuaW1wb3J0IHsgTm9kZU5leHRSZXF1ZXN0LCBOb2RlTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYmFzZS1odHRwL25vZGVcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0QWRhcHRlciwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9uZXh0LXJlcXVlc3RcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0UmV2YWxpZGF0ZVJlYXNvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2luc3RydW1lbnRhdGlvbi91dGlsc1wiO1xuaW1wb3J0IHsgc2VuZFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1yZXNwb25zZVwiO1xuaW1wb3J0IHsgZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzLCB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRDYWNoZUNvbnRyb2xIZWFkZXIgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvY2FjaGUtY29udHJvbFwiO1xuaW1wb3J0IHsgSU5GSU5JVEVfQ0FDSEUsIE5FWFRfQ0FDSEVfVEFHU19IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvaG9tZS9uZW8vZ2l0L3puZXAxNy93ZWIvYXBwL2FwaS9yZWxheS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcmVsYXkvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9yZWxheVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcmVsYXkvcm91dGVcIlxuICAgIH0sXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHJlbGF0aXZlUHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnLFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL2hvbWUvbmVvL2dpdC96bmVwMTcvd2ViL2FwcC9hcGkvcmVsYXkvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgaWYgKHJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgIGFkZFJlcXVlc3RNZXRhKHJlcSwgJ2RldlJlcXVlc3RUaW1pbmdJbnRlcm5hbHNFbmQnLCBwcm9jZXNzLmhydGltZS5iaWdpbnQoKSk7XG4gICAgfVxuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL3JlbGF5L3JvdXRlXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHBhcmFtcywgbmV4dENvbmZpZywgcGFyc2VkVXJsLCBpc0RyYWZ0TW9kZSwgcHJlcmVuZGVyTWFuaWZlc3QsIHJvdXRlclNlcnZlckNvbnRleHQsIGlzT25EZW1hbmRSZXZhbGlkYXRlLCByZXZhbGlkYXRlT25seUdlbmVyYXRlZCwgcmVzb2x2ZWRQYXRobmFtZSwgY2xpZW50UmVmZXJlbmNlTWFuaWZlc3QsIHNlcnZlckFjdGlvbnNNYW5pZmVzdCB9ID0gcHJlcGFyZVJlc3VsdDtcbiAgICBjb25zdCBub3JtYWxpemVkU3JjUGFnZSA9IG5vcm1hbGl6ZUFwcFBhdGgoc3JjUGFnZSk7XG4gICAgbGV0IGlzSXNyID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXSB8fCBwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgIGNvbnN0IHJlbmRlcjQwNCA9IGFzeW5jICgpPT57XG4gICAgICAgIC8vIFRPRE86IHNob3VsZCByb3V0ZS1tb2R1bGUgaXRzZWxmIGhhbmRsZSByZW5kZXJpbmcgdGhlIDQwNFxuICAgICAgICBpZiAocm91dGVyU2VydmVyQ29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogcm91dGVyU2VydmVyQ29udGV4dC5yZW5kZXI0MDQpIHtcbiAgICAgICAgICAgIGF3YWl0IHJvdXRlclNlcnZlckNvbnRleHQucmVuZGVyNDA0KHJlcSwgcmVzLCBwYXJzZWRVcmwsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5lbmQoJ1RoaXMgcGFnZSBjb3VsZCBub3QgYmUgZm91bmQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIGlmIChpc0lzciAmJiAhaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgY29uc3QgaXNQcmVyZW5kZXJlZCA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICAgICAgY29uc3QgcHJlcmVuZGVySW5mbyA9IHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdO1xuICAgICAgICBpZiAocHJlcmVuZGVySW5mbykge1xuICAgICAgICAgICAgaWYgKHByZXJlbmRlckluZm8uZmFsbGJhY2sgPT09IGZhbHNlICYmICFpc1ByZXJlbmRlcmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmFkYXB0ZXJQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCByZW5kZXI0MDQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vRmFsbGJhY2tFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBjYWNoZUtleSA9IG51bGw7XG4gICAgaWYgKGlzSXNyICYmICFyb3V0ZU1vZHVsZS5pc0RldiAmJiAhaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgY2FjaGVLZXkgPSByZXNvbHZlZFBhdGhuYW1lO1xuICAgICAgICAvLyBlbnN1cmUgL2luZGV4IGFuZCAvIGlzIG5vcm1hbGl6ZWQgdG8gb25lIGtleVxuICAgICAgICBjYWNoZUtleSA9IGNhY2hlS2V5ID09PSAnL2luZGV4JyA/ICcvJyA6IGNhY2hlS2V5O1xuICAgIH1cbiAgICBjb25zdCBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSA9IC8vIElmIHdlJ3JlIGluIGRldmVsb3BtZW50LCB3ZSBhbHdheXMgc3VwcG9ydCBkeW5hbWljIEhUTUxcbiAgICByb3V0ZU1vZHVsZS5pc0RldiA9PT0gdHJ1ZSB8fCAvLyBJZiB0aGlzIGlzIG5vdCBTU0cgb3IgZG9lcyBub3QgaGF2ZSBzdGF0aWMgcGF0aHMsIHRoZW4gaXQgc3VwcG9ydHNcbiAgICAvLyBkeW5hbWljIEhUTUwuXG4gICAgIWlzSXNyO1xuICAgIC8vIFRoaXMgaXMgYSByZXZhbGlkYXRpb24gcmVxdWVzdCBpZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWNcbiAgICAvLyBwYWdlIGFuZCBpdCBpcyBub3QgYmVpbmcgcmVzdW1lZCBmcm9tIGEgcG9zdHBvbmVkIHJlbmRlciBhbmRcbiAgICAvLyBpdCBpcyBub3QgYSBkeW5hbWljIFJTQyByZXF1ZXN0IHRoZW4gaXQgaXMgYSByZXZhbGlkYXRpb25cbiAgICAvLyByZXF1ZXN0LlxuICAgIGNvbnN0IGlzU3RhdGljR2VuZXJhdGlvbiA9IGlzSXNyICYmICFzdXBwb3J0c0R5bmFtaWNSZXNwb25zZTtcbiAgICAvLyBCZWZvcmUgcmVuZGVyaW5nICh3aGljaCBpbml0aWFsaXplcyBjb21wb25lbnQgdHJlZSBtb2R1bGVzKSwgd2UgaGF2ZSB0b1xuICAgIC8vIHNldCB0aGUgcmVmZXJlbmNlIG1hbmlmZXN0cyB0byBvdXIgZ2xvYmFsIHN0b3JlIHNvIFNlcnZlciBBY3Rpb24nc1xuICAgIC8vIGVuY3J5cHRpb24gdXRpbCBjYW4gYWNjZXNzIHRvIHRoZW0gYXQgdGhlIHRvcCBsZXZlbCBvZiB0aGUgcGFnZSBtb2R1bGUuXG4gICAgaWYgKHNlcnZlckFjdGlvbnNNYW5pZmVzdCAmJiBjbGllbnRSZWZlcmVuY2VNYW5pZmVzdCkge1xuICAgICAgICBzZXRNYW5pZmVzdHNTaW5nbGV0b24oe1xuICAgICAgICAgICAgcGFnZTogc3JjUGFnZSxcbiAgICAgICAgICAgIGNsaWVudFJlZmVyZW5jZU1hbmlmZXN0LFxuICAgICAgICAgICAgc2VydmVyQWN0aW9uc01hbmlmZXN0XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBtZXRob2QgPSByZXEubWV0aG9kIHx8ICdHRVQnO1xuICAgIGNvbnN0IHRyYWNlciA9IGdldFRyYWNlcigpO1xuICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSB0cmFjZXIuZ2V0QWN0aXZlU2NvcGVTcGFuKCk7XG4gICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgcmVuZGVyT3B0czoge1xuICAgICAgICAgICAgZXhwZXJpbWVudGFsOiB7XG4gICAgICAgICAgICAgICAgYXV0aEludGVycnVwdHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuYXV0aEludGVycnVwdHMpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FjaGVDb21wb25lbnRzOiBCb29sZWFuKG5leHRDb25maWcuY2FjaGVDb21wb25lbnRzKSxcbiAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlLFxuICAgICAgICAgICAgaW5jcmVtZW50YWxDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5jcmVtZW50YWxDYWNoZScpLFxuICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IG5leHRDb25maWcuY2FjaGVMaWZlLFxuICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgb25DbG9zZTogKGNiKT0+e1xuICAgICAgICAgICAgICAgIHJlcy5vbignY2xvc2UnLCBjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BZnRlclRhc2tFcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgb25JbnN0cnVtZW50YXRpb25SZXF1ZXN0RXJyb3I6IChlcnJvciwgX3JlcXVlc3QsIGVycm9yQ29udGV4dCwgc2lsZW5jZUxvZyk9PnJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyb3IsIGVycm9yQ29udGV4dCwgc2lsZW5jZUxvZywgcm91dGVyU2VydmVyQ29udGV4dClcbiAgICAgICAgfSxcbiAgICAgICAgc2hhcmVkQ29udGV4dDoge1xuICAgICAgICAgICAgYnVpbGRJZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBub2RlTmV4dFJlcSA9IG5ldyBOb2RlTmV4dFJlcXVlc3QocmVxKTtcbiAgICBjb25zdCBub2RlTmV4dFJlcyA9IG5ldyBOb2RlTmV4dFJlc3BvbnNlKHJlcyk7XG4gICAgY29uc3QgbmV4dFJlcSA9IE5leHRSZXF1ZXN0QWRhcHRlci5mcm9tTm9kZU5leHRSZXF1ZXN0KG5vZGVOZXh0UmVxLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlKHJlcykpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT57XG4gICAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUuaGFuZGxlKG5leHRSZXEsIGNvbnRleHQpLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7c3JjUGFnZX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaXNNaW5pbWFsTW9kZSA9IEJvb2xlYW4ocHJvY2Vzcy5lbnYuTUlOSU1BTF9NT0RFIHx8IGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykpO1xuICAgICAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IGFzeW5jIChjdXJyZW50U3Bhbik9PntcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgcHJldmlvdXNDYWNoZUVudHJ5IH0pPT57XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc01pbmltYWxNb2RlICYmIGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24tZGVtYW5kIHJldmFsaWRhdGUgYWx3YXlzIHNldHMgdGhpcyBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgJ1JFVkFMSURBVEVEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGN1cnJlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmZldGNoTWV0cmljcyA9IGNvbnRleHQucmVuZGVyT3B0cy5mZXRjaE1ldHJpY3M7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nV2FpdFVudGlsID0gY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWw7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdXNpbmcgcHJvdmlkZWQgd2FpdFVudGlsIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIG5vdCB3ZSBmYWxsYmFjayB0byBzZW5kUmVzcG9uc2UncyBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1dhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC53YWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgud2FpdFVudGlsKHBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXYWl0VW50aWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVUYWdzID0gY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFRhZ3M7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpYyByZXNwb25zZSwgd2UgY2FuIGNhY2hlIGl0IHNvIGxvbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgaXQncyBub3QgZWRnZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSXNyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgaGVhZGVycyBmcm9tIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl0gPSBjYWNoZVRhZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddICYmIGJsb2IudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gYmxvYi50eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2YWxpZGF0ZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPj0gSU5GSU5JVEVfQ0FDSEUgPyBmYWxzZSA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPj0gSU5GSU5JVEVfQ0FDSEUgPyB1bmRlZmluZWQgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBlbnRyeSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogQnVmZmVyLmZyb20oYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcmVzcG9uc2Ugd2l0aG91dCBjYWNoaW5nIGlmIG5vdCBJU1JcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIHJlc3BvbnNlLCBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgYmFja2dyb3VuZCByZXZhbGlkYXRlIHdlIG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0IGVycm9yIGhlcmUgYXMgaXQgd29uJ3QgYmUgYnViYmxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lsZW5jZUxvZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVQYXRoOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTdGF0aWNHZW5lcmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBzaWxlbmNlTG9nLCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlT25seUdlbmVyYXRlZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcixcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICAgICAgaXNNaW5pbWFsTW9kZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBjcmVhdGUgYSBjYWNoZUVudHJ5IGZvciBJU1JcbiAgICAgICAgICAgIGlmICghaXNJc3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoY2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogKF9jYWNoZUVudHJ5X3ZhbHVlID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlLmtpbmQpICE9PSBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9jYWNoZUVudHJ5X3ZhbHVlMTtcbiAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBJbnZhcmlhbnQ6IGFwcC1yb3V0ZSByZWNlaXZlZCBpbnZhbGlkIGNhY2hlIGVudHJ5ICR7Y2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogKF9jYWNoZUVudHJ5X3ZhbHVlMSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZTEua2luZH1gKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkU3MDFcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc01pbmltYWxNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcigneC1uZXh0anMtY2FjaGUnLCBpc09uRGVtYW5kUmV2YWxpZGF0ZSA/ICdSRVZBTElEQVRFRCcgOiBjYWNoZUVudHJ5LmlzTWlzcyA/ICdNSVNTJyA6IGNhY2hlRW50cnkuaXNTdGFsZSA/ICdTVEFMRScgOiAnSElUJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEcmFmdCBtb2RlIHNob3VsZCBuZXZlciBiZSBjYWNoZWRcbiAgICAgICAgICAgIGlmIChpc0RyYWZ0TW9kZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAncHJpdmF0ZSwgbm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG11c3QtcmV2YWxpZGF0ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IGZyb21Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhjYWNoZUVudHJ5LnZhbHVlLmhlYWRlcnMpO1xuICAgICAgICAgICAgaWYgKCEoaXNNaW5pbWFsTW9kZSAmJiBpc0lzcikpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLmRlbGV0ZShORVhUX0NBQ0hFX1RBR1NfSEVBREVSKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIGNhY2hlIGNvbnRyb2wgaXMgYWxyZWFkeSBzZXQgb24gdGhlIHJlc3BvbnNlIHdlIGRvbid0XG4gICAgICAgICAgICAvLyBvdmVycmlkZSBpdCB0byBhbGxvdyB1c2VycyB0byBjdXN0b21pemUgaXQgdmlhIG5leHQuY29uZmlnXG4gICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wgJiYgIXJlcy5nZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnKSAmJiAhaGVhZGVycy5nZXQoJ0NhY2hlLUNvbnRyb2wnKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuc2V0KCdDYWNoZS1Db250cm9sJywgZ2V0Q2FjaGVDb250cm9sSGVhZGVyKGNhY2hlRW50cnkuY2FjaGVDb250cm9sKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCAvLyBAdHMtZXhwZWN0LWVycm9yIC0gQXJndW1lbnQgb2YgdHlwZSAnQnVmZmVyPEFycmF5QnVmZmVyTGlrZT4nIGlzIG5vdCBhc3NpZ25hYmxlIHRvIHBhcmFtZXRlciBvZiB0eXBlICdCb2R5SW5pdCB8IG51bGwgfCB1bmRlZmluZWQnLlxuICAgICAgICAgICAgbmV3IFJlc3BvbnNlKGNhY2hlRW50cnkudmFsdWUuYm9keSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBjYWNoZUVudHJ5LnZhbHVlLnN0YXR1cyB8fCAyMDBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVzcG9uc2UoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtzcmNQYWdlfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBjb25zdCBzaWxlbmNlTG9nID0gZmFsc2U7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNTdGF0aWNHZW5lcmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LCBzaWxlbmNlTG9nLCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24sIHRocm93IHRoZSBlcnJvciBhZ2Fpbi5cbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgc2VuZCBhIDUwMCByZXNwb25zZS5cbiAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frelay%2Froute&page=%2Fapi%2Frelay%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frelay%2Froute.ts&appDir=%2Fhome%2Fneo%2Fgit%2Fznep17%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fneo%2Fgit%2Fznep17%2Fweb&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./public/zk/verification_key.json":
/*!*****************************************!*\
  !*** ./public/zk/verification_key.json ***!
  \*****************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"protocol":"groth16","curve":"bn128","nPublic":6,"vk_alpha_1":["4624961093636306504680972493764550390541021342624904490748709423082607890620","19689165551869638780002528291026890822664360458884076950491830744005371759650","1"],"vk_beta_2":[["21609989949867230171911725124598407030821094941036458960883193992589071132884","15605716225159262495945835656523826136352316112088273417011925108298438037782"],["4537073237942915451357694676460498099152163026189482165058646260541668248889","6600487345173276929479593294414220273585478125233223511243662697847393554697"],["1","0"]],"vk_gamma_2":[["10857046999023057135944570762232829481370756359578518086990519993285655852781","11559732032986387107991004021392285783925812861821192530917403151452391805634"],["8495653923123431417604973247489272438418190587263600148770280649306958101930","4082367875863433681332203403145435568316851327593401208105741076214120093531"],["1","0"]],"vk_delta_2":[["16664908985230843236545861544681630235838235332891351277564844731716326588004","7923981223402202223886001267983862473766339882278250968989369536224080330841"],["18092832304957120222601073148287027173010349984383443213507240580617425573711","3710009965640298879482886223582919469561697670232123756275574265407716508355"],["1","0"]],"vk_alphabeta_12":[[["8804654987763585545512548281368596706870210953824743459529618851862928057181","20446560724808001908344485286617608528247459451031079142415740564976765317907"],["8482174655422285679379703302776836690978816087095187839726122632775024293175","15666275165951418705870345631528613275735478310757236891124195600790812379212"],["12101248115059193884616120490196506303409137713385332629576076892101883791226","21012037069968736525126784576560099061898959195964949958083221004298655821803"]],[["16080947583891790488697053498622737730710818639565124371985581995839160874185","17302610442823505709568359042799055800488160300584356047956394952284936828144"],["6690891264706579079260193327109652043838168324784262868790444640511231949767","6074600437274346653331880580068164640664647480273090855558985072331166000889"],["21563972127097243292065997834350428275663315456324414045275579753906223784780","2022565330272982696515886397390811930103923076622512715968576609812146137688"]]],"IC":[["7648111517634949645906492361603081663306588678034483902528632347766911427591","14156812705776307326516657697721223062843318703321447183938416464127018547604","1"],["15078656785090841764606513498444818046665000735355850570398754678383619600698","9756166707179732323638321229735344143208318285870083927482218950788656750906","1"],["13419178466320379098829238729308744903568548358263389029860171046221468782519","9024348660650528715172141196660703152438263528624842259921750631001388346443","1"],["12792555998703246091771249879140336939782076926256631160885835945872279176757","15582957880559888303980649655660304404569224811703000557030320731231513112605","1"],["18603587155262544376951374410887965850442156336266055547777820606269103141966","13976905993889210287651154785253418343189782555341438786588306735608735336488","1"],["8015838355785435019616804700432931038697823755390571877969104122153527784333","7486938677929060067100065894193588236305311018597462041910934668678135745122","1"],["11487915606969530100018787426029823570468878042397403230147448713600703627076","14134169706595451112415587048236374529235201892513080297913302731809668125183","1"]]}');

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "?3d55":
/*!**************************!*\
  !*** encoding (ignored) ***!
  \**************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "constants":
/*!****************************!*\
  !*** external "constants" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("constants");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "readline":
/*!***************************!*\
  !*** external "readline" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("readline");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "vm":
/*!*********************!*\
  !*** external "vm" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("vm");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@cityofzion","vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frelay%2Froute&page=%2Fapi%2Frelay%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frelay%2Froute.ts&appDir=%2Fhome%2Fneo%2Fgit%2Fznep17%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fneo%2Fgit%2Fznep17%2Fweb&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();