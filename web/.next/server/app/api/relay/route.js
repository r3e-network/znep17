(()=>{var a={};a.id=597,a.ids=[597],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},371:a=>{"use strict";a.exports=require("vm")},507:(a,b,c)=>{"use strict";function d(a){return BigInt(a)}function e(a){let b=[],c=d(a);return b.push(Number(255n&c)),b.push(Number(c>>8n&255n)),b.push(Number(c>>16n&255n)),b.push(Number(c>>24n&255n)),b}function f(a){let b=function(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b.push(d):d<2048?b.push(192|d>>6,128|63&d):d<55296||d>=57344?b.push(224|d>>12,128|d>>6&63,128|63&d):(c++,d=65536+((1023&d)<<10|1023&a.charCodeAt(c)),b.push(240|d>>18,128|d>>12&63,128|d>>6&63,128|63&d))}return b}(a);return[...j(b.length),...b]}function g(a){let b=[],c=d(a);if(c<0n)throw Error("Number cannot be negative");for(;0n!==c;)b.push(Number(127n&c)),c>>=7n;0==b.length&&b.push(0);for(let a=0;a<b.length-1;a++)b[a]=128|b[a];return b}function h(a){var b;let c,e,f=(b=a)<0n?b.toString(2).length-1:b.toString(2).length;a<0?(e=!0,c=(1n<<BigInt(f))+a):(e=!1,c=d(a));let h=7-f%7,i=g(c+((1n<<BigInt(h))-1n<<BigInt(f)));return e||(i[i.length-1]=i[i.length-1]&((1<<7-h)-1|128)),i}function i(a){let b=d(a);if(b>4294967295n)throw Error("Number too big");if(b>2147483647n&&(b-=4294967296n),b<-2147483648n)throw Error("Number too small");return h(b)}function j(a){let b=d(a);if(b>4294967295n)throw Error("Number too big");return g(b)}function k(a){return Array.from(a,function(a){return("0"+(255&a).toString(16)).slice(-2)}).join("")}c.d(b,{_o:()=>o});class l{constructor(a){this.func=a,this.functionName=a.functionName,this.module=a.module}setLocal(a,b){let c=this.func.localIdxByName[a];if(void 0===c)throw Error(`Local Variable not defined: Function: ${this.functionName} local: ${a} `);return[...b,33,...j(c)]}teeLocal(a,b){let c=this.func.localIdxByName[a];if(void 0===c)throw Error(`Local Variable not defined: Function: ${this.functionName} local: ${a} `);return[...b,34,...j(c)]}getLocal(a){let b=this.func.localIdxByName[a];if(void 0===b)throw Error(`Local Variable not defined: Function: ${this.functionName} local: ${a} `);return[32,...j(b)]}i64_load8_s(a,b,c){return[...a,48,void 0===c?0:c,...j(b||0)]}i64_load8_u(a,b,c){return[...a,49,void 0===c?0:c,...j(b||0)]}i64_load16_s(a,b,c){return[...a,50,void 0===c?1:c,...j(b||0)]}i64_load16_u(a,b,c){return[...a,51,void 0===c?1:c,...j(b||0)]}i64_load32_s(a,b,c){return[...a,52,void 0===c?2:c,...j(b||0)]}i64_load32_u(a,b,c){return[...a,53,void 0===c?2:c,...j(b||0)]}i64_load(a,b,c){return[...a,41,void 0===c?3:c,...j(b||0)]}i64_store(a,b,c,d){let e,f,g;return Array.isArray(b)?(e=0,f=3,g=b):Array.isArray(c)?(e=b,f=3,g=c):Array.isArray(d)&&(e=b,f=c,g=d),[...a,...g,55,f,...j(e)]}i64_store32(a,b,c,d){let e,f,g;return Array.isArray(b)?(e=0,f=2,g=b):Array.isArray(c)?(e=b,f=2,g=c):Array.isArray(d)&&(e=b,f=c,g=d),[...a,...g,62,f,...j(e)]}i64_store16(a,b,c,d){let e,f,g;return Array.isArray(b)?(e=0,f=1,g=b):Array.isArray(c)?(e=b,f=1,g=c):Array.isArray(d)&&(e=b,f=c,g=d),[...a,...g,61,f,...j(e)]}i64_store8(a,b,c,d){let e,f,g;return Array.isArray(b)?(e=0,f=0,g=b):Array.isArray(c)?(e=b,f=0,g=c):Array.isArray(d)&&(e=b,f=c,g=d),[...a,...g,60,f,...j(e)]}i32_load8_s(a,b,c){return[...a,44,void 0===c?0:c,...j(b||0)]}i32_load8_u(a,b,c){return[...a,45,void 0===c?0:c,...j(b||0)]}i32_load16_s(a,b,c){return[...a,46,void 0===c?1:c,...j(b||0)]}i32_load16_u(a,b,c){return[...a,47,void 0===c?1:c,...j(b||0)]}i32_load(a,b,c){return[...a,40,void 0===c?2:c,...j(b||0)]}i32_store(a,b,c,d){let e,f,g;return Array.isArray(b)?(e=0,f=2,g=b):Array.isArray(c)?(e=b,f=2,g=c):Array.isArray(d)&&(e=b,f=c,g=d),[...a,...g,54,f,...j(e)]}i32_store16(a,b,c,d){let e,f,g;return Array.isArray(b)?(e=0,f=1,g=b):Array.isArray(c)?(e=b,f=1,g=c):Array.isArray(d)&&(e=b,f=c,g=d),[...a,...g,59,f,...j(e)]}i32_store8(a,b,c,d){let e,f,g;return Array.isArray(b)?(e=0,f=0,g=b):Array.isArray(c)?(e=b,f=0,g=c):Array.isArray(d)&&(e=b,f=c,g=d),[...a,...g,58,f,...j(e)]}call(a,...b){let c=this.module.functionIdxByName[a];if(void 0===c)throw Error(`Function not defined: Function: ${a}`);return[...[].concat(...b),16,...j(c)]}call_indirect(a,...b){return[...[].concat(...b),...a,17,0,0]}if(a,b,c){return c?[...a,4,64,...b,5,...c,11]:[...a,4,64,...b,11]}block(a){return[2,64,...a,11]}loop(...a){return[3,64,...[].concat(...a),11]}br_if(a,b){return[...b,13,...j(a)]}br(a){return[12,...j(a)]}ret(a){return[...a,15]}drop(a){return[...a,26]}i64_const(a){return[66,...function(a){let b=d(a);if(b>0xffffffffffffffffn)throw Error("Number too big");if(b>0x7fffffffffffffffn&&(b-=0x10000000000000000n),b<-0x8000000000000000n)throw Error("Number too small");return h(b)}(a)]}i32_const(a){return[65,...i(a)]}i64_eqz(a){return[...a,80]}i64_eq(a,b){return[...a,...b,81]}i64_ne(a,b){return[...a,...b,82]}i64_lt_s(a,b){return[...a,...b,83]}i64_lt_u(a,b){return[...a,...b,84]}i64_gt_s(a,b){return[...a,...b,85]}i64_gt_u(a,b){return[...a,...b,86]}i64_le_s(a,b){return[...a,...b,87]}i64_le_u(a,b){return[...a,...b,88]}i64_ge_s(a,b){return[...a,...b,89]}i64_ge_u(a,b){return[...a,...b,90]}i64_add(a,b){return[...a,...b,124]}i64_sub(a,b){return[...a,...b,125]}i64_mul(a,b){return[...a,...b,126]}i64_div_s(a,b){return[...a,...b,127]}i64_div_u(a,b){return[...a,...b,128]}i64_rem_s(a,b){return[...a,...b,129]}i64_rem_u(a,b){return[...a,...b,130]}i64_and(a,b){return[...a,...b,131]}i64_or(a,b){return[...a,...b,132]}i64_xor(a,b){return[...a,...b,133]}i64_shl(a,b){return[...a,...b,134]}i64_shr_s(a,b){return[...a,...b,135]}i64_shr_u(a,b){return[...a,...b,136]}i64_extend_i32_s(a){return[...a,172]}i64_extend_i32_u(a){return[...a,173]}i64_clz(a){return[...a,121]}i64_ctz(a){return[...a,122]}i32_eqz(a){return[...a,69]}i32_eq(a,b){return[...a,...b,70]}i32_ne(a,b){return[...a,...b,71]}i32_lt_s(a,b){return[...a,...b,72]}i32_lt_u(a,b){return[...a,...b,73]}i32_gt_s(a,b){return[...a,...b,74]}i32_gt_u(a,b){return[...a,...b,75]}i32_le_s(a,b){return[...a,...b,76]}i32_le_u(a,b){return[...a,...b,77]}i32_ge_s(a,b){return[...a,...b,78]}i32_ge_u(a,b){return[...a,...b,79]}i32_add(a,b){return[...a,...b,106]}i32_sub(a,b){return[...a,...b,107]}i32_mul(a,b){return[...a,...b,108]}i32_div_s(a,b){return[...a,...b,109]}i32_div_u(a,b){return[...a,...b,110]}i32_rem_s(a,b){return[...a,...b,111]}i32_rem_u(a,b){return[...a,...b,112]}i32_and(a,b){return[...a,...b,113]}i32_or(a,b){return[...a,...b,114]}i32_xor(a,b){return[...a,...b,115]}i32_shl(a,b){return[...a,...b,116]}i32_shr_s(a,b){return[...a,...b,117]}i32_shr_u(a,b){return[...a,...b,118]}i32_rotl(a,b){return[...a,...b,119]}i32_rotr(a,b){return[...a,...b,120]}i32_wrap_i64(a){return[...a,167]}i32_clz(a){return[...a,103]}i32_ctz(a){return[...a,104]}unreachable(){return[0]}current_memory(){return[63,0]}comment(){return[]}}let m={i32:127,i64:126,f32:125,f64:124,anyfunc:112,func:96,emptyblock:64};class n{constructor(a,b,c,d,e){if("import"==c)this.fnType="import",this.moduleName=d,this.fieldName=e;else if("internal"==c)this.fnType="internal";else throw Error("Invalid function fnType: "+c);this.module=a,this.fnName=b,this.params=[],this.locals=[],this.localIdxByName={},this.code=[],this.returnType=null,this.nextLocal=0}addParam(a,b){if(this.localIdxByName[a])throw Error(`param already exists. Function: ${this.fnName}, Param: ${a} `);let c=this.nextLocal++;this.localIdxByName[a]=c,this.params.push({type:b})}addLocal(a,b,c){if(this.localIdxByName[a])throw Error(`local already exists. Function: ${this.fnName}, Param: ${a} `);let d=this.nextLocal++;this.localIdxByName[a]=d,this.locals.push({type:b,length:c||1})}setReturnType(a){if(this.returnType)throw Error(`returnType already defined. Function: ${this.fnName}`);this.returnType=a}getSignature(){return[96,...j(this.params.length),...this.params.map(a=>m[a.type]),...this.returnType?[1,m[this.returnType]]:[0]]}getBody(){let a=this.locals.map(a=>[...j(a.length),m[a.type]]),b=[...j(this.locals.length),...[].concat(...a),...this.code,11];return[...j(b.length),...b]}addCode(...a){this.code.push(...[].concat(...a))}getCodeBuilder(){return new l(this)}}class o{constructor(){this.functions=[],this.functionIdxByName={},this.nImportFunctions=0,this.nInternalFunctions=0,this.memory={pagesSize:1,moduleName:"env",fieldName:"memory"},this.free=8,this.datas=[],this.modules={},this.exports=[],this.functionsTable=[]}build(){return this._setSignatures(),new Uint8Array([...e(0x6d736100),...e(1),...this._buildType(),...this._buildImport(),...this._buildFunctionDeclarations(),...this._buildFunctionsTable(),...this._buildExports(),...this._buildElements(),...this._buildCode(),...this._buildData()])}addFunction(a){if(void 0!==this.functionIdxByName[a])throw Error(`Function already defined: ${a}`);let b=this.functions.length;return this.functionIdxByName[a]=b,this.functions.push(new n(this,a,"internal")),this.nInternalFunctions++,this.functions[b]}addIimportFunction(a,b,c){if(void 0!==this.functionIdxByName[a])throw Error(`Function already defined: ${a}`);if(this.functions.length>0&&"internal"==this.functions[this.functions.length-1].type)throw Error(`Import functions must be declared before internal: ${a}`);let d=c||a,e=this.functions.length;return this.functionIdxByName[a]=e,this.functions.push(new n(this,a,"import",b,d)),this.nImportFunctions++,this.functions[e]}setMemory(a,b,c){this.memory={pagesSize:a,moduleName:b||"env",fieldName:c||"memory"}}exportFunction(a,b){let c=b||a;if(void 0===this.functionIdxByName[a])throw Error(`Function not defined: ${a}`);let d=this.functionIdxByName[a];c!=a&&(this.functionIdxByName[c]=d),this.exports.push({exportName:c,idx:d})}addFunctionToTable(a){let b=this.functionIdxByName[a];this.functionsTable.push(b)}addData(a,b){this.datas.push({offset:a,bytes:b})}alloc(a,b){let c,d;(Array.isArray(a)||ArrayBuffer.isView(a))&&void 0===b?(c=a.length,d=a):(c=a,d=b),c=(c-1>>3)+1<<3;let e=this.free;return this.free+=c,d&&this.addData(e,d),e}allocString(a){let b=new globalThis.TextEncoder().encode(a);return this.alloc([...b,0])}_setSignatures(){this.signatures=[];let a={};if(this.functionsTable.length>0){let b=this.functions[this.functionsTable[0]].getSignature();a["s_"+k(b)]=0,this.signatures.push(b)}for(let b=0;b<this.functions.length;b++){let c=this.functions[b].getSignature(),d="s_"+k(c);void 0===a[d]&&(a[d]=this.signatures.length,this.signatures.push(c)),this.functions[b].signatureIdx=a[d]}}_buildSection(a,b){return[a,...j(b.length),...b]}_buildType(){return this._buildSection(1,[...j(this.signatures.length),...[].concat(...this.signatures)])}_buildImport(){let a=[];a.push([...f(this.memory.moduleName),...f(this.memory.fieldName),2,0,...j(this.memory.pagesSize)]);for(let b=0;b<this.nImportFunctions;b++)a.push([...f(this.functions[b].moduleName),...f(this.functions[b].fieldName),0,...j(this.functions[b].signatureIdx)]);return this._buildSection(2,j(a.length).concat(...a))}_buildFunctionDeclarations(){let a=[];for(let b=this.nImportFunctions;b<this.nImportFunctions+this.nInternalFunctions;b++)a.push(...j(this.functions[b].signatureIdx));return this._buildSection(3,[...j(a.length),...a])}_buildFunctionsTable(){return 0==this.functionsTable.length?[]:this._buildSection(4,[...j(1),112,0,...j(this.functionsTable.length)])}_buildElements(){if(0==this.functionsTable.length)return[];let a=[];for(let b=0;b<this.functionsTable.length;b++)a.push(...j(this.functionsTable[b]));return this._buildSection(9,[...j(1),...j(0),65,...i(0),11,...j(this.functionsTable.length),...a])}_buildExports(){let a=[];for(let b=0;b<this.exports.length;b++)a.push([...f(this.exports[b].exportName),0,...j(this.exports[b].idx)]);return this._buildSection(7,j(a.length).concat(...a))}_buildCode(){let a=[];for(let b=this.nImportFunctions;b<this.nImportFunctions+this.nInternalFunctions;b++)a.push(this.functions[b].getBody());return this._buildSection(10,j(a.length).concat(...a))}_buildData(){let a=[];a.push([0,65,0,11,4,...e(this.free)]);for(let b=0;b<this.datas.length;b++)a.push([0,65,...i(this.datas[b].offset),11,...j(this.datas[b].bytes.length),...this.datas[b].bytes]);return this._buildSection(11,j(a.length).concat(...a))}}},760:(a,b,c)=>{let d=c(9141),e=c(4246),f=c(4830),g=c(8286),h=c(4607),i=c(4795),{bitLength:j,modInv:k,modPow:l,isPrime:m,isOdd:n,square:o}=c(5856);a.exports=function(a,b,c,p){let q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X=BigInt(b),Y=Math.floor((j(X-1n)-1)/64)+1,Z=2*Y,$=8*Y,_=c||"f1m";if(a.modules[_])return _;let aa=d(a,Y,p),ab=a.alloc($,e.bigInt2BytesLE(X,$)),ac=a.alloc(e.bigInt2BytesLE(o(1n<<BigInt(64*Y))%X,$)),ad=a.alloc(e.bigInt2BytesLE((1n<<BigInt(64*Y))%X,$)),ae=a.alloc(e.bigInt2BytesLE(0n,$)),af=X-1n,ag=af>>1n,ah=a.alloc($,e.bigInt2BytesLE(ag,$)),ai=a.alloc($,e.bigInt2BytesLE(ag+1n,$));a.modules[_]={pq:ab,pR2:ac,n64:Y,q:X,pOne:ad,pZero:ae,pePlusOne:ai};let aj=2n;if(m(X))for(;l(aj,ag,X)!==af;)aj+=1n;let ak=0,al=af;for(;!n(al)&&0n!==al;)ak++,al>>=1n;let am=a.alloc($,e.bigInt2BytesLE(al,$)),an=l(aj,al,X),ao=a.alloc(e.bigInt2BytesLE((an<<BigInt(64*Y))%X,$)),ap=al+1n>>1n,aq=a.alloc($,e.bigInt2BytesLE(ap,$));if(a.exportFunction(aa+"_copy",_+"_copy"),a.exportFunction(aa+"_zero",_+"_zero"),a.exportFunction(aa+"_isZero",_+"_isZero"),a.exportFunction(aa+"_eq",_+"_eq"),(q=a.addFunction(_+"_isOne")).addParam("x","i32"),q.setReturnType("i32"),r=q.getCodeBuilder(),q.addCode(r.ret(r.call(aa+"_eq",r.getLocal("x"),r.i32_const(ad)))),(s=a.addFunction(_+"_add")).addParam("x","i32"),s.addParam("y","i32"),s.addParam("r","i32"),t=s.getCodeBuilder(),s.addCode(t.if(t.call(aa+"_add",t.getLocal("x"),t.getLocal("y"),t.getLocal("r")),t.drop(t.call(aa+"_sub",t.getLocal("r"),t.i32_const(ab),t.getLocal("r"))),t.if(t.call(aa+"_gte",t.getLocal("r"),t.i32_const(ab)),t.drop(t.call(aa+"_sub",t.getLocal("r"),t.i32_const(ab),t.getLocal("r")))))),(u=a.addFunction(_+"_sub")).addParam("x","i32"),u.addParam("y","i32"),u.addParam("r","i32"),v=u.getCodeBuilder(),u.addCode(v.if(v.call(aa+"_sub",v.getLocal("x"),v.getLocal("y"),v.getLocal("r")),v.drop(v.call(aa+"_add",v.getLocal("r"),v.i32_const(ab),v.getLocal("r"))))),(w=a.addFunction(_+"_neg")).addParam("x","i32"),w.addParam("r","i32"),x=w.getCodeBuilder(),w.addCode(x.call(_+"_sub",x.i32_const(ae),x.getLocal("x"),x.getLocal("r"))),function(){let b=a.alloc(Z*Z*8),c=a.addFunction(_+"_mReduct");c.addParam("t","i32"),c.addParam("r","i32"),c.addLocal("np32","i64"),c.addLocal("c","i64"),c.addLocal("m","i64");let d=c.getCodeBuilder(),e=Number(4294967296n-k(X,4294967296n));c.addCode(d.setLocal("np32",d.i64_const(e)));for(let a=0;a<Z;a++){c.addCode(d.setLocal("c",d.i64_const(0))),c.addCode(d.setLocal("m",d.i64_and(d.i64_mul(d.i64_load32_u(d.getLocal("t"),4*a),d.getLocal("np32")),d.i64_const("0xFFFFFFFF"))));for(let b=0;b<Z;b++)c.addCode(d.setLocal("c",d.i64_add(d.i64_add(d.i64_load32_u(d.getLocal("t"),(a+b)*4),d.i64_shr_u(d.getLocal("c"),d.i64_const(32))),d.i64_mul(d.i64_load32_u(d.i32_const(ab),4*b),d.getLocal("m"))))),c.addCode(d.i64_store32(d.getLocal("t"),(a+b)*4,d.getLocal("c")));c.addCode(d.i64_store32(d.i32_const(b),4*a,d.i64_shr_u(d.getLocal("c"),d.i64_const(32))))}c.addCode(d.call(_+"_add",d.i32_const(b),d.i32_add(d.getLocal("t"),d.i32_const(4*Z)),d.getLocal("r")))}(),function(){let b=a.addFunction(_+"_mul");b.addParam("x","i32"),b.addParam("y","i32"),b.addParam("r","i32"),b.addLocal("c0","i64"),b.addLocal("c1","i64"),b.addLocal("np32","i64");for(let a=0;a<Z;a++)b.addLocal("x"+a,"i64"),b.addLocal("y"+a,"i64"),b.addLocal("m"+a,"i64"),b.addLocal("q"+a,"i64");let c=b.getCodeBuilder(),d=Number(4294967296n-k(X,4294967296n));b.addCode(c.setLocal("np32",c.i64_const(d)));let e=[],f=[],g=[];function h(a,b){let d,e;return g[a]?d=c.getLocal("q"+a):(d=c.teeLocal("q"+a,c.i64_load32_u(c.i32_const(0),ab+4*a)),g[a]=!0),e=c.getLocal("m"+b),c.i64_mul(d,e)}let i="c0",j="c1";for(let a=0;a<2*Z-1;a++){for(let d=Math.max(0,a-Z+1);d<=a&&d<Z;d++){let g=a-d;b.addCode(c.setLocal(i,c.i64_add(c.i64_and(c.getLocal(i),c.i64_const(0xffffffff)),function(a,b){let d,g;return e[a]?d=c.getLocal("x"+a):(d=c.teeLocal("x"+a,c.i64_load32_u(c.getLocal("x"),4*a)),e[a]=!0),f[b]?g=c.getLocal("y"+b):(g=c.teeLocal("y"+b,c.i64_load32_u(c.getLocal("y"),4*b)),f[b]=!0),c.i64_mul(d,g)}(d,g)))),b.addCode(c.setLocal(j,c.i64_add(c.getLocal(j),c.i64_shr_u(c.getLocal(i),c.i64_const(32)))))}for(let d=Math.max(1,a-Z+1);d<=a&&d<Z;d++){let e=a-d;b.addCode(c.setLocal(i,c.i64_add(c.i64_and(c.getLocal(i),c.i64_const(0xffffffff)),h(d,e)))),b.addCode(c.setLocal(j,c.i64_add(c.getLocal(j),c.i64_shr_u(c.getLocal(i),c.i64_const(32)))))}a<Z&&(b.addCode(c.setLocal("m"+a,c.i64_and(c.i64_mul(c.i64_and(c.getLocal(i),c.i64_const(0xffffffff)),c.getLocal("np32")),c.i64_const("0xFFFFFFFF")))),b.addCode(c.setLocal(i,c.i64_add(c.i64_and(c.getLocal(i),c.i64_const(0xffffffff)),h(0,a)))),b.addCode(c.setLocal(j,c.i64_add(c.getLocal(j),c.i64_shr_u(c.getLocal(i),c.i64_const(32)))))),a>=Z&&b.addCode(c.i64_store32(c.getLocal("r"),(a-Z)*4,c.getLocal(i))),[i,j]=[j,i],b.addCode(c.setLocal(j,c.i64_shr_u(c.getLocal(i),c.i64_const(32))))}b.addCode(c.i64_store32(c.getLocal("r"),4*Z-4,c.getLocal(i))),b.addCode(c.if(c.i32_wrap_i64(c.getLocal(j)),c.drop(c.call(aa+"_sub",c.getLocal("r"),c.i32_const(ab),c.getLocal("r"))),c.if(c.call(aa+"_gte",c.getLocal("r"),c.i32_const(ab)),c.drop(c.call(aa+"_sub",c.getLocal("r"),c.i32_const(ab),c.getLocal("r"))))))}(),function(){let b=a.addFunction(_+"_square");b.addParam("x","i32"),b.addParam("r","i32"),b.addLocal("c0","i64"),b.addLocal("c1","i64"),b.addLocal("c0_old","i64"),b.addLocal("c1_old","i64"),b.addLocal("np32","i64");for(let a=0;a<Z;a++)b.addLocal("x"+a,"i64"),b.addLocal("m"+a,"i64"),b.addLocal("q"+a,"i64");let c=b.getCodeBuilder(),d=Number(4294967296n-k(X,4294967296n));b.addCode(c.setLocal("np32",c.i64_const(d)));let e=[],f=[];function g(a,b){let d,f;return e[a]?d=c.getLocal("x"+a):(d=c.teeLocal("x"+a,c.i64_load32_u(c.getLocal("x"),4*a)),e[a]=!0),e[b]?f=c.getLocal("x"+b):(f=c.teeLocal("x"+b,c.i64_load32_u(c.getLocal("x"),4*b)),e[b]=!0),c.i64_mul(d,f)}function h(a,b){let d,e;return f[a]?d=c.getLocal("q"+a):(d=c.teeLocal("q"+a,c.i64_load32_u(c.i32_const(0),ab+4*a)),f[a]=!0),e=c.getLocal("m"+b),c.i64_mul(d,e)}let i="c0_old",j="c1_old";for(let a=0;a<2*Z-1;a++){b.addCode(c.setLocal("c0",c.i64_const(0)),c.setLocal("c1",c.i64_const(0)));for(let d=Math.max(0,a-Z+1);d<a+1>>1&&d<Z;d++){let e=a-d;b.addCode(c.setLocal("c0",c.i64_add(c.i64_and(c.getLocal("c0"),c.i64_const(0xffffffff)),g(d,e)))),b.addCode(c.setLocal("c1",c.i64_add(c.getLocal("c1"),c.i64_shr_u(c.getLocal("c0"),c.i64_const(32)))))}b.addCode(c.setLocal("c0",c.i64_shl(c.i64_and(c.getLocal("c0"),c.i64_const(0xffffffff)),c.i64_const(1)))),b.addCode(c.setLocal("c1",c.i64_add(c.i64_shl(c.getLocal("c1"),c.i64_const(1)),c.i64_shr_u(c.getLocal("c0"),c.i64_const(32))))),a%2==0&&(b.addCode(c.setLocal("c0",c.i64_add(c.i64_and(c.getLocal("c0"),c.i64_const(0xffffffff)),g(a>>1,a>>1)))),b.addCode(c.setLocal("c1",c.i64_add(c.getLocal("c1"),c.i64_shr_u(c.getLocal("c0"),c.i64_const(32)))))),a>0&&(b.addCode(c.setLocal("c0",c.i64_add(c.i64_and(c.getLocal("c0"),c.i64_const(0xffffffff)),c.i64_and(c.getLocal(i),c.i64_const(0xffffffff))))),b.addCode(c.setLocal("c1",c.i64_add(c.i64_add(c.getLocal("c1"),c.i64_shr_u(c.getLocal("c0"),c.i64_const(32))),c.getLocal(j)))));for(let d=Math.max(1,a-Z+1);d<=a&&d<Z;d++){let e=a-d;b.addCode(c.setLocal("c0",c.i64_add(c.i64_and(c.getLocal("c0"),c.i64_const(0xffffffff)),h(d,e)))),b.addCode(c.setLocal("c1",c.i64_add(c.getLocal("c1"),c.i64_shr_u(c.getLocal("c0"),c.i64_const(32)))))}a<Z&&(b.addCode(c.setLocal("m"+a,c.i64_and(c.i64_mul(c.i64_and(c.getLocal("c0"),c.i64_const(0xffffffff)),c.getLocal("np32")),c.i64_const("0xFFFFFFFF")))),b.addCode(c.setLocal("c0",c.i64_add(c.i64_and(c.getLocal("c0"),c.i64_const(0xffffffff)),h(0,a)))),b.addCode(c.setLocal("c1",c.i64_add(c.getLocal("c1"),c.i64_shr_u(c.getLocal("c0"),c.i64_const(32)))))),a>=Z&&b.addCode(c.i64_store32(c.getLocal("r"),(a-Z)*4,c.getLocal("c0"))),b.addCode(c.setLocal(i,c.getLocal("c1")),c.setLocal(j,c.i64_shr_u(c.getLocal(i),c.i64_const(32))))}b.addCode(c.i64_store32(c.getLocal("r"),4*Z-4,c.getLocal(i))),b.addCode(c.if(c.i32_wrap_i64(c.getLocal(j)),c.drop(c.call(aa+"_sub",c.getLocal("r"),c.i32_const(ab),c.getLocal("r"))),c.if(c.call(aa+"_gte",c.getLocal("r"),c.i32_const(ab)),c.drop(c.call(aa+"_sub",c.getLocal("r"),c.i32_const(ab),c.getLocal("r"))))))}(),(y=a.addFunction(_+"_squareOld")).addParam("x","i32"),y.addParam("r","i32"),z=y.getCodeBuilder(),y.addCode(z.call(_+"_mul",z.getLocal("x"),z.getLocal("x"),z.getLocal("r"))),(A=a.addFunction(_+"_toMontgomery")).addParam("x","i32"),A.addParam("r","i32"),B=A.getCodeBuilder(),A.addCode(B.call(_+"_mul",B.getLocal("x"),B.i32_const(ac),B.getLocal("r"))),C=a.alloc(2*$),(D=a.addFunction(_+"_fromMontgomery")).addParam("x","i32"),D.addParam("r","i32"),E=D.getCodeBuilder(),D.addCode(E.call(aa+"_copy",E.getLocal("x"),E.i32_const(C))),D.addCode(E.call(aa+"_zero",E.i32_const(C+$))),D.addCode(E.call(_+"_mReduct",E.i32_const(C),E.getLocal("r"))),(F=a.addFunction(_+"_isNegative")).addParam("x","i32"),F.setReturnType("i32"),H=(G=F.getCodeBuilder()).i32_const(a.alloc($)),F.addCode(G.call(_+"_fromMontgomery",G.getLocal("x"),H),G.call(aa+"_gte",H,G.i32_const(ai))),(I=a.addFunction(_+"_sign")).addParam("x","i32"),I.setReturnType("i32"),K=(J=I.getCodeBuilder()).i32_const(a.alloc($)),I.addCode(J.if(J.call(aa+"_isZero",J.getLocal("x")),J.ret(J.i32_const(0))),J.call(_+"_fromMontgomery",J.getLocal("x"),K),J.if(J.call(aa+"_gte",K,J.i32_const(ai)),J.ret(J.i32_const(-1))),J.ret(J.i32_const(1))),(L=a.addFunction(_+"_inverse")).addParam("x","i32"),L.addParam("r","i32"),M=L.getCodeBuilder(),L.addCode(M.call(_+"_fromMontgomery",M.getLocal("x"),M.getLocal("r"))),L.addCode(M.call(aa+"_inverseMod",M.getLocal("r"),M.i32_const(ab),M.getLocal("r"))),L.addCode(M.call(_+"_toMontgomery",M.getLocal("r"),M.getLocal("r"))),(N=a.addFunction(_+"_one")).addParam("pr","i32"),O=N.getCodeBuilder(),N.addCode(O.call(aa+"_copy",O.i32_const(ad),O.getLocal("pr"))),(P=a.addFunction(_+"_load")).addParam("scalar","i32"),P.addParam("scalarLen","i32"),P.addParam("r","i32"),P.addLocal("p","i32"),P.addLocal("l","i32"),P.addLocal("i","i32"),P.addLocal("j","i32"),R=(Q=P.getCodeBuilder()).i32_const(a.alloc($)),S=a.alloc($),T=Q.i32_const(S),P.addCode(Q.call(aa+"_zero",Q.getLocal("r")),Q.setLocal("i",Q.i32_const($)),Q.setLocal("p",Q.getLocal("scalar")),Q.block(Q.loop(Q.br_if(1,Q.i32_gt_u(Q.getLocal("i"),Q.getLocal("scalarLen"))),Q.if(Q.i32_eq(Q.getLocal("i"),Q.i32_const($)),Q.call(_+"_one",R),Q.call(_+"_mul",R,Q.i32_const(ac),R)),Q.call(_+"_mul",Q.getLocal("p"),R,T),Q.call(_+"_add",Q.getLocal("r"),T,Q.getLocal("r")),Q.setLocal("p",Q.i32_add(Q.getLocal("p"),Q.i32_const($))),Q.setLocal("i",Q.i32_add(Q.getLocal("i"),Q.i32_const($))),Q.br(0))),Q.setLocal("l",Q.i32_rem_u(Q.getLocal("scalarLen"),Q.i32_const($))),Q.if(Q.i32_eqz(Q.getLocal("l")),Q.ret([])),Q.call(aa+"_zero",T),Q.setLocal("j",Q.i32_const(0)),Q.block(Q.loop(Q.br_if(1,Q.i32_eq(Q.getLocal("j"),Q.getLocal("l"))),Q.i32_store8(Q.getLocal("j"),S,Q.i32_load8_u(Q.getLocal("p"))),Q.setLocal("p",Q.i32_add(Q.getLocal("p"),Q.i32_const(1))),Q.setLocal("j",Q.i32_add(Q.getLocal("j"),Q.i32_const(1))),Q.br(0))),Q.if(Q.i32_eq(Q.getLocal("i"),Q.i32_const($)),Q.call(_+"_one",R),Q.call(_+"_mul",R,Q.i32_const(ac),R)),Q.call(_+"_mul",T,R,T),Q.call(_+"_add",Q.getLocal("r"),T,Q.getLocal("r"))),(U=a.addFunction(_+"_timesScalar")).addParam("x","i32"),U.addParam("scalar","i32"),U.addParam("scalarLen","i32"),U.addParam("r","i32"),W=(V=U.getCodeBuilder()).i32_const(a.alloc($)),U.addCode(V.call(_+"_load",V.getLocal("scalar"),V.getLocal("scalarLen"),W),V.call(_+"_toMontgomery",W,W),V.call(_+"_mul",V.getLocal("x"),W,V.getLocal("r"))),g(a,_),h(a,_+"_batchToMontgomery",_+"_toMontgomery",$,$),h(a,_+"_batchFromMontgomery",_+"_fromMontgomery",$,$),h(a,_+"_batchNeg",_+"_neg",$,$),i(a,_+"_batchAdd",_+"_add",$,$),i(a,_+"_batchSub",_+"_sub",$,$),i(a,_+"_batchMul",_+"_mul",$,$),a.exportFunction(_+"_add"),a.exportFunction(_+"_sub"),a.exportFunction(_+"_neg"),a.exportFunction(_+"_isNegative"),a.exportFunction(_+"_isOne"),a.exportFunction(_+"_sign"),a.exportFunction(_+"_mReduct"),a.exportFunction(_+"_mul"),a.exportFunction(_+"_square"),a.exportFunction(_+"_squareOld"),a.exportFunction(_+"_fromMontgomery"),a.exportFunction(_+"_toMontgomery"),a.exportFunction(_+"_inverse"),a.exportFunction(_+"_one"),a.exportFunction(_+"_load"),a.exportFunction(_+"_timesScalar"),f(a,_+"_exp",$,_+"_mul",_+"_square",aa+"_copy",_+"_one"),a.exportFunction(_+"_exp"),a.exportFunction(_+"_batchInverse"),m(X)){let b,c,d,e,f,g,h,i,j,k,l,m;(b=a.addFunction(_+"_sqrt")).addParam("n","i32"),b.addParam("r","i32"),b.addLocal("m","i32"),b.addLocal("i","i32"),b.addLocal("j","i32"),d=(c=b.getCodeBuilder()).i32_const(ad),e=c.i32_const(a.alloc($)),f=c.i32_const(a.alloc($)),g=c.i32_const(a.alloc($)),h=c.i32_const(a.alloc($)),i=c.i32_const(a.alloc($)),b.addCode(c.if(c.call(_+"_isZero",c.getLocal("n")),c.ret(c.call(_+"_zero",c.getLocal("r")))),c.setLocal("m",c.i32_const(ak)),c.call(_+"_copy",c.i32_const(ao),e),c.call(_+"_exp",c.getLocal("n"),c.i32_const(am),c.i32_const($),f),c.call(_+"_exp",c.getLocal("n"),c.i32_const(aq),c.i32_const($),g),c.block(c.loop(c.br_if(1,c.call(_+"_eq",f,d)),c.call(_+"_square",f,h),c.setLocal("i",c.i32_const(1)),c.block(c.loop(c.br_if(1,c.call(_+"_eq",h,d)),c.call(_+"_square",h,h),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))),c.call(_+"_copy",e,i),c.setLocal("j",c.i32_sub(c.i32_sub(c.getLocal("m"),c.getLocal("i")),c.i32_const(1))),c.block(c.loop(c.br_if(1,c.i32_eqz(c.getLocal("j"))),c.call(_+"_square",i,i),c.setLocal("j",c.i32_sub(c.getLocal("j"),c.i32_const(1))),c.br(0))),c.setLocal("m",c.getLocal("i")),c.call(_+"_square",i,e),c.call(_+"_mul",f,e,f),c.call(_+"_mul",g,i,g),c.br(0))),c.if(c.call(_+"_isNegative",g),c.call(_+"_neg",g,c.getLocal("r")),c.call(_+"_copy",g,c.getLocal("r")))),(j=a.addFunction(_+"_isSquare")).addParam("n","i32"),j.setReturnType("i32"),l=(k=j.getCodeBuilder()).i32_const(ad),m=k.i32_const(a.alloc($)),j.addCode(k.if(k.call(_+"_isZero",k.getLocal("n")),k.ret(k.i32_const(1))),k.call(_+"_exp",k.getLocal("n"),k.i32_const(ah),k.i32_const($),m),k.call(_+"_eq",m,l)),a.exportFunction(_+"_sqrt"),a.exportFunction(_+"_isSquare")}return a.exportFunction(_+"_batchToMontgomery"),a.exportFunction(_+"_batchFromMontgomery"),_}},846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},905:a=>{a.exports=function(a,b,c,d,e,f,g,h){let i=a.addFunction(b);i.addParam("pIn","i32"),i.addParam("n","i32"),i.addParam("pFirst","i32"),i.addParam("pInc","i32"),i.addParam("pOut","i32"),i.addLocal("pOldFree","i32"),i.addLocal("i","i32"),i.addLocal("pFrom","i32"),i.addLocal("pTo","i32");let j=i.getCodeBuilder(),k=j.i32_const(a.alloc(g));i.addCode(j.setLocal("pFrom",j.getLocal("pIn")),j.setLocal("pTo",j.getLocal("pOut"))),i.addCode(j.call(d+"_copy",j.getLocal("pFirst"),k)),i.addCode(j.setLocal("i",j.i32_const(0)),j.block(j.loop(j.br_if(1,j.i32_eq(j.getLocal("i"),j.getLocal("n"))),j.call(h,j.getLocal("pFrom"),k,j.getLocal("pTo")),j.setLocal("pFrom",j.i32_add(j.getLocal("pFrom"),j.i32_const(e))),j.setLocal("pTo",j.i32_add(j.getLocal("pTo"),j.i32_const(f))),j.call(d+"_mul",k,j.getLocal("pInc"),k),j.setLocal("i",j.i32_add(j.getLocal("i"),j.i32_const(1))),j.br(0)))),a.exportFunction(b)}},977:a=>{function b(a){return Promise.resolve().then(()=>{var b=Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b})}b.keys=()=>[],b.resolve=b,b.id=977,a.exports=b},1115:a=>{"use strict";a.exports=require("constants")},1630:a=>{"use strict";a.exports=require("http")},1820:a=>{"use strict";a.exports=require("os")},1932:a=>{"use strict";a.exports=require("url")},1997:a=>{"use strict";a.exports=require("punycode")},2123:(a,b,c)=>{let d=c(4830),e=c(8286),f=c(4246);a.exports=function(a,b,c,g){let h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a$,a_,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG;if(a.modules[c])return c;let bH=8*a.modules[g].n64,bI=a.modules[g].q;return a.modules[c]={n64:2*a.modules[g].n64},(h=a.addFunction(c+"_isZero")).addParam("x","i32"),h.setReturnType("i32"),j=(i=h.getCodeBuilder()).getLocal("x"),k=i.i32_add(i.getLocal("x"),i.i32_const(bH)),h.addCode(i.i32_and(i.call(g+"_isZero",j),i.call(g+"_isZero",k))),(l=a.addFunction(c+"_isOne")).addParam("x","i32"),l.setReturnType("i32"),n=(m=l.getCodeBuilder()).getLocal("x"),o=m.i32_add(m.getLocal("x"),m.i32_const(bH)),l.addCode(m.ret(m.i32_and(m.call(g+"_isOne",n),m.call(g+"_isZero",o)))),(p=a.addFunction(c+"_zero")).addParam("x","i32"),r=(q=p.getCodeBuilder()).getLocal("x"),s=q.i32_add(q.getLocal("x"),q.i32_const(bH)),p.addCode(q.call(g+"_zero",r),q.call(g+"_zero",s)),(t=a.addFunction(c+"_one")).addParam("x","i32"),v=(u=t.getCodeBuilder()).getLocal("x"),w=u.i32_add(u.getLocal("x"),u.i32_const(bH)),t.addCode(u.call(g+"_one",v),u.call(g+"_zero",w)),(x=a.addFunction(c+"_copy")).addParam("x","i32"),x.addParam("r","i32"),z=(y=x.getCodeBuilder()).getLocal("x"),A=y.i32_add(y.getLocal("x"),y.i32_const(bH)),B=y.getLocal("r"),C=y.i32_add(y.getLocal("r"),y.i32_const(bH)),x.addCode(y.call(g+"_copy",z,B),y.call(g+"_copy",A,C)),(D=a.addFunction(c+"_mul")).addParam("x","i32"),D.addParam("y","i32"),D.addParam("r","i32"),F=(E=D.getCodeBuilder()).getLocal("x"),G=E.i32_add(E.getLocal("x"),E.i32_const(bH)),H=E.getLocal("y"),I=E.i32_add(E.getLocal("y"),E.i32_const(bH)),J=E.getLocal("r"),K=E.i32_add(E.getLocal("r"),E.i32_const(bH)),L=E.i32_const(a.alloc(bH)),M=E.i32_const(a.alloc(bH)),N=E.i32_const(a.alloc(bH)),O=E.i32_const(a.alloc(bH)),D.addCode(E.call(g+"_mul",F,H,L),E.call(g+"_mul",G,I,M),E.call(g+"_add",F,G,N),E.call(g+"_add",H,I,O),E.call(g+"_mul",N,O,N),E.call(b,M,J),E.call(g+"_add",L,J,J),E.call(g+"_add",L,M,K),E.call(g+"_sub",N,K,K)),(P=a.addFunction(c+"_mul1")).addParam("x","i32"),P.addParam("y","i32"),P.addParam("r","i32"),R=(Q=P.getCodeBuilder()).getLocal("x"),S=Q.i32_add(Q.getLocal("x"),Q.i32_const(bH)),T=Q.getLocal("y"),U=Q.getLocal("r"),V=Q.i32_add(Q.getLocal("r"),Q.i32_const(bH)),P.addCode(Q.call(g+"_mul",R,T,U),Q.call(g+"_mul",S,T,V)),(W=a.addFunction(c+"_square")).addParam("x","i32"),W.addParam("r","i32"),Y=(X=W.getCodeBuilder()).getLocal("x"),Z=X.i32_add(X.getLocal("x"),X.i32_const(bH)),$=X.getLocal("r"),_=X.i32_add(X.getLocal("r"),X.i32_const(bH)),aa=X.i32_const(a.alloc(bH)),ab=X.i32_const(a.alloc(bH)),ac=X.i32_const(a.alloc(bH)),ad=X.i32_const(a.alloc(bH)),W.addCode(X.call(g+"_mul",Y,Z,aa),X.call(g+"_add",Y,Z,ab),X.call(b,Z,ac),X.call(g+"_add",Y,ac,ac),X.call(b,aa,ad),X.call(g+"_add",ad,aa,ad),X.call(g+"_mul",ab,ac,$),X.call(g+"_sub",$,ad,$),X.call(g+"_add",aa,aa,_)),(ae=a.addFunction(c+"_add")).addParam("x","i32"),ae.addParam("y","i32"),ae.addParam("r","i32"),ag=(af=ae.getCodeBuilder()).getLocal("x"),ah=af.i32_add(af.getLocal("x"),af.i32_const(bH)),ai=af.getLocal("y"),aj=af.i32_add(af.getLocal("y"),af.i32_const(bH)),ak=af.getLocal("r"),al=af.i32_add(af.getLocal("r"),af.i32_const(bH)),ae.addCode(af.call(g+"_add",ag,ai,ak),af.call(g+"_add",ah,aj,al)),(am=a.addFunction(c+"_sub")).addParam("x","i32"),am.addParam("y","i32"),am.addParam("r","i32"),ao=(an=am.getCodeBuilder()).getLocal("x"),ap=an.i32_add(an.getLocal("x"),an.i32_const(bH)),aq=an.getLocal("y"),ar=an.i32_add(an.getLocal("y"),an.i32_const(bH)),as=an.getLocal("r"),at=an.i32_add(an.getLocal("r"),an.i32_const(bH)),am.addCode(an.call(g+"_sub",ao,aq,as),an.call(g+"_sub",ap,ar,at)),(au=a.addFunction(c+"_neg")).addParam("x","i32"),au.addParam("r","i32"),aw=(av=au.getCodeBuilder()).getLocal("x"),ax=av.i32_add(av.getLocal("x"),av.i32_const(bH)),ay=av.getLocal("r"),az=av.i32_add(av.getLocal("r"),av.i32_const(bH)),au.addCode(av.call(g+"_neg",aw,ay),av.call(g+"_neg",ax,az)),(aA=a.addFunction(c+"_conjugate")).addParam("x","i32"),aA.addParam("r","i32"),aC=(aB=aA.getCodeBuilder()).getLocal("x"),aD=aB.i32_add(aB.getLocal("x"),aB.i32_const(bH)),aE=aB.getLocal("r"),aF=aB.i32_add(aB.getLocal("r"),aB.i32_const(bH)),aA.addCode(aB.call(g+"_copy",aC,aE),aB.call(g+"_neg",aD,aF)),(aG=a.addFunction(c+"_toMontgomery")).addParam("x","i32"),aG.addParam("r","i32"),aI=(aH=aG.getCodeBuilder()).getLocal("x"),aJ=aH.i32_add(aH.getLocal("x"),aH.i32_const(bH)),aK=aH.getLocal("r"),aL=aH.i32_add(aH.getLocal("r"),aH.i32_const(bH)),aG.addCode(aH.call(g+"_toMontgomery",aI,aK),aH.call(g+"_toMontgomery",aJ,aL)),(aM=a.addFunction(c+"_fromMontgomery")).addParam("x","i32"),aM.addParam("r","i32"),aO=(aN=aM.getCodeBuilder()).getLocal("x"),aP=aN.i32_add(aN.getLocal("x"),aN.i32_const(bH)),aQ=aN.getLocal("r"),aR=aN.i32_add(aN.getLocal("r"),aN.i32_const(bH)),aM.addCode(aN.call(g+"_fromMontgomery",aO,aQ),aN.call(g+"_fromMontgomery",aP,aR)),(aS=a.addFunction(c+"_eq")).addParam("x","i32"),aS.addParam("y","i32"),aS.setReturnType("i32"),aU=(aT=aS.getCodeBuilder()).getLocal("x"),aV=aT.i32_add(aT.getLocal("x"),aT.i32_const(bH)),aW=aT.getLocal("y"),aX=aT.i32_add(aT.getLocal("y"),aT.i32_const(bH)),aS.addCode(aT.i32_and(aT.call(g+"_eq",aU,aW),aT.call(g+"_eq",aV,aX))),(aY=a.addFunction(c+"_inverse")).addParam("x","i32"),aY.addParam("r","i32"),a$=(aZ=aY.getCodeBuilder()).getLocal("x"),a_=aZ.i32_add(aZ.getLocal("x"),aZ.i32_const(bH)),a0=aZ.getLocal("r"),a1=aZ.i32_add(aZ.getLocal("r"),aZ.i32_const(bH)),a2=aZ.i32_const(a.alloc(bH)),a3=aZ.i32_const(a.alloc(bH)),a4=aZ.i32_const(a.alloc(bH)),a5=aZ.i32_const(a.alloc(bH)),aY.addCode(aZ.call(g+"_square",a$,a2),aZ.call(g+"_square",a_,a3),aZ.call(b,a3,a4),aZ.call(g+"_sub",a2,a4,a4),aZ.call(g+"_inverse",a4,a5),aZ.call(g+"_mul",a$,a5,a0),aZ.call(g+"_mul",a_,a5,a1),aZ.call(g+"_neg",a1,a1)),(a6=a.addFunction(c+"_timesScalar")).addParam("x","i32"),a6.addParam("scalar","i32"),a6.addParam("scalarLen","i32"),a6.addParam("r","i32"),a8=(a7=a6.getCodeBuilder()).getLocal("x"),a9=a7.i32_add(a7.getLocal("x"),a7.i32_const(bH)),ba=a7.getLocal("r"),bb=a7.i32_add(a7.getLocal("r"),a7.i32_const(bH)),a6.addCode(a7.call(g+"_timesScalar",a8,a7.getLocal("scalar"),a7.getLocal("scalarLen"),ba),a7.call(g+"_timesScalar",a9,a7.getLocal("scalar"),a7.getLocal("scalarLen"),bb)),(bc=a.addFunction(c+"_sign")).addParam("x","i32"),bc.addLocal("s","i32"),bc.setReturnType("i32"),be=(bd=bc.getCodeBuilder()).getLocal("x"),bf=bd.i32_add(bd.getLocal("x"),bd.i32_const(bH)),bc.addCode(bd.setLocal("s",bd.call(g+"_sign",bf)),bd.if(bd.getLocal("s"),bd.ret(bd.getLocal("s"))),bd.ret(bd.call(g+"_sign",be))),(bg=a.addFunction(c+"_isNegative")).addParam("x","i32"),bg.setReturnType("i32"),bi=(bh=bg.getCodeBuilder()).getLocal("x"),bj=bh.i32_add(bh.getLocal("x"),bh.i32_const(bH)),bg.addCode(bh.if(bh.call(g+"_isZero",bj),bh.ret(bh.call(g+"_isNegative",bi))),bh.ret(bh.call(g+"_isNegative",bj))),a.exportFunction(c+"_isZero"),a.exportFunction(c+"_isOne"),a.exportFunction(c+"_zero"),a.exportFunction(c+"_one"),a.exportFunction(c+"_copy"),a.exportFunction(c+"_mul"),a.exportFunction(c+"_mul1"),a.exportFunction(c+"_square"),a.exportFunction(c+"_add"),a.exportFunction(c+"_sub"),a.exportFunction(c+"_neg"),a.exportFunction(c+"_sign"),a.exportFunction(c+"_conjugate"),a.exportFunction(c+"_fromMontgomery"),a.exportFunction(c+"_toMontgomery"),a.exportFunction(c+"_eq"),a.exportFunction(c+"_inverse"),e(a,c),d(a,c+"_exp",2*bH,c+"_mul",c+"_square",c+"_copy",c+"_one"),(bk=a.addFunction(c+"_sqrt")).addParam("a","i32"),bk.addParam("pr","i32"),bm=(bl=bk.getCodeBuilder()).i32_const(a.alloc(f.bigInt2BytesLE((BigInt(bI||0)-3n)/4n,bH))),bn=bl.i32_const(a.alloc(f.bigInt2BytesLE((BigInt(bI||0)-1n)/2n,bH))),bo=bl.getLocal("a"),bp=bl.i32_const(a.alloc(2*bH)),bq=bl.i32_const(a.alloc(2*bH)),br=bl.i32_const(a.alloc(2*bH)),bs=a.alloc(2*bH),bt=bl.i32_const(bs),bu=bl.i32_const(bs),bv=bl.i32_const(bs+bH),bw=bl.i32_const(a.alloc(2*bH)),bx=bl.i32_const(a.alloc(2*bH)),bk.addCode(bl.call(c+"_one",bt),bl.call(c+"_neg",bt,bt),bl.call(c+"_exp",bo,bm,bl.i32_const(bH),bp),bl.call(c+"_square",bp,bq),bl.call(c+"_mul",bo,bq,bq),bl.call(c+"_conjugate",bq,br),bl.call(c+"_mul",br,bq,br),bl.if(bl.call(c+"_eq",br,bt),bl.unreachable()),bl.call(c+"_mul",bp,bo,bw),bl.if(bl.call(c+"_eq",bq,bt),[...bl.call(g+"_zero",bu),...bl.call(g+"_one",bv),...bl.call(c+"_mul",bt,bw,bl.getLocal("pr"))],[...bl.call(c+"_one",bx),...bl.call(c+"_add",bx,bq,bx),...bl.call(c+"_exp",bx,bn,bl.i32_const(bH),bx),...bl.call(c+"_mul",bx,bw,bl.getLocal("pr"))])),(by=a.addFunction(c+"_isSquare")).addParam("a","i32"),by.setReturnType("i32"),bA=(bz=by.getCodeBuilder()).i32_const(a.alloc(f.bigInt2BytesLE((BigInt(bI||0)-3n)/4n,bH))),bB=bz.getLocal("a"),bC=bz.i32_const(a.alloc(2*bH)),bD=bz.i32_const(a.alloc(2*bH)),bE=bz.i32_const(a.alloc(2*bH)),bF=a.alloc(2*bH),bG=bz.i32_const(bF),by.addCode(bz.call(c+"_one",bG),bz.call(c+"_neg",bG,bG),bz.call(c+"_exp",bB,bA,bz.i32_const(bH),bC),bz.call(c+"_square",bC,bD),bz.call(c+"_mul",bB,bD,bD),bz.call(c+"_conjugate",bD,bE),bz.call(c+"_mul",bE,bD,bE),bz.if(bz.call(c+"_eq",bE,bG),bz.ret(bz.i32_const(0))),bz.ret(bz.i32_const(1))),a.exportFunction(c+"_exp"),a.exportFunction(c+"_timesScalar"),a.exportFunction(c+"_batchInverse"),a.exportFunction(c+"_sqrt"),a.exportFunction(c+"_isSquare"),a.exportFunction(c+"_isNegative"),c}},2239:(a,b,c)=>{let d=c(760),{bitLength:e}=c(5856);a.exports=function(a,b,c,f,g){let h,i,j,k,l,m,n,o,p,q=BigInt(b),r=Math.floor((e(q-1n)-1)/64)+1,s=c||"f1";if(a.modules[s])return s;a.modules[s]={n64:r};let t=g||"int",u=d(a,q,f,t),v=a.modules[u].pR2,w=a.modules[u].pq,x=a.modules[u].pePlusOne;return h=a.alloc(8*r),(i=a.addFunction(s+"_mul")).addParam("x","i32"),i.addParam("y","i32"),i.addParam("r","i32"),j=i.getCodeBuilder(),i.addCode(j.call(u+"_mul",j.getLocal("x"),j.getLocal("y"),j.i32_const(h))),i.addCode(j.call(u+"_mul",j.i32_const(h),j.i32_const(v),j.getLocal("r"))),(k=a.addFunction(s+"_square")).addParam("x","i32"),k.addParam("r","i32"),l=k.getCodeBuilder(),k.addCode(l.call(s+"_mul",l.getLocal("x"),l.getLocal("x"),l.getLocal("r"))),(m=a.addFunction(s+"_inverse")).addParam("x","i32"),m.addParam("r","i32"),n=m.getCodeBuilder(),m.addCode(n.call(t+"_inverseMod",n.getLocal("x"),n.i32_const(w),n.getLocal("r"))),(o=a.addFunction(s+"_isNegative")).addParam("x","i32"),o.setReturnType("i32"),p=o.getCodeBuilder(),o.addCode(p.call(t+"_gte",p.getLocal("x"),p.i32_const(x))),a.exportFunction(u+"_add",s+"_add"),a.exportFunction(u+"_sub",s+"_sub"),a.exportFunction(u+"_neg",s+"_neg"),a.exportFunction(s+"_mul"),a.exportFunction(s+"_square"),a.exportFunction(s+"_inverse"),a.exportFunction(s+"_isNegative"),a.exportFunction(u+"_copy",s+"_copy"),a.exportFunction(u+"_zero",s+"_zero"),a.exportFunction(u+"_one",s+"_one"),a.exportFunction(u+"_isZero",s+"_isZero"),a.exportFunction(u+"_eq",s+"_eq"),s}},2650:(a,b,c)=>{let d=c(1932),e=c(371),f=c(3566),g=Symbol.for("worker"),h=Symbol.for("events");class i{constructor(){Object.defineProperty(this,h,{value:new Map})}dispatchEvent(a){if(a.target=a.currentTarget=this,this["on"+a.type])try{this["on"+a.type](a)}catch(a){console.error(a)}let b=this[h].get(a.type);null!=b&&b.forEach(b=>{try{b.call(this,a)}catch(a){console.error(a)}})}addEventListener(a,b){let c=this[h].get(a);c||this[h].set(a,c=[]),c.push(b)}removeEventListener(a,b){let c=this[h].get(a);if(c){let a=c.indexOf(b);-1!==a&&c.splice(a,1)}}}function j(a,b){this.type=a,this.timeStamp=Date.now(),this.target=this.currentTarget=this.data=null}a.exports=f.isMainThread?function(){class a extends i{constructor(a,b){let c;super();const{name:e,type:h}=b||{};a+="",c=/^data:/.test(a)?a:d.fileURLToPath(new d.URL(a,k));const i=new f.Worker(__filename,{workerData:{mod:c,name:e,type:h}});Object.defineProperty(this,g,{value:i}),i.on("message",a=>{let b=new j("message");b.data=a,this.dispatchEvent(b)}),i.on("error",a=>{a.type="error",this.dispatchEvent(a)}),i.on("exit",()=>{this.dispatchEvent(new j("close"))})}postMessage(a,b){this[g].postMessage(a,b)}terminate(){this[g].terminate()}}return a.prototype.onmessage=a.prototype.onerror=a.prototype.onclose=null,a}():function(){let{mod:a,name:b,type:d}=f.workerData,e=global.self=global,g=[];function h(){let a=g;g=null,a.forEach(a=>{e.dispatchEvent(a)})}f.parentPort.on("message",a=>{let b=new j("message");b.data=a,null==g?e.dispatchEvent(b):g.push(b)}),f.parentPort.on("error",a=>{a.type="Error",e.dispatchEvent(a)});class k extends i{postMessage(a,b){f.parentPort.postMessage(a,b)}close(){process.exit()}}let m=Object.getPrototypeOf(global);delete m.constructor,Object.defineProperties(k.prototype,m),m=Object.setPrototypeOf(global,new k),["postMessage","addEventListener","removeEventListener","dispatchEvent"].forEach(a=>{m[a]=m[a].bind(global)}),global.name=b;let n=/^data:/.test(a);if("module"===d)c(977)(a).catch(c=>{if(n&&"Not supported"===c.message)return console.warn("Worker(): Importing data: URLs requires Node 12.10+. Falling back to classic worker."),l(a,b);console.error(c)}).then(h);else{try{/^data:/.test(a)?l(a,b):c(3709)(a)}catch(a){console.error(a)}Promise.resolve().then(h)}}();let k=d.pathToFileURL(process.cwd()+"/");function l(a,b){let{data:c}=function(a){let[b,c,d,e]=a.match(/^data: *([^;,]*)(?: *; *([^,]*))? *,(.*)$/)||[];if(!b)throw Error("Invalid Data URL.");if(d)if("base64"===d.toLowerCase())e=Buffer.from(e,"base64").toString();else throw Error('Unknown Data URL encoding "'+d+'"');return{type:c,data:e}}(a);return e.runInThisContext(c,{filename:"worker.<"+(b||"data:")+">"})}},2758:a=>{a.exports=function(a,b,c,d,e){let f,g,h,i,j,k,l,m,n,o,p=8*a.modules[b].n64;(f=a.addFunction(c+"_getChunk")).addParam("pScalar","i32"),f.addParam("scalarSize","i32"),f.addParam("startBit","i32"),f.addParam("chunkSize","i32"),f.addLocal("bitsToEnd","i32"),f.addLocal("mask","i32"),f.setReturnType("i32"),g=f.getCodeBuilder(),f.addCode(g.setLocal("bitsToEnd",g.i32_sub(g.i32_mul(g.getLocal("scalarSize"),g.i32_const(8)),g.getLocal("startBit"))),g.if(g.i32_gt_s(g.getLocal("chunkSize"),g.getLocal("bitsToEnd")),g.setLocal("mask",g.i32_sub(g.i32_shl(g.i32_const(1),g.getLocal("bitsToEnd")),g.i32_const(1))),g.setLocal("mask",g.i32_sub(g.i32_shl(g.i32_const(1),g.getLocal("chunkSize")),g.i32_const(1)))),g.i32_and(g.i32_shr_u(g.i32_load(g.i32_add(g.getLocal("pScalar"),g.i32_shr_u(g.getLocal("startBit"),g.i32_const(3))),0,0),g.i32_and(g.getLocal("startBit"),g.i32_const(7))),g.getLocal("mask"))),(h=a.addFunction(c+"_reduceTable")).addParam("pTable","i32"),h.addParam("p","i32"),h.addLocal("half","i32"),h.addLocal("it1","i32"),h.addLocal("it2","i32"),h.addLocal("pAcc","i32"),i=h.getCodeBuilder(),h.addCode(i.if(i.i32_eq(i.getLocal("p"),i.i32_const(1)),i.ret([])),i.setLocal("half",i.i32_shl(i.i32_const(1),i.i32_sub(i.getLocal("p"),i.i32_const(1)))),i.setLocal("it1",i.getLocal("pTable")),i.setLocal("it2",i.i32_add(i.getLocal("pTable"),i.i32_mul(i.getLocal("half"),i.i32_const(p)))),i.setLocal("pAcc",i.i32_sub(i.getLocal("it2"),i.i32_const(p))),i.block(i.loop(i.br_if(1,i.i32_eq(i.getLocal("it1"),i.getLocal("pAcc"))),i.call(b+"_add",i.getLocal("it1"),i.getLocal("it2"),i.getLocal("it1")),i.call(b+"_add",i.getLocal("pAcc"),i.getLocal("it2"),i.getLocal("pAcc")),i.setLocal("it1",i.i32_add(i.getLocal("it1"),i.i32_const(p))),i.setLocal("it2",i.i32_add(i.getLocal("it2"),i.i32_const(p))),i.br(0))),i.call(c+"_reduceTable",i.getLocal("pTable"),i.i32_sub(i.getLocal("p"),i.i32_const(1))),i.setLocal("p",i.i32_sub(i.getLocal("p"),i.i32_const(1))),i.block(i.loop(i.br_if(1,i.i32_eqz(i.getLocal("p"))),i.call(b+"_double",i.getLocal("pAcc"),i.getLocal("pAcc")),i.setLocal("p",i.i32_sub(i.getLocal("p"),i.i32_const(1))),i.br(0))),i.call(b+"_add",i.getLocal("pTable"),i.getLocal("pAcc"),i.getLocal("pTable"))),(j=a.addFunction(c+"_chunk")).addParam("pBases","i32"),j.addParam("pScalars","i32"),j.addParam("scalarSize","i32"),j.addParam("n","i32"),j.addParam("startBit","i32"),j.addParam("chunkSize","i32"),j.addParam("pr","i32"),j.addLocal("nChunks","i32"),j.addLocal("itScalar","i32"),j.addLocal("endScalar","i32"),j.addLocal("itBase","i32"),j.addLocal("i","i32"),j.addLocal("j","i32"),j.addLocal("nTable","i32"),j.addLocal("pTable","i32"),j.addLocal("idx","i32"),j.addLocal("pIdxTable","i32"),k=j.getCodeBuilder(),j.addCode(k.if(k.i32_eqz(k.getLocal("n")),[...k.call(b+"_zero",k.getLocal("pr")),...k.ret([])]),k.setLocal("nTable",k.i32_shl(k.i32_const(1),k.getLocal("chunkSize"))),k.setLocal("pTable",k.i32_load(k.i32_const(0))),k.i32_store(k.i32_const(0),k.i32_add(k.getLocal("pTable"),k.i32_mul(k.getLocal("nTable"),k.i32_const(p)))),k.setLocal("j",k.i32_const(0)),k.block(k.loop(k.br_if(1,k.i32_eq(k.getLocal("j"),k.getLocal("nTable"))),k.call(b+"_zero",k.i32_add(k.getLocal("pTable"),k.i32_mul(k.getLocal("j"),k.i32_const(p)))),k.setLocal("j",k.i32_add(k.getLocal("j"),k.i32_const(1))),k.br(0))),k.setLocal("itBase",k.getLocal("pBases")),k.setLocal("itScalar",k.getLocal("pScalars")),k.setLocal("endScalar",k.i32_add(k.getLocal("pScalars"),k.i32_mul(k.getLocal("n"),k.getLocal("scalarSize")))),k.block(k.loop(k.br_if(1,k.i32_eq(k.getLocal("itScalar"),k.getLocal("endScalar"))),k.setLocal("idx",k.call(c+"_getChunk",k.getLocal("itScalar"),k.getLocal("scalarSize"),k.getLocal("startBit"),k.getLocal("chunkSize"))),k.if(k.getLocal("idx"),[...k.setLocal("pIdxTable",k.i32_add(k.getLocal("pTable"),k.i32_mul(k.i32_sub(k.getLocal("idx"),k.i32_const(1)),k.i32_const(p)))),...k.call(d,k.getLocal("pIdxTable"),k.getLocal("itBase"),k.getLocal("pIdxTable"))]),k.setLocal("itScalar",k.i32_add(k.getLocal("itScalar"),k.getLocal("scalarSize"))),k.setLocal("itBase",k.i32_add(k.getLocal("itBase"),k.i32_const(e))),k.br(0))),k.call(c+"_reduceTable",k.getLocal("pTable"),k.getLocal("chunkSize")),k.call(b+"_copy",k.getLocal("pTable"),k.getLocal("pr")),k.i32_store(k.i32_const(0),k.getLocal("pTable"))),(l=a.addFunction(c)).addParam("pBases","i32"),l.addParam("pScalars","i32"),l.addParam("scalarSize","i32"),l.addParam("n","i32"),l.addParam("pr","i32"),l.addLocal("chunkSize","i32"),l.addLocal("nChunks","i32"),l.addLocal("itScalar","i32"),l.addLocal("endScalar","i32"),l.addLocal("itBase","i32"),l.addLocal("itBit","i32"),l.addLocal("i","i32"),l.addLocal("j","i32"),l.addLocal("nTable","i32"),l.addLocal("pTable","i32"),l.addLocal("idx","i32"),l.addLocal("pIdxTable","i32"),n=(m=l.getCodeBuilder()).i32_const(a.alloc(p)),o=a.alloc([17,17,17,17,17,17,17,17,17,17,16,16,15,14,13,13,12,11,10,9,8,7,7,6,5,4,3,2,1,1,1,1]),l.addCode(m.call(b+"_zero",m.getLocal("pr")),m.if(m.i32_eqz(m.getLocal("n")),m.ret([])),m.setLocal("chunkSize",m.i32_load8_u(m.i32_clz(m.getLocal("n")),o)),m.setLocal("nChunks",m.i32_add(m.i32_div_u(m.i32_sub(m.i32_shl(m.getLocal("scalarSize"),m.i32_const(3)),m.i32_const(1)),m.getLocal("chunkSize")),m.i32_const(1))),m.setLocal("itBit",m.i32_mul(m.i32_sub(m.getLocal("nChunks"),m.i32_const(1)),m.getLocal("chunkSize"))),m.block(m.loop(m.br_if(1,m.i32_lt_s(m.getLocal("itBit"),m.i32_const(0))),m.if(m.i32_eqz(m.call(b+"_isZero",m.getLocal("pr"))),[...m.setLocal("j",m.i32_const(0)),...m.block(m.loop(m.br_if(1,m.i32_eq(m.getLocal("j"),m.getLocal("chunkSize"))),m.call(b+"_double",m.getLocal("pr"),m.getLocal("pr")),m.setLocal("j",m.i32_add(m.getLocal("j"),m.i32_const(1))),m.br(0)))]),m.call(c+"_chunk",m.getLocal("pBases"),m.getLocal("pScalars"),m.getLocal("scalarSize"),m.getLocal("n"),m.getLocal("itBit"),m.getLocal("chunkSize"),n),m.call(b+"_add",m.getLocal("pr"),n,m.getLocal("pr")),m.setLocal("itBit",m.i32_sub(m.getLocal("itBit"),m.getLocal("chunkSize"))),m.br(0)))),a.exportFunction(c),a.exportFunction(c+"_chunk")}},2763:a=>{a.exports=function(a,b,c){let d,e,f,g,h,i=8*a.modules[c].n64;return(d=a.addFunction(b+"_zero")).addParam("px","i32"),d.addParam("n","i32"),d.addLocal("lastp","i32"),d.addLocal("p","i32"),e=d.getCodeBuilder(),d.addCode(e.setLocal("p",e.getLocal("px")),e.setLocal("lastp",e.i32_add(e.getLocal("px"),e.i32_mul(e.getLocal("n"),e.i32_const(i)))),e.block(e.loop(e.br_if(1,e.i32_eq(e.getLocal("p"),e.getLocal("lastp"))),e.call(c+"_zero",e.getLocal("p")),e.setLocal("p",e.i32_add(e.getLocal("p"),e.i32_const(i))),e.br(0)))),(f=a.addFunction(b+"_constructLC")).addParam("ppolynomials","i32"),f.addParam("psignals","i32"),f.addParam("nSignals","i32"),f.addParam("pres","i32"),f.addLocal("i","i32"),f.addLocal("j","i32"),f.addLocal("pp","i32"),f.addLocal("ps","i32"),f.addLocal("pd","i32"),f.addLocal("ncoefs","i32"),h=(g=f.getCodeBuilder()).i32_const(a.alloc(i)),f.addCode(g.setLocal("i",g.i32_const(0)),g.setLocal("pp",g.getLocal("ppolynomials")),g.setLocal("ps",g.getLocal("psignals")),g.block(g.loop(g.br_if(1,g.i32_eq(g.getLocal("i"),g.getLocal("nSignals"))),g.setLocal("ncoefs",g.i32_load(g.getLocal("pp"))),g.setLocal("pp",g.i32_add(g.getLocal("pp"),g.i32_const(4))),g.setLocal("j",g.i32_const(0)),g.block(g.loop(g.br_if(1,g.i32_eq(g.getLocal("j"),g.getLocal("ncoefs"))),g.setLocal("pd",g.i32_add(g.getLocal("pres"),g.i32_mul(g.i32_load(g.getLocal("pp")),g.i32_const(i)))),g.setLocal("pp",g.i32_add(g.getLocal("pp"),g.i32_const(4))),g.call(c+"_mul",g.getLocal("ps"),g.getLocal("pp"),h),g.call(c+"_add",h,g.getLocal("pd"),g.getLocal("pd")),g.setLocal("pp",g.i32_add(g.getLocal("pp"),g.i32_const(i))),g.setLocal("j",g.i32_add(g.getLocal("j"),g.i32_const(1))),g.br(0))),g.setLocal("ps",g.i32_add(g.getLocal("ps"),g.i32_const(i))),g.setLocal("i",g.i32_add(g.getLocal("i"),g.i32_const(1))),g.br(0)))),a.exportFunction(b+"_zero"),a.exportFunction(b+"_constructLC"),b}},3033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3042:(a,b,c)=>{"use strict";let d,e;c.r(b),c.d(b,{handler:()=>eS,patchFetch:()=>eR,routeModule:()=>eN,serverHooks:()=>eQ,workAsyncStorage:()=>eO,workUnitAsyncStorage:()=>eP});var f={};c.r(f),c.d(f,{GET:()=>eL,POST:()=>eM,dynamic:()=>dy,maxDuration:()=>dz,runtime:()=>dx});var g=c(9225),h=c(4006),i=c(8317),j=c(9373),k=c(4775),l=c(4235),m=c(261),n=c(4365),o=c(771),p=c(3461),q=c(7798),r=c(2280),s=c(2018),t=c(5696),u=c(7929),v=c(6439),w=c(7527),x=c(5592),y=c(7598),z=c(3204);let A=y.webcrypto?.subtle||{};var B=Object.defineProperty,C={},D={UpstashError:()=>F,UpstashJSONParseError:()=>H,UrlError:()=>G};for(var E in D)B(C,E,{get:D[E],enumerable:!0});var F=class extends Error{constructor(a,b){super(a,b),this.name="UpstashError"}},G=class extends Error{constructor(a){super(`Upstash Redis client was passed an invalid URL. You should pass a URL starting with https. Received: "${a}". `),this.name="UrlError"}},H=class extends F{constructor(a,b){const c=a.length>200?a.slice(0,200)+"...":a;super(`Unable to parse response body: ${c}`,b),this.name="UpstashJSONParseError"}};function I(a){try{return function a(b){let c=Array.isArray(b)?b.map(b=>{try{return a(b)}catch{return b}}):JSON.parse(b);return"number"==typeof c&&c.toString()!==b?b:c}(a)}catch{return a}}function J(a){return[a[0],...I(a.slice(1))]}function K(a){let[b,c]=a,d=[];for(let a=0;a<c.length;a+=2)d.push({key:c[a],type:c[a+1]});return[b,d]}function L(a){if("object"==typeof a&&null!==a&&!Array.isArray(a))return a;if(!Array.isArray(a))return{};let b={};for(let c=0;c<a.length;c+=2)"string"==typeof a[c]&&(b[a[c]]=a[c+1]);return b}var M=class{baseUrl;headers;options;readYourWrites;upstashSyncToken="";hasCredentials;retry;constructor(a){if(this.options={backend:a.options?.backend,agent:a.agent,responseEncoding:a.responseEncoding??"base64",cache:a.cache,signal:a.signal,keepAlive:a.keepAlive??!0},this.upstashSyncToken="",this.readYourWrites=a.readYourWrites??!0,this.baseUrl=(a.baseUrl||"").replace(/\/$/,""),this.baseUrl&&!/^https?:\/\/[^\s#$./?].\S*$/.test(this.baseUrl))throw new G(this.baseUrl);this.headers={"Content-Type":"application/json",...a.headers},this.hasCredentials=!!(this.baseUrl&&this.headers.authorization.split(" ")[1]),"base64"===this.options.responseEncoding&&(this.headers["Upstash-Encoding"]="base64"),this.retry="boolean"!=typeof a.retry||a.retry?{attempts:a.retry?.retries??5,backoff:a.retry?.backoff??(a=>50*Math.exp(a))}:{attempts:1,backoff:()=>0}}mergeTelemetry(a){this.headers=P(this.headers,"Upstash-Telemetry-Runtime",a.runtime),this.headers=P(this.headers,"Upstash-Telemetry-Platform",a.platform),this.headers=P(this.headers,"Upstash-Telemetry-Sdk",a.sdk)}async request(a){let b,c=function(...a){let b={};for(let c of a)if(c)for(let[a,d]of Object.entries(c))null!=d&&(b[a]=d);return b}(this.headers,a.headers??{}),d=[this.baseUrl,...a.path??[]].join("/"),e="text/event-stream"===c.Accept,f=a.signal??this.options.signal,g="function"==typeof f,h={cache:this.options.cache,method:"POST",headers:c,body:JSON.stringify(a.body),keepalive:this.options.keepAlive,agent:this.options.agent,signal:g?f():f,backend:this.options.backend};if(this.hasCredentials||console.warn("[Upstash Redis] Redis client was initialized without url or token. Failed to execute command."),this.readYourWrites){let a=this.upstashSyncToken;this.headers["upstash-sync-token"]=a}let i=null,j=null;for(let a=0;a<=this.retry.attempts;a++)try{i=await fetch(d,h);break}catch(b){if(h.signal?.aborted&&g)throw b;if(h.signal?.aborted){i=new Response(new Blob([JSON.stringify({result:h.signal.reason??"Aborted"})]),{status:200,statusText:h.signal.reason??"Aborted"});break}j=b,a<this.retry.attempts&&await new Promise(b=>setTimeout(b,this.retry.backoff(a)))}if(!i)throw j??Error("Exhausted all retries");if(!i.ok){let b,c=await i.text();try{b=JSON.parse(c)}catch(a){throw new H(c,{cause:a})}throw new F(`${b.error}, command was: ${JSON.stringify(a.body)}`)}if(this.readYourWrites){let a=i.headers;this.upstashSyncToken=a.get("upstash-sync-token")??""}if(e&&a&&a.onMessage&&i.body){let b=i.body.getReader(),c=new TextDecoder;return(async()=>{try{let d="";for(;;){let{value:e,done:f}=await b.read();if(f)break;let g=(d+=c.decode(e,{stream:!0})).split("\n");if((d=g.pop()||"").length>1048576)throw Error("Buffer size exceeded (1MB)");for(let b of g)if(b.startsWith("data: ")){let c=b.slice(6);a.onMessage?.(c)}}}catch(a){a instanceof Error&&"AbortError"===a.name||console.error("Stream reading error:",a)}finally{try{await b.cancel()}catch{}}})(),{result:1}}let k=await i.text();try{b=JSON.parse(k)}catch(a){throw new H(k,{cause:a})}if(this.readYourWrites){let a=i.headers;this.upstashSyncToken=a.get("upstash-sync-token")??""}return"base64"===this.options.responseEncoding?Array.isArray(b)?b.map(({result:a,error:b})=>({result:O(a),error:b})):{result:O(b.result),error:b.error}:b}};function N(a){let b="";try{let c=atob(a),d=c.length,e=new Uint8Array(d);for(let a=0;a<d;a++)e[a]=c.charCodeAt(a);b=new TextDecoder().decode(e)}catch{b=a}return b}function O(a){let b;switch(typeof a){case"undefined":return a;case"number":b=a;break;case"object":b=Array.isArray(a)?a.map(a=>"string"==typeof a?N(a):Array.isArray(a)?a.map(a=>O(a)):a):null;break;case"string":b="OK"===a?"OK":N(a)}return b}function P(a,b,c){return c&&(a[b]=a[b]?[a[b],c].join(","):c),a}var Q=a=>{switch(typeof a){case"string":case"number":case"boolean":return a;default:return JSON.stringify(a)}},R=class{command;serialize;deserialize;headers;path;onMessage;isStreaming;signal;constructor(a,b){if(this.serialize=Q,this.deserialize=b?.automaticDeserialization===void 0||b.automaticDeserialization?b?.deserialize??I:a=>a,this.command=a.map(a=>this.serialize(a)),this.headers=b?.headers,this.path=b?.path,this.onMessage=b?.streamOptions?.onMessage,this.isStreaming=b?.streamOptions?.isStreaming??!1,this.signal=b?.streamOptions?.signal,b?.latencyLogging){const a=this.exec.bind(this);this.exec=async b=>{let c=performance.now(),d=await a(b),e=(performance.now()-c).toFixed(2);return console.log(`Latency for \x1b[38;2;19;185;39m${this.command[0].toString().toUpperCase()}\x1b[0m: \x1b[38;2;0;255;255m${e} ms\x1b[0m`),d}}}async exec(a){let{result:b,error:c}=await a.request({body:this.command,path:this.path,upstashSyncToken:a.upstashSyncToken,headers:this.headers,onMessage:this.onMessage,isStreaming:this.isStreaming,signal:this.signal});if(c)throw new F(c);if(void 0===b)throw TypeError("Request did not return a result");return this.deserialize(b)}},S=class extends R{constructor(a,b){const c=["hrandfield",a[0]];"number"==typeof a[1]&&c.push(a[1]),a[2]&&c.push("WITHVALUES"),super(c,{deserialize:a[2]?a=>(function(a){if(0===a.length)return null;let b={};for(let c=0;c<a.length;c+=2){let d=a[c],e=a[c+1];try{b[d]=JSON.parse(e)}catch{b[d]=e}}return b})(a):b?.deserialize,...b})}},T=class extends R{constructor(a,b){super(["append",...a],b)}},U=class extends R{constructor([a,b,c],d){const e=["bitcount",a];"number"==typeof b&&e.push(b),"number"==typeof c&&e.push(c),super(e,d)}},V=class{constructor(a,b,c,d=a=>a.exec(this.client)){this.client=b,this.opts=c,this.execOperation=d,this.command=["bitfield",...a]}command;chain(...a){return this.command.push(...a),this}get(...a){return this.chain("get",...a)}set(...a){return this.chain("set",...a)}incrby(...a){return this.chain("incrby",...a)}overflow(a){return this.chain("overflow",a)}exec(){let a=new R(this.command,this.opts);return this.execOperation(a)}},W=class extends R{constructor(a,b){super(["bitop",...a],b)}},X=class extends R{constructor(a,b){super(["bitpos",...a],b)}},Y=class extends R{constructor([a,b],c){super(["CLIENT","SETINFO",a.toUpperCase(),b],c)}},Z=class extends R{constructor([a,b,c],d){super(["COPY",a,b,...c?.replace?["REPLACE"]:[]],{...d,deserialize:a=>a>0?"COPIED":"NOT_COPIED"})}},$=class extends R{constructor(a){super(["dbsize"],a)}},_=class extends R{constructor(a,b){super(["decr",...a],b)}},aa=class extends R{constructor(a,b){super(["decrby",...a],b)}},ab=class extends R{constructor(a,b){super(["del",...a],b)}},ac=class extends R{constructor(a,b){super(["echo",...a],b)}},ad=class extends R{constructor([a,b,c],d){super(["eval_ro",a,b.length,...b,...c??[]],d)}},ae=class extends R{constructor([a,b,c],d){super(["eval",a,b.length,...b,...c??[]],d)}},af=class extends R{constructor([a,b,c],d){super(["evalsha_ro",a,b.length,...b,...c??[]],d)}},ag=class extends R{constructor([a,b,c],d){super(["evalsha",a,b.length,...b,...c??[]],d)}},ah=class extends R{constructor(a,b){super(a.map(a=>"string"==typeof a?a:String(a)),b)}},ai=class extends R{constructor(a,b){super(["exists",...a],b)}},aj=class extends R{constructor(a,b){super(["expire",...a.filter(Boolean)],b)}},ak=class extends R{constructor(a,b){super(["expireat",...a],b)}},al=class extends R{constructor([a,b,c],d){super(["fcall",a,...b?[b.length,...b]:[0],...c??[]],d)}},am=class extends R{constructor([a,b,c],d){super(["fcall_ro",a,...b?[b.length,...b]:[0],...c??[]],d)}},an=class extends R{constructor(a,b){const c=["flushall"];a&&a.length>0&&a[0].async&&c.push("async"),super(c,b)}},ao=class extends R{constructor([a],b){const c=["flushdb"];a?.async&&c.push("async"),super(c,b)}},ap=class extends R{constructor([a],b){super(["function","delete",a],b)}},aq=class extends R{constructor(a){super(["function","flush"],a)}},ar=class extends R{constructor([a],b){const c=["function","list"];a?.libraryName&&c.push("libraryname",a.libraryName),a?.withCode&&c.push("withcode"),super(c,{deserialize:as,...b})}};function as(a){return Array.isArray(a)?a.map(a=>{let b=L(a),c=b.functions.map(a=>L(a));return{libraryName:b.library_name,engine:b.engine,functions:c.map(a=>({name:a.name,description:a.description??void 0,flags:a.flags})),libraryCode:b.library_code}}):[]}var at=class extends R{constructor([a],b){super(["function","load",...a.replace?["replace"]:[],a.code],b)}},au=class extends R{constructor(a){super(["function","stats"],{deserialize:av,...a})}};function av(a){return{engines:Object.fromEntries(Object.entries(Object.fromEntries(Object.entries(L(L(a).engines)).map(([a,b])=>[a,L(b)]))).map(([a,b])=>[a,{librariesCount:b.libraries_count,functionsCount:b.functions_count}]))}}var aw=class extends R{constructor([a,b,...c],d){const e=["geoadd",a];"nx"in b&&b.nx?e.push("nx"):"xx"in b&&b.xx&&e.push("xx"),"ch"in b&&b.ch&&e.push("ch"),"latitude"in b&&b.latitude&&e.push(b.longitude,b.latitude,b.member),e.push(...c.flatMap(({latitude:a,longitude:b,member:c})=>[b,a,c])),super(e,d)}},ax=class extends R{constructor([a,b,c,d="M"],e){super(["GEODIST",a,b,c,d],e)}},ay=class extends R{constructor(a,b){const[c]=a;super(["GEOHASH",c,...Array.isArray(a[1])?a[1]:a.slice(1)],b)}},az=class extends R{constructor(a,b){const[c]=a;super(["GEOPOS",c,...Array.isArray(a[1])?a[1]:a.slice(1)],{deserialize:a=>(function(a){let b=[];for(let c of a)c?.[0]&&c?.[1]&&b.push({lng:Number.parseFloat(c[0]),lat:Number.parseFloat(c[1])});return b})(a),...b})}},aA=class extends R{constructor([a,b,c,d,e],f){const g=["GEOSEARCH",a];("FROMMEMBER"===b.type||"frommember"===b.type)&&g.push(b.type,b.member),("FROMLONLAT"===b.type||"fromlonlat"===b.type)&&g.push(b.type,b.coordinate.lon,b.coordinate.lat),("BYRADIUS"===c.type||"byradius"===c.type)&&g.push(c.type,c.radius,c.radiusType),("BYBOX"===c.type||"bybox"===c.type)&&g.push(c.type,c.rect.width,c.rect.height,c.rectType),g.push(d),e?.count&&g.push("COUNT",e.count.limit,...e.count.any?["ANY"]:[]),super([...g,...e?.withCoord?["WITHCOORD"]:[],...e?.withDist?["WITHDIST"]:[],...e?.withHash?["WITHHASH"]:[]],{deserialize:a=>e?.withCoord||e?.withDist||e?.withHash?a.map(a=>{let b=1,c={};try{c.member=JSON.parse(a[0])}catch{c.member=a[0]}return e.withDist&&(c.dist=Number.parseFloat(a[b++])),e.withHash&&(c.hash=a[b++].toString()),e.withCoord&&(c.coord={long:Number.parseFloat(a[b][0]),lat:Number.parseFloat(a[b][1])}),c}):a.map(a=>{try{return{member:JSON.parse(a)}}catch{return{member:a}}}),...f})}},aB=class extends R{constructor([a,b,c,d,e,f],g){const h=["GEOSEARCHSTORE",a,b];("FROMMEMBER"===c.type||"frommember"===c.type)&&h.push(c.type,c.member),("FROMLONLAT"===c.type||"fromlonlat"===c.type)&&h.push(c.type,c.coordinate.lon,c.coordinate.lat),("BYRADIUS"===d.type||"byradius"===d.type)&&h.push(d.type,d.radius,d.radiusType),("BYBOX"===d.type||"bybox"===d.type)&&h.push(d.type,d.rect.width,d.rect.height,d.rectType),h.push(e),f?.count&&h.push("COUNT",f.count.limit,...f.count.any?["ANY"]:[]),super([...h,...f?.storeDist?["STOREDIST"]:[]],g)}},aC=class extends R{constructor(a,b){super(["get",...a],b)}},aD=class extends R{constructor(a,b){super(["getbit",...a],b)}},aE=class extends R{constructor(a,b){super(["getdel",...a],b)}},aF=class extends R{constructor([a,b],c){const d=["getex",a];b&&("ex"in b&&"number"==typeof b.ex?d.push("ex",b.ex):"px"in b&&"number"==typeof b.px?d.push("px",b.px):"exat"in b&&"number"==typeof b.exat?d.push("exat",b.exat):"pxat"in b&&"number"==typeof b.pxat?d.push("pxat",b.pxat):"persist"in b&&b.persist&&d.push("persist")),super(d,c)}},aG=class extends R{constructor(a,b){super(["getrange",...a],b)}},aH=class extends R{constructor(a,b){super(["getset",...a],b)}},aI=class extends R{constructor(a,b){super(["hdel",...a],b)}},aJ=class extends R{constructor(a,b){super(["hexists",...a],b)}},aK=class extends R{constructor(a,b){const[c,d,e,f]=a,g=Array.isArray(d)?d:[d];super(["hexpire",c,e,...f?[f]:[],"FIELDS",g.length,...g],b)}},aL=class extends R{constructor(a,b){const[c,d,e,f]=a,g=Array.isArray(d)?d:[d];super(["hexpireat",c,e,...f?[f]:[],"FIELDS",g.length,...g],b)}},aM=class extends R{constructor(a,b){const[c,d]=a,e=Array.isArray(d)?d:[d];super(["hexpiretime",c,"FIELDS",e.length,...e],b)}},aN=class extends R{constructor(a,b){const[c,d]=a,e=Array.isArray(d)?d:[d];super(["hpersist",c,"FIELDS",e.length,...e],b)}},aO=class extends R{constructor(a,b){const[c,d,e,f]=a,g=Array.isArray(d)?d:[d];super(["hpexpire",c,e,...f?[f]:[],"FIELDS",g.length,...g],b)}},aP=class extends R{constructor(a,b){const[c,d,e,f]=a,g=Array.isArray(d)?d:[d];super(["hpexpireat",c,e,...f?[f]:[],"FIELDS",g.length,...g],b)}},aQ=class extends R{constructor(a,b){const[c,d]=a,e=Array.isArray(d)?d:[d];super(["hpexpiretime",c,"FIELDS",e.length,...e],b)}},aR=class extends R{constructor(a,b){const[c,d]=a,e=Array.isArray(d)?d:[d];super(["hpttl",c,"FIELDS",e.length,...e],b)}},aS=class extends R{constructor(a,b){super(["hget",...a],b)}},aT=class extends R{constructor(a,b){super(["hgetall",...a],{deserialize:a=>(function(a){if(0===a.length)return null;let b={};for(let c=0;c<a.length;c+=2){let d=a[c],e=a[c+1];try{let a=!Number.isNaN(Number(e))&&!Number.isSafeInteger(Number(e));b[d]=a?e:JSON.parse(e)}catch{b[d]=e}}return b})(a),...b})}};function aU(a,b){if(b.every(a=>null===a))return null;let c={};for(let[d,e]of a.entries())try{c[e]=JSON.parse(b[d])}catch{c[e]=b[d]}return c}var aV=class extends R{constructor([a,...b],c){super(["hmget",a,...b],{deserialize:a=>aU(b,a),...c})}},aW=class extends R{constructor([a,...b],c){super(["hgetdel",a,"FIELDS",b.length,...b],{deserialize:a=>aU(b.map(String),a),...c})}},aX=class extends R{constructor([a,b,...c],d){const e=["hgetex",a];"ex"in b&&"number"==typeof b.ex?e.push("EX",b.ex):"px"in b&&"number"==typeof b.px?e.push("PX",b.px):"exat"in b&&"number"==typeof b.exat?e.push("EXAT",b.exat):"pxat"in b&&"number"==typeof b.pxat?e.push("PXAT",b.pxat):"persist"in b&&b.persist&&e.push("PERSIST"),e.push("FIELDS",c.length,...c),super(e,{deserialize:a=>aU(c.map(String),a),...d})}},aY=class extends R{constructor(a,b){super(["hincrby",...a],b)}},aZ=class extends R{constructor(a,b){super(["hincrbyfloat",...a],b)}},a$=class extends R{constructor([a],b){super(["hkeys",a],b)}},a_=class extends R{constructor(a,b){super(["hlen",...a],b)}},a0=class extends R{constructor([a,b],c){super(["hmset",a,...Object.entries(b).flatMap(([a,b])=>[a,b])],c)}},a1=class extends R{constructor([a,b,c],d){const e=["hscan",a,b];c?.match&&e.push("match",c.match),"number"==typeof c?.count&&e.push("count",c.count),super(e,{deserialize:J,...d})}},a2=class extends R{constructor([a,b],c){super(["hset",a,...Object.entries(b).flatMap(([a,b])=>[a,b])],c)}},a3=class extends R{constructor([a,b,c],d){const e=["hsetex",a];b.conditional&&e.push(b.conditional.toUpperCase()),b.expiration&&("ex"in b.expiration&&"number"==typeof b.expiration.ex?e.push("EX",b.expiration.ex):"px"in b.expiration&&"number"==typeof b.expiration.px?e.push("PX",b.expiration.px):"exat"in b.expiration&&"number"==typeof b.expiration.exat?e.push("EXAT",b.expiration.exat):"pxat"in b.expiration&&"number"==typeof b.expiration.pxat?e.push("PXAT",b.expiration.pxat):"keepttl"in b.expiration&&b.expiration.keepttl&&e.push("KEEPTTL"));const f=Object.entries(c);for(const[a,b]of(e.push("FIELDS",f.length),f))e.push(a,b);super(e,d)}},a4=class extends R{constructor(a,b){super(["hsetnx",...a],b)}},a5=class extends R{constructor(a,b){super(["hstrlen",...a],b)}},a6=class extends R{constructor(a,b){const[c,d]=a,e=Array.isArray(d)?d:[d];super(["httl",c,"FIELDS",e.length,...e],b)}},a7=class extends R{constructor(a,b){super(["hvals",...a],b)}},a8=class extends R{constructor(a,b){super(["incr",...a],b)}},a9=class extends R{constructor(a,b){super(["incrby",...a],b)}},ba=class extends R{constructor(a,b){super(["incrbyfloat",...a],b)}},bb=class extends R{constructor(a,b){super(["JSON.ARRAPPEND",...a],b)}},bc=class extends R{constructor(a,b){super(["JSON.ARRINDEX",...a],b)}},bd=class extends R{constructor(a,b){super(["JSON.ARRINSERT",...a],b)}},be=class extends R{constructor(a,b){super(["JSON.ARRLEN",a[0],a[1]??"$"],b)}},bf=class extends R{constructor(a,b){super(["JSON.ARRPOP",...a],b)}},bg=class extends R{constructor(a,b){const c=a[1]??"$",d=a[2]??0,e=a[3]??0;super(["JSON.ARRTRIM",a[0],c,d,e],b)}},bh=class extends R{constructor(a,b){super(["JSON.CLEAR",...a],b)}},bi=class extends R{constructor(a,b){super(["JSON.DEL",...a],b)}},bj=class extends R{constructor(a,b){super(["JSON.FORGET",...a],b)}},bk=class extends R{constructor(a,b){const c=["JSON.GET"];"string"==typeof a[1]?c.push(...a):(c.push(a[0]),a[1]&&(a[1].indent&&c.push("INDENT",a[1].indent),a[1].newline&&c.push("NEWLINE",a[1].newline),a[1].space&&c.push("SPACE",a[1].space)),c.push(...a.slice(2))),super(c,b)}},bl=class extends R{constructor(a,b){super(["JSON.MERGE",...a],b)}},bm=class extends R{constructor(a,b){super(["JSON.MGET",...a[0],a[1]],b)}},bn=class extends R{constructor(a,b){const c=["JSON.MSET"];for(const b of a)c.push(b.key,b.path,b.value);super(c,b)}},bo=class extends R{constructor(a,b){super(["JSON.NUMINCRBY",...a],b)}},bp=class extends R{constructor(a,b){super(["JSON.NUMMULTBY",...a],b)}},bq=class extends R{constructor(a,b){super(["JSON.OBJKEYS",...a],b)}},br=class extends R{constructor(a,b){super(["JSON.OBJLEN",...a],b)}},bs=class extends R{constructor(a,b){super(["JSON.RESP",...a],b)}},bt=class extends R{constructor(a,b){const c=["JSON.SET",a[0],a[1],a[2]];a[3]&&(a[3].nx?c.push("NX"):a[3].xx&&c.push("XX")),super(c,b)}},bu=class extends R{constructor(a,b){super(["JSON.STRAPPEND",...a],b)}},bv=class extends R{constructor(a,b){super(["JSON.STRLEN",...a],b)}},bw=class extends R{constructor(a,b){super(["JSON.TOGGLE",...a],b)}},bx=class extends R{constructor(a,b){super(["JSON.TYPE",...a],b)}},by=class extends R{constructor(a,b){super(["keys",...a],b)}},bz=class extends R{constructor(a,b){super(["lindex",...a],b)}},bA=class extends R{constructor(a,b){super(["linsert",...a],b)}},bB=class extends R{constructor(a,b){super(["llen",...a],b)}},bC=class extends R{constructor(a,b){super(["lmove",...a],b)}},bD=class extends R{constructor(a,b){const[c,d,e,f]=a;super(["LMPOP",c,...d,e,...f?["COUNT",f]:[]],b)}},bE=class extends R{constructor(a,b){super(["lpop",...a],b)}},bF=class extends R{constructor(a,b){const c=["lpos",a[0],a[1]];"number"==typeof a[2]?.rank&&c.push("rank",a[2].rank),"number"==typeof a[2]?.count&&c.push("count",a[2].count),"number"==typeof a[2]?.maxLen&&c.push("maxLen",a[2].maxLen),super(c,b)}},bG=class extends R{constructor(a,b){super(["lpush",...a],b)}},bH=class extends R{constructor(a,b){super(["lpushx",...a],b)}},bI=class extends R{constructor(a,b){super(["lrange",...a],b)}},bJ=class extends R{constructor(a,b){super(["lrem",...a],b)}},bK=class extends R{constructor(a,b){super(["lset",...a],b)}},bL=class extends R{constructor(a,b){super(["ltrim",...a],b)}},bM=class extends R{constructor(a,b){super(["mget",...Array.isArray(a[0])?a[0]:a],b)}},bN=class extends R{constructor([a],b){super(["mset",...Object.entries(a).flatMap(([a,b])=>[a,b])],b)}},bO=class extends R{constructor([a],b){super(["msetnx",...Object.entries(a).flat()],b)}},bP=class extends R{constructor(a,b){super(["persist",...a],b)}},bQ=class extends R{constructor(a,b){super(["pexpire",...a],b)}},bR=class extends R{constructor(a,b){super(["pexpireat",...a],b)}},bS=class extends R{constructor(a,b){super(["pfadd",...a],b)}},bT=class extends R{constructor(a,b){super(["pfcount",...a],b)}},bU=class extends R{constructor(a,b){super(["pfmerge",...a],b)}},bV=class extends R{constructor(a,b){const c=["ping"];a?.[0]!==void 0&&c.push(a[0]),super(c,b)}},bW=class extends R{constructor(a,b){super(["psetex",...a],b)}},bX=class extends R{constructor(a,b){super(["pttl",...a],b)}},bY=class extends R{constructor(a,b){super(["publish",...a],b)}},bZ=class extends R{constructor(a){super(["randomkey"],a)}},b$=class extends R{constructor(a,b){super(["rename",...a],b)}},b_=class extends R{constructor(a,b){super(["renamenx",...a],b)}},b0=class extends R{constructor(a,b){super(["rpop",...a],b)}},b1=class extends R{constructor(a,b){super(["rpush",...a],b)}},b2=class extends R{constructor(a,b){super(["rpushx",...a],b)}},b3=class extends R{constructor(a,b){super(["sadd",...a],b)}},b4=class extends R{constructor([a,b],c){const d=["scan",a];b?.match&&d.push("match",b.match),"number"==typeof b?.count&&d.push("count",b.count),b&&"withType"in b&&!0===b.withType?d.push("withtype"):b&&"type"in b&&b.type&&b.type.length>0&&d.push("type",b.type),super(d,{deserialize:b?.withType?K:J,...c})}},b5=class extends R{constructor(a,b){super(["scard",...a],b)}},b6=class extends R{constructor(a,b){super(["script","exists",...a],{deserialize:a=>a,...b})}},b7=class extends R{constructor([a],b){const c=["script","flush"];a?.sync?c.push("sync"):a?.async&&c.push("async"),super(c,b)}},b8=class extends R{constructor(a,b){super(["script","load",...a],b)}},b9=class extends R{constructor(a,b){super(["sdiff",...a],b)}},ca=class extends R{constructor(a,b){super(["sdiffstore",...a],b)}},cb=class extends R{constructor([a,b,c],d){const e=["set",a,b];c&&("nx"in c&&c.nx?e.push("nx"):"xx"in c&&c.xx&&e.push("xx"),"get"in c&&c.get&&e.push("get"),"ex"in c&&"number"==typeof c.ex?e.push("ex",c.ex):"px"in c&&"number"==typeof c.px?e.push("px",c.px):"exat"in c&&"number"==typeof c.exat?e.push("exat",c.exat):"pxat"in c&&"number"==typeof c.pxat?e.push("pxat",c.pxat):"keepTtl"in c&&c.keepTtl&&e.push("keepTtl")),super(e,d)}},cc=class extends R{constructor(a,b){super(["setbit",...a],b)}},cd=class extends R{constructor(a,b){super(["setex",...a],b)}},ce=class extends R{constructor(a,b){super(["setnx",...a],b)}},cf=class extends R{constructor(a,b){super(["setrange",...a],b)}},cg=class extends R{constructor(a,b){super(["sinter",...a],b)}},ch=class extends R{constructor(a,b){super(["sinterstore",...a],b)}},ci=class extends R{constructor(a,b){super(["sismember",...a],b)}},cj=class extends R{constructor(a,b){super(["smembers",...a],b)}},ck=class extends R{constructor(a,b){super(["smismember",a[0],...a[1]],b)}},cl=class extends R{constructor(a,b){super(["smove",...a],b)}},cm=class extends R{constructor([a,b],c){const d=["spop",a];"number"==typeof b&&d.push(b),super(d,c)}},cn=class extends R{constructor([a,b],c){const d=["srandmember",a];"number"==typeof b&&d.push(b),super(d,c)}},co=class extends R{constructor(a,b){super(["srem",...a],b)}},cp=class extends R{constructor([a,b,c],d){const e=["sscan",a,b];c?.match&&e.push("match",c.match),"number"==typeof c?.count&&e.push("count",c.count),super(e,{deserialize:J,...d})}},cq=class extends R{constructor(a,b){super(["strlen",...a],b)}},cr=class extends R{constructor(a,b){super(["sunion",...a],b)}},cs=class extends R{constructor(a,b){super(["sunionstore",...a],b)}},ct=class extends R{constructor(a){super(["time"],a)}},cu=class extends R{constructor(a,b){super(["touch",...a],b)}},cv=class extends R{constructor(a,b){super(["ttl",...a],b)}},cw=class extends R{constructor(a,b){super(["type",...a],b)}},cx=class extends R{constructor(a,b){super(["unlink",...a],b)}},cy=class extends R{constructor([a,b,c],d){super(["XACK",a,b,...Array.isArray(c)?[...c]:[c]],d)}},cz=class extends R{constructor([a,b,c,...d],e){const f=["XACKDEL",a,b];f.push(c.toUpperCase()),f.push("IDS",d.length,...d),super(f,e)}},cA=class extends R{constructor([a,b,c,d],e){const f=["XADD",a];for(const[a,e]of(d&&(d.nomkStream&&f.push("NOMKSTREAM"),d.trim&&(f.push(d.trim.type,d.trim.comparison,d.trim.threshold),void 0!==d.trim.limit&&f.push("LIMIT",d.trim.limit))),f.push(b),Object.entries(c)))f.push(a,e);super(f,e)}},cB=class extends R{constructor([a,b,c,d,e,f],g){const h=[];f?.count&&h.push("COUNT",f.count),f?.justId&&h.push("JUSTID"),super(["XAUTOCLAIM",a,b,c,d,e,...h],g)}},cC=class extends R{constructor([a,b,c,d,e,f],g){const h=Array.isArray(e)?[...e]:[e],i=[];f?.idleMS&&i.push("IDLE",f.idleMS),f?.idleMS&&i.push("TIME",f.timeMS),f?.retryCount&&i.push("RETRYCOUNT",f.retryCount),f?.force&&i.push("FORCE"),f?.justId&&i.push("JUSTID"),f?.lastId&&i.push("LASTID",f.lastId),super(["XCLAIM",a,b,c,d,...h,...i],g)}},cD=class extends R{constructor([a,b],c){super(["XDEL",a,...Array.isArray(b)?[...b]:[b]],c)}},cE=class extends R{constructor([a,b,...c],d){const e=["XDELEX",a];b&&e.push(b.toUpperCase()),e.push("IDS",c.length,...c),super(e,d)}},cF=class extends R{constructor([a,b],c){const d=["XGROUP"];switch(b.type){case"CREATE":d.push("CREATE",a,b.group,b.id),b.options&&(b.options.MKSTREAM&&d.push("MKSTREAM"),void 0!==b.options.ENTRIESREAD&&d.push("ENTRIESREAD",b.options.ENTRIESREAD.toString()));break;case"CREATECONSUMER":d.push("CREATECONSUMER",a,b.group,b.consumer);break;case"DELCONSUMER":d.push("DELCONSUMER",a,b.group,b.consumer);break;case"DESTROY":d.push("DESTROY",a,b.group);break;case"SETID":d.push("SETID",a,b.group,b.id),b.options?.ENTRIESREAD!==void 0&&d.push("ENTRIESREAD",b.options.ENTRIESREAD.toString());break;default:throw Error("Invalid XGROUP")}super(d,c)}},cG=class extends R{constructor([a,b],c){const d=[];"CONSUMERS"===b.type?d.push("CONSUMERS",a,b.group):d.push("GROUPS",a),super(["XINFO",...d],c)}},cH=class extends R{constructor(a,b){super(["XLEN",...a],b)}},cI=class extends R{constructor([a,b,c,d,e,f],g){const h=f?.consumer===void 0?[]:Array.isArray(f.consumer)?[...f.consumer]:[f.consumer];super(["XPENDING",a,b,...f?.idleTime?["IDLE",f.idleTime]:[],c,d,e,...h],g)}},cJ=class extends R{constructor([a,b,c,d],e){const f=["XRANGE",a,b,c];"number"==typeof d&&f.push("COUNT",d),super(f,{deserialize:a=>(function(a){let b={};for(let c of a)for(let a=0;a<c.length;a+=2){let d=c[a],e=c[a+1];d in b||(b[d]={});for(let a=0;a<e.length;a+=2){let c=e[a],f=e[a+1];try{b[d][c]=JSON.parse(f)}catch{b[d][c]=f}}}return b})(a),...e})}},cK=class extends R{constructor([a,b,c],d){if(Array.isArray(a)&&Array.isArray(b)&&a.length!==b.length)throw Error("ERR Unbalanced XREAD list of streams: for each stream key an ID or '$' must be specified");const e=[];"number"==typeof c?.count&&e.push("COUNT",c.count),"number"==typeof c?.blockMS&&e.push("BLOCK",c.blockMS),e.push("STREAMS",...Array.isArray(a)?[...a]:[a],...Array.isArray(b)?[...b]:[b]),super(["XREAD",...e],d)}},cL=class extends R{constructor([a,b,c,d,e],f){if(Array.isArray(c)&&Array.isArray(d)&&c.length!==d.length)throw Error("ERR Unbalanced XREADGROUP list of streams: for each stream key an ID or '$' must be specified");const g=[];"number"==typeof e?.count&&g.push("COUNT",e.count),"number"==typeof e?.blockMS&&g.push("BLOCK",e.blockMS),"boolean"==typeof e?.NOACK&&e.NOACK&&g.push("NOACK"),g.push("STREAMS",...Array.isArray(c)?[...c]:[c],...Array.isArray(d)?[...d]:[d]),super(["XREADGROUP","GROUP",a,b,...g],f)}},cM=class extends R{constructor([a,b,c,d],e){const f=["XREVRANGE",a,b,c];"number"==typeof d&&f.push("COUNT",d),super(f,{deserialize:a=>(function(a){let b={};for(let c of a)for(let a=0;a<c.length;a+=2){let d=c[a],e=c[a+1];d in b||(b[d]={});for(let a=0;a<e.length;a+=2){let c=e[a],f=e[a+1];try{b[d][c]=JSON.parse(f)}catch{b[d][c]=f}}}return b})(a),...e})}},cN=class extends R{constructor([a,b],c){const{limit:d,strategy:e,threshold:f,exactness:g="~"}=b;super(["XTRIM",a,e,g,f,...d?["LIMIT",d]:[]],c)}},cO=class extends R{constructor([a,b,...c],d){const e=["zadd",a];"nx"in b&&b.nx?e.push("nx"):"xx"in b&&b.xx&&e.push("xx"),"ch"in b&&b.ch&&e.push("ch"),"incr"in b&&b.incr&&e.push("incr"),"lt"in b&&b.lt?e.push("lt"):"gt"in b&&b.gt&&e.push("gt"),"score"in b&&"member"in b&&e.push(b.score,b.member),e.push(...c.flatMap(({score:a,member:b})=>[a,b])),super(e,d)}},cP=class extends R{constructor(a,b){super(["zcard",...a],b)}},cQ=class extends R{constructor(a,b){super(["zcount",...a],b)}},cR=class extends R{constructor(a,b){super(["zincrby",...a],b)}},cS=class extends R{constructor([a,b,c,d],e){const f=["zinterstore",a,b];Array.isArray(c)?f.push(...c):f.push(c),d&&("weights"in d&&d.weights?f.push("weights",...d.weights):"weight"in d&&"number"==typeof d.weight&&f.push("weights",d.weight),"aggregate"in d&&f.push("aggregate",d.aggregate)),super(f,e)}},cT=class extends R{constructor(a,b){super(["zlexcount",...a],b)}},cU=class extends R{constructor([a,b],c){const d=["zpopmax",a];"number"==typeof b&&d.push(b),super(d,c)}},cV=class extends R{constructor([a,b],c){const d=["zpopmin",a];"number"==typeof b&&d.push(b),super(d,c)}},cW=class extends R{constructor([a,b,c,d],e){const f=["zrange",a,b,c];d?.byScore&&f.push("byscore"),d?.byLex&&f.push("bylex"),d?.rev&&f.push("rev"),d?.count!==void 0&&void 0!==d.offset&&f.push("limit",d.offset,d.count),d?.withScores&&f.push("withscores"),super(f,e)}},cX=class extends R{constructor(a,b){super(["zrank",...a],b)}},cY=class extends R{constructor(a,b){super(["zrem",...a],b)}},cZ=class extends R{constructor(a,b){super(["zremrangebylex",...a],b)}},c$=class extends R{constructor(a,b){super(["zremrangebyrank",...a],b)}},c_=class extends R{constructor(a,b){super(["zremrangebyscore",...a],b)}},c0=class extends R{constructor(a,b){super(["zrevrank",...a],b)}},c1=class extends R{constructor([a,b,c],d){const e=["zscan",a,b];c?.match&&e.push("match",c.match),"number"==typeof c?.count&&e.push("count",c.count),super(e,{deserialize:J,...d})}},c2=class extends R{constructor(a,b){super(["zscore",...a],b)}},c3=class extends R{constructor([a,b,c],d){const e=["zunion",a];Array.isArray(b)?e.push(...b):e.push(b),c&&("weights"in c&&c.weights?e.push("weights",...c.weights):"weight"in c&&"number"==typeof c.weight&&e.push("weights",c.weight),"aggregate"in c&&e.push("aggregate",c.aggregate),c.withScores&&e.push("withscores")),super(e,d)}},c4=class extends R{constructor([a,b,c,d],e){const f=["zunionstore",a,b];Array.isArray(c)?f.push(...c):f.push(c),d&&("weights"in d&&d.weights?f.push("weights",...d.weights):"weight"in d&&"number"==typeof d.weight&&f.push("weights",d.weight),"aggregate"in d&&f.push("aggregate",d.aggregate)),super(f,e)}},c5=class extends R{constructor(a,b){super(["zdiffstore",...a],b)}},c6=class extends R{constructor(a,b){const[c,d]=a;super(["zmscore",c,...d],b)}},c7=class{client;commands;commandOptions;multiExec;constructor(a){if(this.client=a.client,this.commands=[],this.commandOptions=a.commandOptions,this.multiExec=a.multiExec??!1,this.commandOptions?.latencyLogging){const a=this.exec.bind(this);this.exec=async b=>{let c=performance.now(),d=await (b?a(b):a()),e=(performance.now()-c).toFixed(2);return console.log(`Latency for \x1b[38;2;19;185;39m${this.multiExec?["MULTI-EXEC"]:["PIPELINE"].toString().toUpperCase()}\x1b[0m: \x1b[38;2;0;255;255m${e} ms\x1b[0m`),d}}}exec=async a=>{if(0===this.commands.length)throw Error("Pipeline is empty");let b=this.multiExec?["multi-exec"]:["pipeline"],c=await this.client.request({path:b,body:Object.values(this.commands).map(a=>a.command)});return a?.keepErrors?c.map(({error:a,result:b},c)=>({error:a,result:this.commands[c].deserialize(b)})):c.map(({error:a,result:b},c)=>{if(a)throw new F(`Command ${c+1} [ ${this.commands[c].command[0]} ] failed: ${a}`);return this.commands[c].deserialize(b)})};length(){return this.commands.length}chain(a){return this.commands.push(a),this}append=(...a)=>this.chain(new T(a,this.commandOptions));bitcount=(...a)=>this.chain(new U(a,this.commandOptions));bitfield=(...a)=>new V(a,this.client,this.commandOptions,this.chain.bind(this));bitop=(a,b,c,...d)=>this.chain(new W([a,b,c,...d],this.commandOptions));bitpos=(...a)=>this.chain(new X(a,this.commandOptions));clientSetinfo=(...a)=>this.chain(new Y(a,this.commandOptions));copy=(...a)=>this.chain(new Z(a,this.commandOptions));zdiffstore=(...a)=>this.chain(new c5(a,this.commandOptions));dbsize=()=>this.chain(new $(this.commandOptions));decr=(...a)=>this.chain(new _(a,this.commandOptions));decrby=(...a)=>this.chain(new aa(a,this.commandOptions));del=(...a)=>this.chain(new ab(a,this.commandOptions));echo=(...a)=>this.chain(new ac(a,this.commandOptions));evalRo=(...a)=>this.chain(new ad(a,this.commandOptions));eval=(...a)=>this.chain(new ae(a,this.commandOptions));evalshaRo=(...a)=>this.chain(new af(a,this.commandOptions));evalsha=(...a)=>this.chain(new ag(a,this.commandOptions));exists=(...a)=>this.chain(new ai(a,this.commandOptions));expire=(...a)=>this.chain(new aj(a,this.commandOptions));expireat=(...a)=>this.chain(new ak(a,this.commandOptions));flushall=a=>this.chain(new an(a,this.commandOptions));flushdb=(...a)=>this.chain(new ao(a,this.commandOptions));geoadd=(...a)=>this.chain(new aw(a,this.commandOptions));geodist=(...a)=>this.chain(new ax(a,this.commandOptions));geopos=(...a)=>this.chain(new az(a,this.commandOptions));geohash=(...a)=>this.chain(new ay(a,this.commandOptions));geosearch=(...a)=>this.chain(new aA(a,this.commandOptions));geosearchstore=(...a)=>this.chain(new aB(a,this.commandOptions));get=(...a)=>this.chain(new aC(a,this.commandOptions));getbit=(...a)=>this.chain(new aD(a,this.commandOptions));getdel=(...a)=>this.chain(new aE(a,this.commandOptions));getex=(...a)=>this.chain(new aF(a,this.commandOptions));getrange=(...a)=>this.chain(new aG(a,this.commandOptions));getset=(a,b)=>this.chain(new aH([a,b],this.commandOptions));hdel=(...a)=>this.chain(new aI(a,this.commandOptions));hexists=(...a)=>this.chain(new aJ(a,this.commandOptions));hexpire=(...a)=>this.chain(new aK(a,this.commandOptions));hexpireat=(...a)=>this.chain(new aL(a,this.commandOptions));hexpiretime=(...a)=>this.chain(new aM(a,this.commandOptions));httl=(...a)=>this.chain(new a6(a,this.commandOptions));hpexpire=(...a)=>this.chain(new aO(a,this.commandOptions));hpexpireat=(...a)=>this.chain(new aP(a,this.commandOptions));hpexpiretime=(...a)=>this.chain(new aQ(a,this.commandOptions));hpttl=(...a)=>this.chain(new aR(a,this.commandOptions));hpersist=(...a)=>this.chain(new aN(a,this.commandOptions));hget=(...a)=>this.chain(new aS(a,this.commandOptions));hgetall=(...a)=>this.chain(new aT(a,this.commandOptions));hgetdel=(...a)=>this.chain(new aW(a,this.commandOptions));hgetex=(...a)=>this.chain(new aX(a,this.commandOptions));hincrby=(...a)=>this.chain(new aY(a,this.commandOptions));hincrbyfloat=(...a)=>this.chain(new aZ(a,this.commandOptions));hkeys=(...a)=>this.chain(new a$(a,this.commandOptions));hlen=(...a)=>this.chain(new a_(a,this.commandOptions));hmget=(...a)=>this.chain(new aV(a,this.commandOptions));hmset=(a,b)=>this.chain(new a0([a,b],this.commandOptions));hrandfield=(a,b,c)=>this.chain(new S([a,b,c],this.commandOptions));hscan=(...a)=>this.chain(new a1(a,this.commandOptions));hset=(a,b)=>this.chain(new a2([a,b],this.commandOptions));hsetex=(...a)=>this.chain(new a3(a,this.commandOptions));hsetnx=(a,b,c)=>this.chain(new a4([a,b,c],this.commandOptions));hstrlen=(...a)=>this.chain(new a5(a,this.commandOptions));hvals=(...a)=>this.chain(new a7(a,this.commandOptions));incr=(...a)=>this.chain(new a8(a,this.commandOptions));incrby=(...a)=>this.chain(new a9(a,this.commandOptions));incrbyfloat=(...a)=>this.chain(new ba(a,this.commandOptions));keys=(...a)=>this.chain(new by(a,this.commandOptions));lindex=(...a)=>this.chain(new bz(a,this.commandOptions));linsert=(a,b,c,d)=>this.chain(new bA([a,b,c,d],this.commandOptions));llen=(...a)=>this.chain(new bB(a,this.commandOptions));lmove=(...a)=>this.chain(new bC(a,this.commandOptions));lpop=(...a)=>this.chain(new bE(a,this.commandOptions));lmpop=(...a)=>this.chain(new bD(a,this.commandOptions));lpos=(...a)=>this.chain(new bF(a,this.commandOptions));lpush=(a,...b)=>this.chain(new bG([a,...b],this.commandOptions));lpushx=(a,...b)=>this.chain(new bH([a,...b],this.commandOptions));lrange=(...a)=>this.chain(new bI(a,this.commandOptions));lrem=(a,b,c)=>this.chain(new bJ([a,b,c],this.commandOptions));lset=(a,b,c)=>this.chain(new bK([a,b,c],this.commandOptions));ltrim=(...a)=>this.chain(new bL(a,this.commandOptions));mget=(...a)=>this.chain(new bM(a,this.commandOptions));mset=a=>this.chain(new bN([a],this.commandOptions));msetnx=a=>this.chain(new bO([a],this.commandOptions));persist=(...a)=>this.chain(new bP(a,this.commandOptions));pexpire=(...a)=>this.chain(new bQ(a,this.commandOptions));pexpireat=(...a)=>this.chain(new bR(a,this.commandOptions));pfadd=(...a)=>this.chain(new bS(a,this.commandOptions));pfcount=(...a)=>this.chain(new bT(a,this.commandOptions));pfmerge=(...a)=>this.chain(new bU(a,this.commandOptions));ping=a=>this.chain(new bV(a,this.commandOptions));psetex=(a,b,c)=>this.chain(new bW([a,b,c],this.commandOptions));pttl=(...a)=>this.chain(new bX(a,this.commandOptions));publish=(...a)=>this.chain(new bY(a,this.commandOptions));randomkey=()=>this.chain(new bZ(this.commandOptions));rename=(...a)=>this.chain(new b$(a,this.commandOptions));renamenx=(...a)=>this.chain(new b_(a,this.commandOptions));rpop=(...a)=>this.chain(new b0(a,this.commandOptions));rpush=(a,...b)=>this.chain(new b1([a,...b],this.commandOptions));rpushx=(a,...b)=>this.chain(new b2([a,...b],this.commandOptions));sadd=(a,b,...c)=>this.chain(new b3([a,b,...c],this.commandOptions));scan=(...a)=>this.chain(new b4(a,this.commandOptions));scard=(...a)=>this.chain(new b5(a,this.commandOptions));scriptExists=(...a)=>this.chain(new b6(a,this.commandOptions));scriptFlush=(...a)=>this.chain(new b7(a,this.commandOptions));scriptLoad=(...a)=>this.chain(new b8(a,this.commandOptions));sdiff=(...a)=>this.chain(new b9(a,this.commandOptions));sdiffstore=(...a)=>this.chain(new ca(a,this.commandOptions));set=(a,b,c)=>this.chain(new cb([a,b,c],this.commandOptions));setbit=(...a)=>this.chain(new cc(a,this.commandOptions));setex=(a,b,c)=>this.chain(new cd([a,b,c],this.commandOptions));setnx=(a,b)=>this.chain(new ce([a,b],this.commandOptions));setrange=(...a)=>this.chain(new cf(a,this.commandOptions));sinter=(...a)=>this.chain(new cg(a,this.commandOptions));sinterstore=(...a)=>this.chain(new ch(a,this.commandOptions));sismember=(a,b)=>this.chain(new ci([a,b],this.commandOptions));smembers=(...a)=>this.chain(new cj(a,this.commandOptions));smismember=(a,b)=>this.chain(new ck([a,b],this.commandOptions));smove=(a,b,c)=>this.chain(new cl([a,b,c],this.commandOptions));spop=(...a)=>this.chain(new cm(a,this.commandOptions));srandmember=(...a)=>this.chain(new cn(a,this.commandOptions));srem=(a,...b)=>this.chain(new co([a,...b],this.commandOptions));sscan=(...a)=>this.chain(new cp(a,this.commandOptions));strlen=(...a)=>this.chain(new cq(a,this.commandOptions));sunion=(...a)=>this.chain(new cr(a,this.commandOptions));sunionstore=(...a)=>this.chain(new cs(a,this.commandOptions));time=()=>this.chain(new ct(this.commandOptions));touch=(...a)=>this.chain(new cu(a,this.commandOptions));ttl=(...a)=>this.chain(new cv(a,this.commandOptions));type=(...a)=>this.chain(new cw(a,this.commandOptions));unlink=(...a)=>this.chain(new cx(a,this.commandOptions));zadd=(...a)=>("score"in a[1],this.chain(new cO([a[0],a[1],...a.slice(2)],this.commandOptions)));xadd=(...a)=>this.chain(new cA(a,this.commandOptions));xack=(...a)=>this.chain(new cy(a,this.commandOptions));xackdel=(...a)=>this.chain(new cz(a,this.commandOptions));xdel=(...a)=>this.chain(new cD(a,this.commandOptions));xdelex=(...a)=>this.chain(new cE(a,this.commandOptions));xgroup=(...a)=>this.chain(new cF(a,this.commandOptions));xread=(...a)=>this.chain(new cK(a,this.commandOptions));xreadgroup=(...a)=>this.chain(new cL(a,this.commandOptions));xinfo=(...a)=>this.chain(new cG(a,this.commandOptions));xlen=(...a)=>this.chain(new cH(a,this.commandOptions));xpending=(...a)=>this.chain(new cI(a,this.commandOptions));xclaim=(...a)=>this.chain(new cC(a,this.commandOptions));xautoclaim=(...a)=>this.chain(new cB(a,this.commandOptions));xtrim=(...a)=>this.chain(new cN(a,this.commandOptions));xrange=(...a)=>this.chain(new cJ(a,this.commandOptions));xrevrange=(...a)=>this.chain(new cM(a,this.commandOptions));zcard=(...a)=>this.chain(new cP(a,this.commandOptions));zcount=(...a)=>this.chain(new cQ(a,this.commandOptions));zincrby=(a,b,c)=>this.chain(new cR([a,b,c],this.commandOptions));zinterstore=(...a)=>this.chain(new cS(a,this.commandOptions));zlexcount=(...a)=>this.chain(new cT(a,this.commandOptions));zmscore=(...a)=>this.chain(new c6(a,this.commandOptions));zpopmax=(...a)=>this.chain(new cU(a,this.commandOptions));zpopmin=(...a)=>this.chain(new cV(a,this.commandOptions));zrange=(...a)=>this.chain(new cW(a,this.commandOptions));zrank=(a,b)=>this.chain(new cX([a,b],this.commandOptions));zrem=(a,...b)=>this.chain(new cY([a,...b],this.commandOptions));zremrangebylex=(...a)=>this.chain(new cZ(a,this.commandOptions));zremrangebyrank=(...a)=>this.chain(new c$(a,this.commandOptions));zremrangebyscore=(...a)=>this.chain(new c_(a,this.commandOptions));zrevrank=(a,b)=>this.chain(new c0([a,b],this.commandOptions));zscan=(...a)=>this.chain(new c1(a,this.commandOptions));zscore=(a,b)=>this.chain(new c2([a,b],this.commandOptions));zunionstore=(...a)=>this.chain(new c4(a,this.commandOptions));zunion=(...a)=>this.chain(new c3(a,this.commandOptions));get json(){return{arrappend:(...a)=>this.chain(new bb(a,this.commandOptions)),arrindex:(...a)=>this.chain(new bc(a,this.commandOptions)),arrinsert:(...a)=>this.chain(new bd(a,this.commandOptions)),arrlen:(...a)=>this.chain(new be(a,this.commandOptions)),arrpop:(...a)=>this.chain(new bf(a,this.commandOptions)),arrtrim:(...a)=>this.chain(new bg(a,this.commandOptions)),clear:(...a)=>this.chain(new bh(a,this.commandOptions)),del:(...a)=>this.chain(new bi(a,this.commandOptions)),forget:(...a)=>this.chain(new bj(a,this.commandOptions)),get:(...a)=>this.chain(new bk(a,this.commandOptions)),merge:(...a)=>this.chain(new bl(a,this.commandOptions)),mget:(...a)=>this.chain(new bm(a,this.commandOptions)),mset:(...a)=>this.chain(new bn(a,this.commandOptions)),numincrby:(...a)=>this.chain(new bo(a,this.commandOptions)),nummultby:(...a)=>this.chain(new bp(a,this.commandOptions)),objkeys:(...a)=>this.chain(new bq(a,this.commandOptions)),objlen:(...a)=>this.chain(new br(a,this.commandOptions)),resp:(...a)=>this.chain(new bs(a,this.commandOptions)),set:(...a)=>this.chain(new bt(a,this.commandOptions)),strappend:(...a)=>this.chain(new bu(a,this.commandOptions)),strlen:(...a)=>this.chain(new bv(a,this.commandOptions)),toggle:(...a)=>this.chain(new bw(a,this.commandOptions)),type:(...a)=>this.chain(new bx(a,this.commandOptions))}}get functions(){return{load:(...a)=>this.chain(new at(a,this.commandOptions)),list:(...a)=>this.chain(new ar(a,this.commandOptions)),delete:(...a)=>this.chain(new ap(a,this.commandOptions)),flush:()=>this.chain(new aq(this.commandOptions)),stats:()=>this.chain(new au(this.commandOptions)),call:(...a)=>this.chain(new al(a,this.commandOptions)),callRo:(...a)=>this.chain(new am(a,this.commandOptions))}}},c8=new Set(["scan","keys","flushdb","flushall","dbsize","hscan","hgetall","hkeys","lrange","sscan","smembers","xrange","xrevrange","zscan","zrange","exec"]),c9=class{pipelinePromises=new WeakMap;activePipeline=null;indexInCurrentPipeline=0;redis;pipeline;pipelineCounter=0;constructor(a){this.redis=a,this.pipeline=a.pipeline()}async withAutoPipeline(a){let b=this.activePipeline??this.redis.pipeline();this.activePipeline||(this.activePipeline=b,this.indexInCurrentPipeline=0);let c=this.indexInCurrentPipeline++;a(b);let d=this.deferExecution().then(()=>{if(!this.pipelinePromises.has(b)){let a=b.exec({keepErrors:!0});this.pipelineCounter+=1,this.pipelinePromises.set(b,a),this.activePipeline=null}return this.pipelinePromises.get(b)}),e=(await d)[c];if(e.error)throw new F(`Command failed: ${e.error}`);return e.result}async deferExecution(){await Promise.resolve(),await Promise.resolve()}},da=class extends R{constructor(a,b){super([],{...b,headers:{Accept:"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"},path:["psubscribe",...a],streamOptions:{isStreaming:!0,onMessage:b?.streamOptions?.onMessage,signal:b?.streamOptions?.signal}})}},db=class extends EventTarget{subscriptions;client;listeners;opts;constructor(a,b,c=!1,d){for(const e of(super(),this.client=a,this.subscriptions=new Map,this.listeners=new Map,this.opts=d,b))c?this.subscribeToPattern(e):this.subscribeToChannel(e)}subscribeToChannel(a){let b=new AbortController,c=new dc([a],{streamOptions:{signal:b.signal,onMessage:a=>this.handleMessage(a,!1)}});c.exec(this.client).catch(a=>{"AbortError"!==a.name&&this.dispatchToListeners("error",a)}),this.subscriptions.set(a,{command:c,controller:b,isPattern:!1})}subscribeToPattern(a){let b=new AbortController,c=new da([a],{streamOptions:{signal:b.signal,onMessage:a=>this.handleMessage(a,!0)}});c.exec(this.client).catch(a=>{"AbortError"!==a.name&&this.dispatchToListeners("error",a)}),this.subscriptions.set(a,{command:c,controller:b,isPattern:!0})}handleMessage(a,b){let c=a.replace(/^data:\s*/,""),d=c.indexOf(","),e=c.indexOf(",",d+1),f=b?c.indexOf(",",e+1):-1;if(-1!==d&&-1!==e){let a=c.slice(0,d);if(b&&"pmessage"===a&&-1!==f){let a=c.slice(d+1,e),b=c.slice(e+1,f),g=c.slice(f+1);try{let c=this.opts?.automaticDeserialization===!1?g:JSON.parse(g);this.dispatchToListeners("pmessage",{pattern:a,channel:b,message:c}),this.dispatchToListeners(`pmessage:${a}`,{pattern:a,channel:b,message:c})}catch(a){this.dispatchToListeners("error",Error(`Failed to parse message: ${a}`))}}else{let b=c.slice(d+1,e),f=c.slice(e+1);try{if("subscribe"===a||"psubscribe"===a||"unsubscribe"===a||"punsubscribe"===a){let b=Number.parseInt(f);this.dispatchToListeners(a,b)}else{let c=this.opts?.automaticDeserialization===!1?f:dd(f);this.dispatchToListeners(a,{channel:b,message:c}),this.dispatchToListeners(`${a}:${b}`,{channel:b,message:c})}}catch(a){this.dispatchToListeners("error",Error(`Failed to parse message: ${a}`))}}}}dispatchToListeners(a,b){let c=this.listeners.get(a);if(c)for(let a of c)a(b)}on(a,b){this.listeners.has(a)||this.listeners.set(a,new Set),this.listeners.get(a)?.add(b)}removeAllListeners(){this.listeners.clear()}async unsubscribe(a){if(a)for(let b of a){let a=this.subscriptions.get(b);if(a){try{a.controller.abort()}catch{}this.subscriptions.delete(b)}}else{for(let a of this.subscriptions.values())try{a.controller.abort()}catch{}this.subscriptions.clear(),this.removeAllListeners()}}getSubscribedChannels(){return[...this.subscriptions.keys()]}},dc=class extends R{constructor(a,b){super([],{...b,headers:{Accept:"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"},path:["subscribe",...a],streamOptions:{isStreaming:!0,onMessage:b?.streamOptions?.onMessage,signal:b?.streamOptions?.signal}})}},dd=a=>{try{return JSON.parse(a)}catch{return a}},de=class{script;sha1;redis;constructor(a,b){this.redis=a,this.script=b,this.sha1="",this.init(b)}async init(a){this.sha1||(this.sha1=await this.digest(a))}async eval(a,b){return await this.init(this.script),await this.redis.eval(this.script,a,b)}async evalsha(a,b){return await this.init(this.script),await this.redis.evalsha(this.sha1,a,b)}async exec(a,b){return await this.init(this.script),await this.redis.evalsha(this.sha1,a,b).catch(async c=>{if(c instanceof Error&&c.message.toLowerCase().includes("noscript"))return await this.redis.eval(this.script,a,b);throw c})}async digest(a){let b=new TextEncoder().encode(a);return[...new Uint8Array(await A.digest("SHA-1",b))].map(a=>a.toString(16).padStart(2,"0")).join("")}},df=class{script;sha1;redis;constructor(a,b){this.redis=a,this.sha1="",this.script=b,this.init(b)}async init(a){this.sha1||(this.sha1=await this.digest(a))}async evalRo(a,b){return await this.init(this.script),await this.redis.evalRo(this.script,a,b)}async evalshaRo(a,b){return await this.init(this.script),await this.redis.evalshaRo(this.sha1,a,b)}async exec(a,b){return await this.init(this.script),await this.redis.evalshaRo(this.sha1,a,b).catch(async c=>{if(c instanceof Error&&c.message.toLowerCase().includes("noscript"))return await this.redis.evalRo(this.script,a,b);throw c})}async digest(a){let b=new TextEncoder().encode(a);return[...new Uint8Array(await A.digest("SHA-1",b))].map(a=>a.toString(16).padStart(2,"0")).join("")}},dg=class{client;opts;enableTelemetry;enableAutoPipelining;constructor(a,b){this.client=a,this.opts=b,this.enableTelemetry=b?.enableTelemetry??!0,b?.readYourWrites===!1&&(this.client.readYourWrites=!1),this.enableAutoPipelining=b?.enableAutoPipelining??!0}get readYourWritesSyncToken(){return this.client.upstashSyncToken}set readYourWritesSyncToken(a){this.client.upstashSyncToken=a}get json(){return{arrappend:(...a)=>new bb(a,this.opts).exec(this.client),arrindex:(...a)=>new bc(a,this.opts).exec(this.client),arrinsert:(...a)=>new bd(a,this.opts).exec(this.client),arrlen:(...a)=>new be(a,this.opts).exec(this.client),arrpop:(...a)=>new bf(a,this.opts).exec(this.client),arrtrim:(...a)=>new bg(a,this.opts).exec(this.client),clear:(...a)=>new bh(a,this.opts).exec(this.client),del:(...a)=>new bi(a,this.opts).exec(this.client),forget:(...a)=>new bj(a,this.opts).exec(this.client),get:(...a)=>new bk(a,this.opts).exec(this.client),merge:(...a)=>new bl(a,this.opts).exec(this.client),mget:(...a)=>new bm(a,this.opts).exec(this.client),mset:(...a)=>new bn(a,this.opts).exec(this.client),numincrby:(...a)=>new bo(a,this.opts).exec(this.client),nummultby:(...a)=>new bp(a,this.opts).exec(this.client),objkeys:(...a)=>new bq(a,this.opts).exec(this.client),objlen:(...a)=>new br(a,this.opts).exec(this.client),resp:(...a)=>new bs(a,this.opts).exec(this.client),set:(...a)=>new bt(a,this.opts).exec(this.client),strappend:(...a)=>new bu(a,this.opts).exec(this.client),strlen:(...a)=>new bv(a,this.opts).exec(this.client),toggle:(...a)=>new bw(a,this.opts).exec(this.client),type:(...a)=>new bx(a,this.opts).exec(this.client)}}get functions(){return{load:(...a)=>new at(a,this.opts).exec(this.client),list:(...a)=>new ar(a,this.opts).exec(this.client),delete:(...a)=>new ap(a,this.opts).exec(this.client),flush:()=>new aq(this.opts).exec(this.client),stats:()=>new au(this.opts).exec(this.client),call:(...a)=>new al(a,this.opts).exec(this.client),callRo:(...a)=>new am(a,this.opts).exec(this.client)}}use=a=>{let b=this.client.request.bind(this.client);this.client.request=c=>a(c,b)};addTelemetry=a=>{if(this.enableTelemetry)try{this.client.mergeTelemetry(a)}catch{}};createScript(a,b){return b?.readonly?new df(this,a):new de(this,a)}pipeline=()=>new c7({client:this.client,commandOptions:this.opts,multiExec:!1});autoPipeline=()=>(function a(b,c="root"){return b.autoPipelineExecutor||(b.autoPipelineExecutor=new c9(b)),new Proxy(b,{get:(b,d)=>{if("pipelineCounter"===d)return b.autoPipelineExecutor.pipelineCounter;if("root"===c&&"json"===d)return a(b,"json");if("root"===c&&"functions"===d)return a(b,"functions");if("root"===c){let a=d in b&&!(d in b.autoPipelineExecutor.pipeline),c=c8.has(d);if(a||c)return b[d]}let e=b.autoPipelineExecutor.pipeline,f="json"===c?e.json[d]:"functions"===c?e.functions[d]:e[d];return"function"==typeof f?(...a)=>b.autoPipelineExecutor.withAutoPipeline(b=>{("json"===c?b.json[d]:"functions"===c?b.functions[d]:b[d])(...a)}):f}})})(this);multi=()=>new c7({client:this.client,commandOptions:this.opts,multiExec:!0});bitfield=(...a)=>new V(a,this.client,this.opts);append=(...a)=>new T(a,this.opts).exec(this.client);bitcount=(...a)=>new U(a,this.opts).exec(this.client);bitop=(a,b,c,...d)=>new W([a,b,c,...d],this.opts).exec(this.client);bitpos=(...a)=>new X(a,this.opts).exec(this.client);clientSetinfo=(...a)=>new Y(a,this.opts).exec(this.client);copy=(...a)=>new Z(a,this.opts).exec(this.client);dbsize=()=>new $(this.opts).exec(this.client);decr=(...a)=>new _(a,this.opts).exec(this.client);decrby=(...a)=>new aa(a,this.opts).exec(this.client);del=(...a)=>new ab(a,this.opts).exec(this.client);echo=(...a)=>new ac(a,this.opts).exec(this.client);evalRo=(...a)=>new ad(a,this.opts).exec(this.client);eval=(...a)=>new ae(a,this.opts).exec(this.client);evalshaRo=(...a)=>new af(a,this.opts).exec(this.client);evalsha=(...a)=>new ag(a,this.opts).exec(this.client);exec=a=>new ah(a,this.opts).exec(this.client);exists=(...a)=>new ai(a,this.opts).exec(this.client);expire=(...a)=>new aj(a,this.opts).exec(this.client);expireat=(...a)=>new ak(a,this.opts).exec(this.client);flushall=a=>new an(a,this.opts).exec(this.client);flushdb=(...a)=>new ao(a,this.opts).exec(this.client);geoadd=(...a)=>new aw(a,this.opts).exec(this.client);geopos=(...a)=>new az(a,this.opts).exec(this.client);geodist=(...a)=>new ax(a,this.opts).exec(this.client);geohash=(...a)=>new ay(a,this.opts).exec(this.client);geosearch=(...a)=>new aA(a,this.opts).exec(this.client);geosearchstore=(...a)=>new aB(a,this.opts).exec(this.client);get=(...a)=>new aC(a,this.opts).exec(this.client);getbit=(...a)=>new aD(a,this.opts).exec(this.client);getdel=(...a)=>new aE(a,this.opts).exec(this.client);getex=(...a)=>new aF(a,this.opts).exec(this.client);getrange=(...a)=>new aG(a,this.opts).exec(this.client);getset=(a,b)=>new aH([a,b],this.opts).exec(this.client);hdel=(...a)=>new aI(a,this.opts).exec(this.client);hexists=(...a)=>new aJ(a,this.opts).exec(this.client);hexpire=(...a)=>new aK(a,this.opts).exec(this.client);hexpireat=(...a)=>new aL(a,this.opts).exec(this.client);hexpiretime=(...a)=>new aM(a,this.opts).exec(this.client);httl=(...a)=>new a6(a,this.opts).exec(this.client);hpexpire=(...a)=>new aO(a,this.opts).exec(this.client);hpexpireat=(...a)=>new aP(a,this.opts).exec(this.client);hpexpiretime=(...a)=>new aQ(a,this.opts).exec(this.client);hpttl=(...a)=>new aR(a,this.opts).exec(this.client);hpersist=(...a)=>new aN(a,this.opts).exec(this.client);hget=(...a)=>new aS(a,this.opts).exec(this.client);hgetall=(...a)=>new aT(a,this.opts).exec(this.client);hgetdel=(...a)=>new aW(a,this.opts).exec(this.client);hgetex=(...a)=>new aX(a,this.opts).exec(this.client);hincrby=(...a)=>new aY(a,this.opts).exec(this.client);hincrbyfloat=(...a)=>new aZ(a,this.opts).exec(this.client);hkeys=(...a)=>new a$(a,this.opts).exec(this.client);hlen=(...a)=>new a_(a,this.opts).exec(this.client);hmget=(...a)=>new aV(a,this.opts).exec(this.client);hmset=(a,b)=>new a0([a,b],this.opts).exec(this.client);hrandfield=(a,b,c)=>new S([a,b,c],this.opts).exec(this.client);hscan=(...a)=>new a1(a,this.opts).exec(this.client);hset=(a,b)=>new a2([a,b],this.opts).exec(this.client);hsetex=(...a)=>new a3(a,this.opts).exec(this.client);hsetnx=(a,b,c)=>new a4([a,b,c],this.opts).exec(this.client);hstrlen=(...a)=>new a5(a,this.opts).exec(this.client);hvals=(...a)=>new a7(a,this.opts).exec(this.client);incr=(...a)=>new a8(a,this.opts).exec(this.client);incrby=(...a)=>new a9(a,this.opts).exec(this.client);incrbyfloat=(...a)=>new ba(a,this.opts).exec(this.client);keys=(...a)=>new by(a,this.opts).exec(this.client);lindex=(...a)=>new bz(a,this.opts).exec(this.client);linsert=(a,b,c,d)=>new bA([a,b,c,d],this.opts).exec(this.client);llen=(...a)=>new bB(a,this.opts).exec(this.client);lmove=(...a)=>new bC(a,this.opts).exec(this.client);lpop=(...a)=>new bE(a,this.opts).exec(this.client);lmpop=(...a)=>new bD(a,this.opts).exec(this.client);lpos=(...a)=>new bF(a,this.opts).exec(this.client);lpush=(a,...b)=>new bG([a,...b],this.opts).exec(this.client);lpushx=(a,...b)=>new bH([a,...b],this.opts).exec(this.client);lrange=(...a)=>new bI(a,this.opts).exec(this.client);lrem=(a,b,c)=>new bJ([a,b,c],this.opts).exec(this.client);lset=(a,b,c)=>new bK([a,b,c],this.opts).exec(this.client);ltrim=(...a)=>new bL(a,this.opts).exec(this.client);mget=(...a)=>new bM(a,this.opts).exec(this.client);mset=a=>new bN([a],this.opts).exec(this.client);msetnx=a=>new bO([a],this.opts).exec(this.client);persist=(...a)=>new bP(a,this.opts).exec(this.client);pexpire=(...a)=>new bQ(a,this.opts).exec(this.client);pexpireat=(...a)=>new bR(a,this.opts).exec(this.client);pfadd=(...a)=>new bS(a,this.opts).exec(this.client);pfcount=(...a)=>new bT(a,this.opts).exec(this.client);pfmerge=(...a)=>new bU(a,this.opts).exec(this.client);ping=a=>new bV(a,this.opts).exec(this.client);psetex=(a,b,c)=>new bW([a,b,c],this.opts).exec(this.client);psubscribe=a=>{let b=Array.isArray(a)?a:[a];return new db(this.client,b,!0,this.opts)};pttl=(...a)=>new bX(a,this.opts).exec(this.client);publish=(...a)=>new bY(a,this.opts).exec(this.client);randomkey=()=>new bZ().exec(this.client);rename=(...a)=>new b$(a,this.opts).exec(this.client);renamenx=(...a)=>new b_(a,this.opts).exec(this.client);rpop=(...a)=>new b0(a,this.opts).exec(this.client);rpush=(a,...b)=>new b1([a,...b],this.opts).exec(this.client);rpushx=(a,...b)=>new b2([a,...b],this.opts).exec(this.client);sadd=(a,b,...c)=>new b3([a,b,...c],this.opts).exec(this.client);scan(a,b){return new b4([a,b],this.opts).exec(this.client)}scard=(...a)=>new b5(a,this.opts).exec(this.client);scriptExists=(...a)=>new b6(a,this.opts).exec(this.client);scriptFlush=(...a)=>new b7(a,this.opts).exec(this.client);scriptLoad=(...a)=>new b8(a,this.opts).exec(this.client);sdiff=(...a)=>new b9(a,this.opts).exec(this.client);sdiffstore=(...a)=>new ca(a,this.opts).exec(this.client);set=(a,b,c)=>new cb([a,b,c],this.opts).exec(this.client);setbit=(...a)=>new cc(a,this.opts).exec(this.client);setex=(a,b,c)=>new cd([a,b,c],this.opts).exec(this.client);setnx=(a,b)=>new ce([a,b],this.opts).exec(this.client);setrange=(...a)=>new cf(a,this.opts).exec(this.client);sinter=(...a)=>new cg(a,this.opts).exec(this.client);sinterstore=(...a)=>new ch(a,this.opts).exec(this.client);sismember=(a,b)=>new ci([a,b],this.opts).exec(this.client);smismember=(a,b)=>new ck([a,b],this.opts).exec(this.client);smembers=(...a)=>new cj(a,this.opts).exec(this.client);smove=(a,b,c)=>new cl([a,b,c],this.opts).exec(this.client);spop=(...a)=>new cm(a,this.opts).exec(this.client);srandmember=(...a)=>new cn(a,this.opts).exec(this.client);srem=(a,...b)=>new co([a,...b],this.opts).exec(this.client);sscan=(...a)=>new cp(a,this.opts).exec(this.client);strlen=(...a)=>new cq(a,this.opts).exec(this.client);subscribe=a=>{let b=Array.isArray(a)?a:[a];return new db(this.client,b,!1,this.opts)};sunion=(...a)=>new cr(a,this.opts).exec(this.client);sunionstore=(...a)=>new cs(a,this.opts).exec(this.client);time=()=>new ct().exec(this.client);touch=(...a)=>new cu(a,this.opts).exec(this.client);ttl=(...a)=>new cv(a,this.opts).exec(this.client);type=(...a)=>new cw(a,this.opts).exec(this.client);unlink=(...a)=>new cx(a,this.opts).exec(this.client);xadd=(...a)=>new cA(a,this.opts).exec(this.client);xack=(...a)=>new cy(a,this.opts).exec(this.client);xackdel=(...a)=>new cz(a,this.opts).exec(this.client);xdel=(...a)=>new cD(a,this.opts).exec(this.client);xdelex=(...a)=>new cE(a,this.opts).exec(this.client);xgroup=(...a)=>new cF(a,this.opts).exec(this.client);xread=(...a)=>new cK(a,this.opts).exec(this.client);xreadgroup=(...a)=>new cL(a,this.opts).exec(this.client);xinfo=(...a)=>new cG(a,this.opts).exec(this.client);xlen=(...a)=>new cH(a,this.opts).exec(this.client);xpending=(...a)=>new cI(a,this.opts).exec(this.client);xclaim=(...a)=>new cC(a,this.opts).exec(this.client);xautoclaim=(...a)=>new cB(a,this.opts).exec(this.client);xtrim=(...a)=>new cN(a,this.opts).exec(this.client);xrange=(...a)=>new cJ(a,this.opts).exec(this.client);xrevrange=(...a)=>new cM(a,this.opts).exec(this.client);zadd=(...a)=>("score"in a[1],new cO([a[0],a[1],...a.slice(2)],this.opts).exec(this.client));zcard=(...a)=>new cP(a,this.opts).exec(this.client);zcount=(...a)=>new cQ(a,this.opts).exec(this.client);zdiffstore=(...a)=>new c5(a,this.opts).exec(this.client);zincrby=(a,b,c)=>new cR([a,b,c],this.opts).exec(this.client);zinterstore=(...a)=>new cS(a,this.opts).exec(this.client);zlexcount=(...a)=>new cT(a,this.opts).exec(this.client);zmscore=(...a)=>new c6(a,this.opts).exec(this.client);zpopmax=(...a)=>new cU(a,this.opts).exec(this.client);zpopmin=(...a)=>new cV(a,this.opts).exec(this.client);zrange=(...a)=>new cW(a,this.opts).exec(this.client);zrank=(a,b)=>new cX([a,b],this.opts).exec(this.client);zrem=(a,...b)=>new cY([a,...b],this.opts).exec(this.client);zremrangebylex=(...a)=>new cZ(a,this.opts).exec(this.client);zremrangebyrank=(...a)=>new c$(a,this.opts).exec(this.client);zremrangebyscore=(...a)=>new c_(a,this.opts).exec(this.client);zrevrank=(a,b)=>new c0([a,b],this.opts).exec(this.client);zscan=(...a)=>new c1(a,this.opts).exec(this.client);zscore=(a,b)=>new c2([a,b],this.opts).exec(this.client);zunion=(...a)=>new c3(a,this.opts).exec(this.client);zunionstore=(...a)=>new c4(a,this.opts).exec(this.client)};"u"<typeof atob&&(global.atob=a=>Buffer.from(a,"base64").toString("utf8"));var dh=class a extends dg{constructor(a){if("request"in a)return void super(a);a.url?(a.url.startsWith(" ")||a.url.endsWith(" ")||/\r|\n/.test(a.url))&&console.warn("[Upstash Redis] The redis url contains whitespace or newline, which can cause errors!"):console.warn("[Upstash Redis] The 'url' property is missing or undefined in your Redis config."),a.token?(a.token.startsWith(" ")||a.token.endsWith(" ")||/\r|\n/.test(a.token))&&console.warn("[Upstash Redis] The redis token contains whitespace or newline, which can cause errors!"):console.warn("[Upstash Redis] The 'token' property is missing or undefined in your Redis config.");const b=new M({baseUrl:a.url,retry:a.retry,headers:{authorization:`Bearer ${a.token}`},agent:a.agent,responseEncoding:a.responseEncoding,cache:a.cache??"no-store",signal:a.signal,keepAlive:a.keepAlive,readYourWrites:a.readYourWrites}),c="object"==typeof process&&process&&"object"==typeof process.env&&process.env?process.env:{};super(b,{automaticDeserialization:a.automaticDeserialization,enableTelemetry:a.enableTelemetry??!c.UPSTASH_DISABLE_TELEMETRY,latencyLogging:a.latencyLogging,enableAutoPipelining:a.enableAutoPipelining});const d="object"==typeof process&&process?process.version:void 0;if(this.addTelemetry({runtime:"string"==typeof EdgeRuntime?"edge-light":d?`node@${d}`:"unknown",platform:c.UPSTASH_CONSOLE?"console":c.VERCEL?"vercel":c.AWS_REGION?"aws":"unknown",sdk:"@upstash/redis@v1.36.2"}),this.enableAutoPipelining)return this.autoPipeline()}static fromEnv(b){if("object"!=typeof process||!process||"object"!=typeof process.env||!process.env)throw TypeError('[Upstash Redis] Unable to get environment variables, `process.env` is undefined. If you are deploying to cloudflare, please import from "@upstash/redis/cloudflare" instead');let c=process.env.UPSTASH_REDIS_REST_URL||process.env.KV_REST_API_URL;c||console.warn("[Upstash Redis] Unable to find environment variable: `UPSTASH_REDIS_REST_URL`");let d=process.env.UPSTASH_REDIS_REST_TOKEN||process.env.KV_REST_API_TOKEN;return d||console.warn("[Upstash Redis] Unable to find environment variable: `UPSTASH_REDIS_REST_TOKEN`"),new a({...b,url:c,token:d})}};let di=JSON.parse('{"protocol":"groth16","curve":"bls12381","nPublic":7,"vk_alpha_1":["1163421671455699018708327255087184848161890981413791396620852616181980135860074037795844378269590335133257998588783","3352962416631348460912767161437058022842757855998063040954083601418760781379833722641614041752589187089345765130518","1"],"vk_beta_2":[["2676502880081873396588964116695854928125372056128994184353135666232484722805637730415315617041013737654092688724692","320535052817605583800292701370710399964067733143152085310836127247321849226786907642984207498095900633344792919171"],["549692485840748280949095215927242982897401076873598725437141101953422693148412187211498996151958888216670877502575","3028436855750859997377912937742257165148094607628594931328698696665963778913618378447330928121162123210529109648505"],["1","0"]],"vk_gamma_2":[["352701069587466618187139116011060144890029952792775240219908644239793785735715026873347600343865175952761926303160","3059144344244213709971259814753781636986470325476647558659373206291635324768958432433509563104347017837885763365758"],["1985150602287291935568054521177171638300868978215655730859378665066344726373823718423869104263333984641494340347905","927553665492332455747201965776037880757740193453592970025027978793976877002675564980949289727957565575433344219582"],["1","0"]],"vk_delta_2":[["846314788840110560203107018892769873268204295462939605289538018944139700439108579676246783365958937146315832012516","794960849430411546154798987524944504729406757947676604754200907741975919497974356281659463296377775181664932352098"],["1484861609451034821302223932997431669708097331111665510457386204153922489171040777916909967938142533743257792776921","890107351698391340624703216388417936443359606416833041242368383445300999295929289718476224298642849730210382685153"],["1","0"]],"vk_alphabeta_12":[[["3879377734161796906865152286845443550011713850459262565345082569429519355730404111926216297255968701412747848205804","1773381078984890765171289641712448762140528639526550814181098846144387189270806664709985445786486497191003481699661"],["2620603761781078609623887741486099424530154810896654581841223632110502422703345795643616897482687126209126012473242","1961040632072002274532777025595615191402146085501393498304197727341251564681514078172507542361758195123126959991098"],["2564936883599232073403863586248715257858795366973044234445867914628121298487706232125244834266308430271152967862834","2854874646947093004198752897807266773020475425713253503052148517319578835302144174071203687725602142986000052013503"]],[["940328736084386930924932696416787201753497259462011778618016541442575929164749670619314756721368555406216585867140","1165229152536801634750996020615396848158970035655902954409385750916498791429574574355984902072913555202909966340529"],["3801151458292014424798355823137902030962397192786495267001225746721010020987795525334923664504268846019189134849796","1894306948460014640374304091628452475081596858237073184804147549004223389983929709368997910023477828603919019191891"],["2579561497346674537838143557297631251594614392533770848825684897261497307746243555132095316696994989206431490809854","2328783509938485875673642707588458876013368164832667573407047924160336426978137715389197117787233998949625459440334"]]],"IC":[["1875855495256988470028218712901719765731650197603299788033987557589788922951642618472580679168260195087091042875770","2843612359518159076307883849551055808300793522702746985576408758903646618597556571644185328257486225267251887303242","1"],["2866084311088715381480878888993889084181799707477350950734068232447422366972211485281707120427597568019512972955444","1440530869774703181211181008382912077020299676838490865896993571020795329610681827067262684496020729891911515752070","1"],["3822947110429509254818635822039337574397174142769640621711380373157449862149003061614595867715755041710540343702469","185497371435368689754231658985273218176476975200098668017491673520598927056351273459231897719880538518880155240220","1"],["3207613789491324048142925447937811964753538277222758913439867193230835712383979243988663037749904418336113717677709","2940199674210743548121745420621677936228386113605454906532235161172445316314876759570316498789872306617211017457798","1"],["3371210985323158610684115305841858960566632981744734299130868180490461779860806993179579106776137974361293924456941","3740943159530915072108012054711872275533476437924164954005532976715241530640117836960769229824685316270815913159901","1"],["2078069120597004916260383019813015126875614051385576518635454427973195417703778573654916781625666678242000397064305","2768089441812274897709567965158792321829633235665206956916743559142847634712085097145209221611265404043761926818199","1"],["1243484215760438507313537726767516890103539555038757974418662986147723885943486382819512755104805174511531608979377","2584089956553425727066694269879980359291710164405015483684185058003729294020828841124584338631427840821392406451671","1"],["2115380266699885396375396660326098606300290060364000243143040358894438462823352564402273947334317432461768197999505","2708083575513276436104995837224252848361977328038428062622532546487311450601691631241716279682428024160565526182805","1"]]}');function dj(a){let b=a.trim().replace(/^\[|\]$/g,"").toLowerCase();return b.length<3||b.length>64||!/^[0-9a-f:.]+$/.test(b)?null:b}function dk(a){if(!a)return null;let b=a.split(",")[0]?.trim()||"";return b.length>0?b:null}function dl(a,b){if(b.isVercelRuntime){let b=dk(a.get("x-vercel-forwarded-for"));if(b){let a=dj(b);if(a)return a}let c=dk(a.get("x-forwarded-for"));if(c){let a=dj(c);if(a)return a}}else if(b.trustProxyHeaders){let b=a.get("x-real-ip");if(b){let a=dj(b);if(a)return a}let c=dk(a.get("x-forwarded-for"));if(c){let a=dj(c);if(a)return a}}return"unknown"}function dm(a,b){var c;let d;if(!b)return!0;let e=a.get("origin");if(!e)return!1;try{d=new URL(e)}catch{return!1}let f=d.origin;if(b.exact.has(f))return!0;let g=d.hostname.toLowerCase(),h=(c=d).port?c.port:"https:"===c.protocol?"443":"http:"===c.protocol?"80":"";for(let a of b.wildcard)if(d.protocol===a.protocol&&h===a.port&&!(g.length<=a.hostSuffix.length)&&g.endsWith(a.hostSuffix))return!0;return!1}function dn(a){let b=a.get("x-relayer-api-key");if(b&&b.trim().length>0)return b.trim();var c=a.get("authorization");if(!c)return null;let d=/^Bearer\s+(.+)$/i.exec(c.trim());return d&&d[1].trim()||null}var dp=c(5043);let dq=/^(?:0x)?[0-9a-fA-F]{40}$/,dr=null;function ds(a){let b=a.trim().replace(/^0x/i,"").toLowerCase();if(!dq.test(a.trim()))throw Error("hash160 must be a 20-byte hex value");return BigInt(`0x${b}`).toString()}async function dt(){return dr||(dr=(0,dp.XN)("bls12381")),dr}function du(a){let b=Uint8Array.from(a),c=(128&b[0])!=0,d=(64&b[0])!=0;return b[0]&=31,b[0]|=128,d&&(b[0]|=64),c&&(b[0]|=32),b}async function dv(a){if(!(a&&"object"==typeof a&&Array.isArray(a.pi_a)&&Array.isArray(a.pi_b)&&Array.isArray(a.pi_c)&&"string"==typeof a.protocol&&"string"==typeof a.curve))throw Error("Invalid proof payload.");let b=String(a.curve||"").toLowerCase();if("bls12381"!==b&&"bls12-381"!==b)throw Error("Proof must target bls12381.");try{let b=await dt(),c=function a(b){if("string"==typeof b&&(/^-?[0-9]+$/.test(b)||/^-?0x[0-9a-fA-F]+$/.test(b)))return BigInt(b);if(Array.isArray(b))return b.map(b=>a(b));if(b&&"object"==typeof b){let c={};for(let[d,e]of Object.entries(b))c[d]=a(e);return c}return b}(a),d=b.G1.fromObject(c.pi_a),e=b.G2.fromObject(c.pi_b),f=b.G1.fromObject(c.pi_c);if(!b.G1.isValid(d)||!b.G2.isValid(e)||!b.G1.isValid(f))throw Error("proof points are not valid on bls12381");let g=new Uint8Array(48),h=new Uint8Array(96),i=new Uint8Array(48);b.G1.toRprCompressed(g,0,d),b.G2.toRprCompressed(h,0,e),b.G1.toRprCompressed(i,0,f);let j=du(g),k=du(h),l=du(i),m=Buffer.concat([Buffer.from(j),Buffer.from(k),Buffer.from(l)]);if(192!==m.length)throw Error("packed proof length mismatch");return m.toString("base64")}catch(a){throw Error(a instanceof Error?`Invalid proof payload: ${a.message}`:"Invalid proof payload.")}}var dw=c(1847);let dx="nodejs",dy="force-dynamic",dz=60,dA=process.env.RPC_URL||"https://n3seed1.ngd.network:20332",dB=process.env.RELAYER_WIF||"",dC=process.env.VAULT_HASH||"",dD=process.env.ALLOWED_TOKEN_HASHES||"",dE=process.env.RELAYER_ALLOWED_ORIGINS||"",dF=process.env.RELAYER_API_KEY||"",dG="production".trim().toLowerCase(),dH=(process.env.VERCEL_ENV||"").trim().toLowerCase(),dI="production"===dH||"production"===dG&&0===dH.length,dJ=/^(?:0x)?[0-9a-fA-F]{40}$/,dK=/^[0-9a-fA-F]{64}$/,dL=/^(?:0|[1-9]\d*)$/,dM="0".repeat(40),dN=(1n<<256n)-1n,dO="snark",dP=ea(process.env.RELAYER_REQUIRE_AUTH,dI),dQ=ea(process.env.RELAYER_REQUIRE_ORIGIN_ALLOWLIST,dI),dR=ea(process.env.RELAYER_REQUIRE_DURABLE_GUARDS,dI),dS=ea(process.env.RELAYER_REQUIRE_STRONG_ONCHAIN_VERIFIER,dI),dT=ea(process.env.RELAYER_TRUST_PROXY_HEADERS,"1"===process.env.VERCEL),dU=process.env.RELAYER_EXPECTED_VERIFIER_HASH||"",dV=(d=dU.trim())&&dJ.test(d)?d.replace(/^0x/i,"").toLowerCase():null,dW=function(a,b){if("string"!=typeof a)return 5e4;let c=a.trim();if(!/^\d+$/.test(c))return 5e4;let d=Number(c);return!Number.isSafeInteger(d)||d<=0?5e4:d}(process.env.RELAYER_MERKLE_MAX_BOOTSTRAP_LEAVES,5e4),dX=process.env.KV_REST_API_URL||"",dY=process.env.KV_REST_API_TOKEN||"",dZ=!!(dX&&dY),d$=dZ?"durable":"memory",d_=dZ?new dh({url:dX,token:dY}):null,d0=new Map,d1=new Map,d2=0===(e=dD.split(",").map(a=>a.trim()).filter(Boolean).filter(a=>dJ.test(a)).map(a=>a.replace(/^0x/i,"").toLowerCase())).length?null:new Set(e),d3=function(a){let b=new Set,c=[];for(let d of a.split(",").map(a=>a.trim()).filter(Boolean)){let a=/^(https?):\/\/\*\.([A-Za-z0-9.-]+)(?::(\d{1,5}))?$/i.exec(d);if(a){let b=a[1].toLowerCase()+":",d=a[2].toLowerCase().replace(/^\.+/,""),e=a[3]||("https:"===b?"443":"80");d.length>0&&c.push({protocol:b,port:e,hostSuffix:`.${d}`});continue}try{b.add(new URL(d).origin)}catch{}}return 0===b.size&&0===c.length?null:{exact:b,wildcard:c}}(dE),d4=null,d5=null,d6=null,d7=null,d8=function(){let a=[0n];for(let b=0;b<20;b++)a.push((0,dw.DR)([a[b],a[b]]));return a}(),d9=function(){let a,b=[];if(a=dA.trim(),/^https:\/\//i.test(a)||/^wss:\/\//i.test(a)||b.push("RPC_URL must use https:// or wss://."),dB||b.push("RELAYER_WIF is required."),dC||b.push("VAULT_HASH is required."),dB)try{new z.wallet.Account(dB)}catch{b.push("RELAYER_WIF is invalid.")}if(dC)try{eb(dC,"VAULT_HASH")}catch{b.push("VAULT_HASH must be a valid 20-byte script hash.")}return dU.trim().length>0&&!dV&&b.push("RELAYER_EXPECTED_VERIFIER_HASH must be a valid 20-byte script hash."),dW>2e5&&b.push("RELAYER_MERKLE_MAX_BOOTSTRAP_LEAVES must be <= 200000 to protect relayer memory."),dD.trim().length>0&&!d2&&b.push("ALLOWED_TOKEN_HASHES is set but contains no valid script hashes."),dQ&&!d3&&b.push("RELAYER_ALLOWED_ORIGINS is required by relayer policy."),dP&&!dF&&b.push("RELAYER_API_KEY is required by relayer policy."),dR&&"durable"!==d$&&b.push("Durable guard storage is required. Configure KV_REST_API_URL and KV_REST_API_TOKEN."),dI&&!d2&&b.push("ALLOWED_TOKEN_HASHES must include at least one token in production."),dI&&!dQ&&b.push("RELAYER_REQUIRE_ORIGIN_ALLOWLIST must be true in production."),dI&&d3&&function(a){for(let b of a.exact)try{let a=new URL(b);if("https:"!==a.protocol)return!0}catch{return!0}return a.wildcard.some(a=>"https:"!==a.protocol)}(d3)&&b.push("RELAYER_ALLOWED_ORIGINS must only contain https origins in production."),dI&&!dR&&b.push("RELAYER_REQUIRE_DURABLE_GUARDS must be true in production."),dI&&!dS&&b.push("RELAYER_REQUIRE_STRONG_ONCHAIN_VERIFIER must be true in production."),dI&&dS&&!dV&&b.push("RELAYER_EXPECTED_VERIFIER_HASH is required when strong verifier guard is enabled in production."),b}();function ea(a,b){if("string"!=typeof a)return b;let c=a.trim().toLowerCase();return"1"===c||"true"===c||"yes"===c||"on"===c||"0"!==c&&"false"!==c&&"no"!==c&&"off"!==c&&b}function eb(a,b){let c=a.trim();if(!dJ.test(c))throw Error(`${b} must be a valid 20-byte script hash`);return c.replace(/^0x/i,"").toLowerCase()}function ec(a,b){let c=a.trim();return z.wallet.isAddress(c)?z.wallet.getScriptHashFromAddress(c):eb(c,b)}function ed(a,b){let c=a.trim().replace(/^0x/i,"").toLowerCase();if(!dK.test(c))throw Error(`${b} must be a 32-byte hex value`);return c}function ee(a,b){let c=a.trim();if(!dL.test(c))throw Error(`${b} must be an integer string`);if(c.length>78)throw Error(`${b} exceeds 32-byte scalar range`);let d=BigInt(c);if(d>dN)throw Error(`${b} exceeds 32-byte scalar range`);return d}function ef(a){return Buffer.from(a,"hex").toString("base64")}function eg(a=503){return 0===d9.length?null:x.NextResponse.json({error:"Relayer is not fully configured.",issues:d9},{status:a})}function eh(a,b){return dI?b:a instanceof Error?a.message:b}function ei(a,b){let c=(0,y.createHash)("sha256").update(a,"utf8").digest(),d=(0,y.createHash)("sha256").update(b,"utf8").digest();return(0,y.timingSafeEqual)(c,d)}async function ej(a,b){if(!(a.headers.get("content-type")||"").toLowerCase().includes("application/json"))throw Error("Content-Type must be application/json.");let c=a.body;if(!c)throw Error("Invalid JSON body.");let d=c.getReader(),e=[],f=0;for(;;){let{done:a,value:c}=await d.read();if(a)break;if(c&&c.byteLength>0){if((f+=c.byteLength)>b)throw Error("Request body too large.");e.push(Buffer.from(c))}}let g=Buffer.concat(e).toString("utf8");try{return JSON.parse(g)}catch{throw Error("Invalid JSON body.")}}async function ek(a,b,c){if(!d_)throw Error("Durable guard storage is unavailable.");let d=Math.ceil(c/1e3),e=`znep17:rate:${a}`,f=await d_.incr(e);return 1===f&&await d_.expire(e,d),Number(f)>b}async function el(a,b=30,c=6e4){if("durable"===d$)return ek(a,b,c);let d=Date.now();for(let[a,b]of d0.entries())b.resetAt<=d&&d0.delete(a);for(;d0.size>4096;){let a=d0.keys().next().value;if(!a)break;d0.delete(a)}let e=d0.get(a);return e?e.count>=b||(e.count+=1,d0.set(a,e),!1):(d0.set(a,{count:1,resetAt:d+c}),!1)}async function em(a){if(!d_)throw Error("Durable guard storage is unavailable.");let b=`znep17:nullifier-lock:${a}`;return"OK"===await d_.set(b,"1",{nx:!0,px:12e4})}async function en(a){if(!d_)return;let b=`znep17:nullifier-lock:${a}`;await d_.del(b)}async function eo(a){if("durable"===d$)return em(a);let b=Date.now();for(let[a,c]of d1.entries())c<=b&&d1.delete(a);let c=d1.get(a);return("number"!=typeof c||!(c>b))&&(d1.set(a,b+12e4),!0)}async function ep(a){"durable"===d$?await en(a):d1.delete(a)}async function eq(a){try{await ep(a)}catch(a){console.error("Failed to release nullifier lock:",a instanceof Error?a.message:"unknown release failure")}}function er(a){if(!0===a||!1===a)return a;if("string"==typeof a){let b=a.toLowerCase();if("true"===b)return!0;if("false"===b)return!1;if(dL.test(a))return 0n!==BigInt(a)}return"number"==typeof a&&0!==a}function es(a,b){if("ByteString"!==a.type&&"Buffer"!==a.type&&"ByteArray"!==a.type)throw Error(`${b} must be a byte string`);if("string"!=typeof a.value)throw Error(`${b} is missing byte value`);return Buffer.from(a.value,"base64").toString("hex")}async function et(){let a=Date.now();if(d4&&d4.expiresAt>a)return d4.value;let b=new z.rpc.RPCClient(dA),c=await b.getVersion(),d=c?.protocol?.network;if("number"!=typeof d||!Number.isInteger(d)||d<=0)throw Error("Unable to resolve network magic from RPC endpoint");return d4={value:d,expiresAt:a+3e5},d}async function eu(){return d5||(d5=c.e(39).then(c.bind(c,7039))),d5}async function ev(a){let b,c=new z.rpc.RPCClient(dA);try{b=await c.invokeFunction(`0x${a}`,"getLeafIndex",[])}catch{b=await c.invokeFunction(`0x${a}`,"GetLeafIndex",[])}if("FAULT"===b.state)throw Error(`getLeafIndex failed: ${b.exception||"unknown"}`);let d=b.stack?.[0];if(!d||!d.value)return 0;if("Integer"===d.type)return Number(d.value);if("ByteString"===d.type||"ByteArray"===d.type||"Buffer"===d.type){let a=Buffer.from(String(d.value),"base64").toString("hex");return 0===a.length?0:Number(BigInt(`0x${a}`))}return 0}async function ew(a,b){let c,d=new z.rpc.RPCClient(dA);try{c=await d.invokeFunction(`0x${a}`,"getLeaf",[z.sc.ContractParam.integer(b.toString())])}catch{c=await d.invokeFunction(`0x${a}`,"GetLeaf",[z.sc.ContractParam.integer(b.toString())])}if("FAULT"===c.state)throw Error(`getLeaf(${b}) failed: ${c.exception||"unknown"}`);let e=c.stack?.[0];return e?es(e,`leaf[${b}]`):""}async function ex(a,b,c){let d=new z.rpc.RPCClient(dA),e=await d.invokeFunction(`0x${a}`,b,[z.sc.ContractParam.byteArray(ef(c))]);if("FAULT"===e.state)throw Error(`Vault precheck ${b} failed: ${e.exception||"unknown fault"}`);return er(e.stack&&e.stack[0]&&e.stack[0].value||!1)}async function ey(a,b){let c=new z.rpc.RPCClient(dA),d=await c.invokeFunction(`0x${a}`,b,[]);if("FAULT"===d.state)throw Error(`Vault read ${b} failed: ${d.exception||"unknown fault"}`);let e=d.stack&&d.stack[0];if(!e)throw Error(`Vault read ${b} returned empty stack`);return es(e,b)}async function ez(a,b,c){let d=new z.rpc.RPCClient(dA),e=await d.invokeFunction(`0x${a}`,b,[z.sc.ContractParam.byteArray(ef(c))]);if("FAULT"===e.state)throw Error(`Vault read ${b} failed: ${e.exception||"unknown fault"}`);let f=e.stack?.[0];if(!f)return -1;if("Integer"===f.type)return Number(f.value);if("ByteString"===f.type||"ByteArray"===f.type||"Buffer"===f.type){let a=Buffer.from(String(f.value),"base64").toString("hex");return 0===a.length?0:Number(BigInt(`0x${a}`))}return -1}async function eA(a,b){let c=await ey(a,b);if(0===c.length)return dM;if(!dJ.test(c))throw Error(`Vault read ${b} returned invalid hash160`);return z.u.reverseHex(c.toLowerCase())}async function eB(a,b){try{return await ex(a,"isNullifierUsed",b)}catch{return await ex(a,"IsNullifierUsed",b)}}async function eC(a,b){try{return await ex(a,"isKnownRoot",b)}catch{return await ex(a,"IsKnownRoot",b)}}async function eD(a){let b;try{b=await ey(a,"getCurrentRoot")}catch{b=await ey(a,"GetCurrentRoot")}if(0===b.length)return null;if(!dK.test(b))throw Error("Vault current root is not 32 bytes");return b}async function eE(a,b){try{return await ex(a,"isCommitmentSpent",b)}catch{return await ex(a,"IsCommitmentSpent",b)}}async function eF(a,b){try{return await ez(a,"getCommitmentIndex",b)}catch{return await ez(a,"GetCommitmentIndex",b)}}async function eG(a){try{return await eA(a,"getVerifier")}catch{return await eA(a,"GetVerifier")}}async function eH(a,b,c){let d=[];for(let e=b;e<c;e+=32){let b=Math.min(c,e+32),f=[];for(let c=e;c<b;c++)f.push(ew(a,c));for(let a of(await Promise.all(f)))d.push(a.length>0?BigInt(`0x${a}`):0n)}return d}async function eI(a){let b=await ev(a);if(b>dW)throw Error(`Merkle tree size exceeds configured limit (${b} > ${dW}).`);if(!d6||b<d6.leafCount){let c=await eH(a,0,b),d=function(a){let b=[];b.push(a.slice());let c=b[0];for(let a=0;a<20;a++){let d=Math.max(1,Math.ceil(c.length/2)),e=Array(d);for(let b=0;b<d;b++){let d=c[2*b]??d8[a],f=c[2*b+1]??d8[a];e[b]=(0,dw.DR)([d,f])}b.push(e),c=e}return b}(c);return d6={leaves:c,layers:d,root:d[20][0]??d8[20],leafCount:b}}if(b>d6.leafCount)for(let c of(await eH(a,d6.leafCount,b)))!function(a,b){let c=a.leafCount;a.leaves.push(b),a.layers[0][c]=b;let d=c,e=b;for(let b=0;b<20;b++){let c=d%2==0?d+1:d-1,f=a.layers[b][c]??d8[b],g=d%2==0?(0,dw.DR)([e,f]):(0,dw.DR)([f,e]);d=Math.floor(d/2),a.layers[b+1][d]=g,e=g}a.root=e,a.leafCount+=1}(d6,c);return d6}function eJ(a,b){let c=[],d=[],e=b;for(let b=0;b<20;b++){let f=e%2==0?e+1:e-1,g=a[b][f]??d8[b];c.push(g.toString()),d.push(e%2),e=Math.floor(e/2)}return{pathElements:c,pathIndices:d}}async function eK(a,b,c,d,e,f,g){let h=Date.now();if(d7&&d7.verifierHash===a&&d7.expiresAt>h)return d7.weak;let i=new z.rpc.RPCClient(dA),j=!1;try{let h=await i.invokeFunction(`0x${a}`,"verify",[z.sc.ContractParam.hash160(b),z.sc.ContractParam.byteArray(ef("01")),z.sc.ContractParam.byteArray(Buffer.from('["1"]',"utf8").toString("base64")),z.sc.ContractParam.byteArray(ef(c)),z.sc.ContractParam.byteArray(ef(d)),z.sc.ContractParam.byteArray(ef(e)),z.sc.ContractParam.hash160(f),z.sc.ContractParam.hash160(g),z.sc.ContractParam.integer("2"),z.sc.ContractParam.integer("1")]),k=h.stack&&h.stack[0]&&h.stack[0].value||!1;j="FAULT"!==h.state&&er(k)}catch{j=!1}return d7={verifierHash:a,weak:j,expiresAt:h+3e5},j}async function eL(a){if(eg())return x.NextResponse.json({configured:!1,error:"Relayer is not fully configured.",issues:d9,proofMode:dO,guardStoreMode:d$},{status:503,headers:{"Cache-Control":"no-store"}});try{let b=eb(dC,"VAULT_HASH"),c=new URL(a.url).searchParams.get("proof");if(c){let d,e=dl(a.headers,{isVercelRuntime:"1"===process.env.VERCEL,trustProxyHeaders:dT}),f=!1;try{f=await el(`proof:${e}`,6,6e4)}catch{return x.NextResponse.json({error:"Rate limiter unavailable. Retry later."},{status:503})}if(f)return x.NextResponse.json({error:"Too many proof requests. Retry later."},{status:429});if(!dm(a.headers,d3))return x.NextResponse.json({error:"Origin not allowed."},{status:403});if(dP){let b=dn(a.headers);if(!b||!ei(b,dF))return x.NextResponse.json({error:"Missing or invalid relayer API key."},{status:401})}try{d=ed(c,"proof commitment")}catch(b){let a=b instanceof Error?b.message:"Invalid proof commitment.";return x.NextResponse.json({error:a},{status:400})}let g=await eF(b,d);if(g<0)return x.NextResponse.json({error:"Commitment not found in tree."},{status:404,headers:{"Cache-Control":"no-store"}});let h=await eI(b);if(g>=h.leafCount)return x.NextResponse.json({error:"Commitment index exceeds current tree size."},{status:503,headers:{"Cache-Control":"no-store"}});let i=BigInt(`0x${d}`);if((h.layers[0][g]??0n)!==i){d6=null;let a=await eI(b);if((a.layers[0][g]??0n)!==i)return x.NextResponse.json({error:"Commitment index mismatch with rebuilt Merkle tree."},{status:404,headers:{"Cache-Control":"no-store"}});let c=eJ(a.layers,g),d=a.root.toString(16).padStart(64,"0");return x.NextResponse.json({leafIndex:g,root:d,rootDecimal:a.root.toString(),pathElements:c.pathElements,pathIndices:c.pathIndices,leafCount:a.leafCount},{headers:{"Cache-Control":"no-store"}})}let j=eJ(h.layers,g),k=h.root.toString(16).padStart(64,"0");return x.NextResponse.json({leafIndex:g,root:k,rootDecimal:h.root.toString(),pathElements:j.pathElements,pathIndices:j.pathIndices,leafCount:h.leafCount},{headers:{"Cache-Control":"no-store"}})}let d=new z.wallet.Account(dB),[e,f]=await Promise.all([et(),eD(b)]);return x.NextResponse.json({configured:!0,relayerAddress:d.address,vaultHash:`0x${b}`,currentRoot:f?`0x${f}`:null,networkMagic:e,proofMode:dO,guardStoreMode:d$,requiresApiKey:dP&&dF.length>0,requiresStrongOnChainVerifier:dS,expectedVerifierHash:dV?`0x${dV}`:null},{headers:{"Cache-Control":"no-store"}})}catch(a){return x.NextResponse.json({configured:!1,error:eh(a,"Failed to initialize relayer config.")},{status:503,headers:{"Cache-Control":"no-store"}})}}async function eM(a){let b=null,c=!1,d=async()=>{b&&(await eq(b),b=null)};try{var e;let f,g,h,i,j,k,l,m,n,o,p,q,r,s=eg();if(s)return s;let t=a.headers.get("content-length");if(t){let a=Number(t);if(Number.isFinite(a)&&a>131072)return x.NextResponse.json({error:"Request body too large."},{status:413})}let u=dl(a.headers,{isVercelRuntime:"1"===process.env.VERCEL,trustProxyHeaders:dT}),v=!1;try{v=await el(u)}catch{return x.NextResponse.json({error:"Rate limiter unavailable. Retry later."},{status:503})}if(v)return x.NextResponse.json({error:"Too many requests. Retry later."},{status:429});if(!dm(a.headers,d3))return x.NextResponse.json({error:"Origin not allowed."},{status:403});if(dP){let b=dn(a.headers);if(!b||!ei(b,dF))return x.NextResponse.json({error:"Missing or invalid relayer API key."},{status:401})}try{f=await ej(a,131072)}catch(b){let a=b instanceof Error?b.message:"Invalid request body.";if("Request body too large."===a)return x.NextResponse.json({error:a},{status:413});return x.NextResponse.json({error:a},{status:400})}if("string"!=typeof f?.tokenHash||"string"!=typeof f?.merkleRoot||"string"!=typeof f?.nullifierHash||"string"!=typeof f?.commitment||"string"!=typeof f?.recipient||"string"!=typeof f?.relayer||"string"!=typeof f?.amount||"string"!=typeof f?.fee)return x.NextResponse.json({error:"Invalid request fields."},{status:400});if(!Array.isArray(f.publicInputs)||7!==f.publicInputs.length)return x.NextResponse.json({error:"publicInputs must be an array with exactly 7 values."},{status:400});if(!((e=f.proof)&&"object"==typeof e&&Array.isArray(e.pi_a)&&Array.isArray(e.pi_b)&&Array.isArray(e.pi_c)&&"string"==typeof e.protocol&&"string"==typeof e.curve))return x.NextResponse.json({error:"Invalid proof payload."},{status:400});if(Buffer.byteLength(JSON.stringify(f.proof),"utf8")>8192)return x.NextResponse.json({error:"Proof payload too large."},{status:413});try{if(g=new z.wallet.Account(dB),h=eb(g.scriptHash,"server relayer"),i=eb(dC,"VAULT_HASH"),j=eb(f.tokenHash,"tokenHash"),d2&&!d2.has(j))return x.NextResponse.json({error:"Token is not allowed by relayer policy."},{status:403});if(k=ec(f.recipient,"recipient"),ec(f.relayer,"relayer")!==h)return x.NextResponse.json({error:"Relayer mismatch."},{status:400});n=ed(f.merkleRoot,"merkleRoot"),l=ed(f.nullifierHash,"nullifierHash"),m=ed(f.commitment,"commitment"),o=ee(f.amount,"amount"),p=ee(f.fee,"fee"),q=f.publicInputs.map((a,b)=>(function(a,b){if("string"!=typeof a&&"number"!=typeof a&&"bigint"!=typeof a)throw Error(`publicInputs[${b}] must be numeric`);let c=`${a}`.trim();if(c.length>78)throw Error(`publicInputs[${b}] is too large`);if(!dL.test(c))throw Error(`publicInputs[${b}] must be non-negative integer`);let d=BigInt(c);if(d>dN)throw Error(`publicInputs[${b}] exceeds 32-byte scalar range`);return d.toString()})(a,b)),r=[BigInt(`0x${n}`).toString(),BigInt(`0x${l}`).toString(),ds(k),ds(h),o.toString(),p.toString(),ds(j),BigInt(`0x${m}`).toString()]}catch(b){let a=b instanceof Error?b.message:"Invalid request fields.";return x.NextResponse.json({error:a},{status:400})}if(o<=0n)return x.NextResponse.json({error:"amount must be greater than zero."},{status:400});if(p<100000000n)return x.NextResponse.json({error:"Fee must be at least 1.0 (100000000)."},{status:400});if(o<=p)return x.NextResponse.json({error:"amount must be greater than fee."},{status:400});for(let a=0;a<r.length;a++)if(q[a]!==r[a])return x.NextResponse.json({error:`publicInputs mismatch at index ${a}.`},{status:400});let w=!1;try{w=await eo(l)}catch{return x.NextResponse.json({error:"Replay guard unavailable. Retry later."},{status:503})}if(!w)return x.NextResponse.json({error:"Nullifier is already being processed."},{status:409});b=l;let[y,A,B]=await Promise.all([eC(i,n),eB(i,l),eE(i,m)]);if(!y)return await d(),x.NextResponse.json({error:"Unknown merkle root."},{status:400});if(A)return await d(),x.NextResponse.json({error:"Nullifier already used."},{status:409});if(B)return await d(),x.NextResponse.json({error:"Commitment already spent."},{status:409});if(dS){let a=await eG(i);if(a===dM)return await d(),x.NextResponse.json({error:"Vault verifier is not configured."},{status:503});if(dV&&a!==dV)return await d(),x.NextResponse.json({error:"Vault verifier hash does not match RELAYER_EXPECTED_VERIFIER_HASH."},{status:503});if(await eK(a,j,n,l,m,k,h))return await d(),x.NextResponse.json({error:"On-chain verifier appears to accept invalid sentinel proofs. Refusing relay."},{status:503})}let C=await eu();if(!await C.groth16.verify(di,q,f.proof))return await d(),x.NextResponse.json({error:"Invalid Zero-Knowledge Proof."},{status:400});let D=await dv(f.proof),E=function(a){if(!Array.isArray(a)||7!==a.length)throw Error("publicInputs must contain exactly 7 values.");let b=[];for(let c=0;c<a.length;c++)b.push(function(a,b){if(a<0n)throw Error(`${b} must be non-negative`);let c=Buffer.alloc(32),d=a;for(let a=0;a<32;a++)c[a]=Number(255n&d),d>>=8n;if(0n!==d)throw Error(`${b} exceeds 32-byte scalar range`);return c}(BigInt(a[c]),`publicInputs[${c}]`));let c=Buffer.concat(b);if(224!==c.length)throw Error("publicInputs payload length mismatch.");return c.toString("base64")}(q),F=[z.sc.ContractParam.hash160(j),z.sc.ContractParam.byteArray(D),z.sc.ContractParam.byteArray(E),z.sc.ContractParam.byteArray(ef(n)),z.sc.ContractParam.byteArray(ef(l)),z.sc.ContractParam.byteArray(ef(m)),z.sc.ContractParam.hash160(k),z.sc.ContractParam.hash160(h),z.sc.ContractParam.integer(o.toString()),z.sc.ContractParam.integer(p.toString())],G=await et(),H=new z.experimental.SmartContract(i,{networkMagic:G,rpcAddress:dA,account:g}),I=[new z.tx.Signer({account:g.scriptHash,scopes:z.tx.WitnessScope.CalledByEntry})],J=await H.invoke("withdraw",F,I);return c=!0,x.NextResponse.json({success:!0,txid:J,message:"Withdrawal submitted to network.",mode:dO})}catch(a){return console.error("Relay Error:",a instanceof Error?a.message:"unknown error"),x.NextResponse.json({success:!1,error:eh(a,"Internal relayer error")},{status:500})}finally{b&&!c&&await eq(b)}}let eN=new g.AppRouteRouteModule({definition:{kind:h.RouteKind.APP_ROUTE,page:"/api/relay/route",pathname:"/api/relay",filename:"route",bundlePath:"app/api/relay/route"},distDir:".next",relativeProjectDir:"",resolvedPagePath:"/home/neo/git/znep17/web/app/api/relay/route.ts",nextConfigOutput:"",userland:f}),{workAsyncStorage:eO,workUnitAsyncStorage:eP,serverHooks:eQ}=eN;function eR(){return(0,i.patchFetch)({workAsyncStorage:eO,workUnitAsyncStorage:eP})}async function eS(a,b,c){eN.isDev&&(0,j.addRequestMeta)(a,"devRequestTimingInternalsEnd",process.hrtime.bigint());let d="/api/relay/route";"/index"===d&&(d="/");let e=await eN.prepare(a,b,{srcPage:d,multiZoneDraftMode:!1});if(!e)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:f,params:g,nextConfig:i,parsedUrl:x,isDraftMode:y,prerenderManifest:z,routerServerContext:A,isOnDemandRevalidate:B,revalidateOnlyGenerated:C,resolvedPathname:D,clientReferenceManifest:E,serverActionsManifest:F}=e,G=(0,m.normalizeAppPath)(d),H=!!(z.dynamicRoutes[G]||z.routes[D]),I=async()=>((null==A?void 0:A.render404)?await A.render404(a,b,x,!1):b.end("This page could not be found"),null);if(H&&!y){let a=!!z.routes[D],b=z.dynamicRoutes[G];if(b&&!1===b.fallback&&!a){if(i.experimental.adapterPath)return await I();throw new v.NoFallbackError}}let J=null;!H||eN.isDev||y||(J="/index"===(J=D)?"/":J);let K=!0===eN.isDev||!H,L=H&&!K;F&&E&&(0,l.setManifestsSingleton)({page:d,clientReferenceManifest:E,serverActionsManifest:F});let M=a.method||"GET",N=(0,k.getTracer)(),O=N.getActiveScopeSpan(),P={params:g,prerenderManifest:z,renderOpts:{experimental:{authInterrupts:!!i.experimental.authInterrupts},cacheComponents:!!i.cacheComponents,supportsDynamicResponse:K,incrementalCache:(0,j.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:i.cacheLife,waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:void 0,onInstrumentationRequestError:(b,c,d,e)=>eN.onRequestError(a,b,d,e,A)},sharedContext:{buildId:f}},Q=new n.NodeNextRequest(a),R=new n.NodeNextResponse(b),S=o.NextRequestAdapter.fromNodeNextRequest(Q,(0,o.signalFromNodeResponse)(b));try{let e=async a=>eN.handle(S,P).finally(()=>{if(!a)return;a.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let c=N.getRootSpanAttributes();if(!c)return;if(c.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${c.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=c.get("next.route");if(e){let b=`${M} ${e}`;a.setAttributes({"next.route":e,"http.route":e,"next.span_name":b}),a.updateName(b)}else a.updateName(`${M} ${d}`)}),f=!!(0,j.getRequestMeta)(a,"minimalMode"),g=async g=>{var j,k;let l=async({previousCacheEntry:h})=>{try{if(!f&&B&&C&&!h)return b.statusCode=404,b.setHeader("x-nextjs-cache","REVALIDATED"),b.end("This page could not be found"),null;let d=await e(g);a.fetchMetrics=P.renderOpts.fetchMetrics;let i=P.renderOpts.pendingWaitUntil;i&&c.waitUntil&&(c.waitUntil(i),i=void 0);let j=P.renderOpts.collectedTags;if(!H)return await (0,r.I)(Q,R,d,P.renderOpts.pendingWaitUntil),null;{let a=await d.blob(),b=(0,s.toNodeOutgoingHttpHeaders)(d.headers);j&&(b[u.NEXT_CACHE_TAGS_HEADER]=j),!b["content-type"]&&a.type&&(b["content-type"]=a.type);let c=void 0!==P.renderOpts.collectedRevalidate&&!(P.renderOpts.collectedRevalidate>=u.INFINITE_CACHE)&&P.renderOpts.collectedRevalidate,e=void 0===P.renderOpts.collectedExpire||P.renderOpts.collectedExpire>=u.INFINITE_CACHE?void 0:P.renderOpts.collectedExpire;return{value:{kind:w.CachedRouteKind.APP_ROUTE,status:d.status,body:Buffer.from(await a.arrayBuffer()),headers:b},cacheControl:{revalidate:c,expire:e}}}}catch(b){throw(null==h?void 0:h.isStale)&&await eN.onRequestError(a,b,{routerKind:"App Router",routePath:d,routeType:"route",revalidateReason:(0,q.c)({isStaticGeneration:L,isOnDemandRevalidate:B})},!1,A),b}},m=await eN.handleResponse({req:a,nextConfig:i,cacheKey:J,routeKind:h.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:z,isRoutePPREnabled:!1,isOnDemandRevalidate:B,revalidateOnlyGenerated:C,responseGenerator:l,waitUntil:c.waitUntil,isMinimalMode:f});if(!H)return null;if((null==m||null==(j=m.value)?void 0:j.kind)!==w.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==m||null==(k=m.value)?void 0:k.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});f||b.setHeader("x-nextjs-cache",B?"REVALIDATED":m.isMiss?"MISS":m.isStale?"STALE":"HIT"),y&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let n=(0,s.fromNodeOutgoingHttpHeaders)(m.value.headers);return f&&H||n.delete(u.NEXT_CACHE_TAGS_HEADER),!m.cacheControl||b.getHeader("Cache-Control")||n.get("Cache-Control")||n.set("Cache-Control",(0,t.getCacheControlHeader)(m.cacheControl)),await (0,r.I)(Q,R,new Response(m.value.body,{headers:n,status:m.value.status||200})),null};O?await g(O):await N.withPropagatedContext(a.headers,()=>N.trace(p.BaseServerSpan.handleRequest,{spanName:`${M} ${d}`,kind:k.SpanKind.SERVER,attributes:{"http.method":M,"http.target":a.url}},g))}catch(b){if(b instanceof v.NoFallbackError||await eN.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"route",revalidateReason:(0,q.c)({isStaticGeneration:L,isOnDemandRevalidate:B})},!1,A),H)throw b;return await (0,r.I)(Q,R,new Response(null,{status:500})),null}}},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3566:a=>{"use strict";a.exports=require("worker_threads")},3709:a=>{function b(a){var b=Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b}b.keys=()=>[],b.resolve=b,b.id=3709,a.exports=b},3873:a=>{"use strict";a.exports=require("path")},4075:a=>{"use strict";a.exports=require("zlib")},4246:(a,b)=>{b.bigInt2BytesLE=function(a,b){let c=Array(b),d=BigInt(a);for(let a=0;a<b;a++)c[a]=Number(255n&d),d>>=8n;return c},b.bigInt2U32LE=function(a,b){let c=Array(b),d=BigInt(a);for(let a=0;a<b;a++)c[a]=Number(4294967295n&d),d>>=32n;return c},b.isOcamNum=function(a){return!!Array.isArray(a)&&3==a.length&&"number"==typeof a[0]&&"number"==typeof a[1]&&!!Array.isArray(a[2])}},4607:a=>{a.exports=function(a,b,c,d,e,f){void 0===f&&(f=d<e);let g=a.addFunction(b);g.addParam("pIn","i32"),g.addParam("n","i32"),g.addParam("pOut","i32"),g.addLocal("i","i32"),g.addLocal("itIn","i32"),g.addLocal("itOut","i32");let h=g.getCodeBuilder();f?g.addCode(h.setLocal("itIn",h.i32_add(h.getLocal("pIn"),h.i32_mul(h.i32_sub(h.getLocal("n"),h.i32_const(1)),h.i32_const(d)))),h.setLocal("itOut",h.i32_add(h.getLocal("pOut"),h.i32_mul(h.i32_sub(h.getLocal("n"),h.i32_const(1)),h.i32_const(e)))),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.call(c,h.getLocal("itIn"),h.getLocal("itOut")),h.setLocal("itIn",h.i32_sub(h.getLocal("itIn"),h.i32_const(d))),h.setLocal("itOut",h.i32_sub(h.getLocal("itOut"),h.i32_const(e))),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0)))):g.addCode(h.setLocal("itIn",h.getLocal("pIn")),h.setLocal("itOut",h.getLocal("pOut")),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.call(c,h.getLocal("itIn"),h.getLocal("itOut")),h.setLocal("itIn",h.i32_add(h.getLocal("itIn"),h.i32_const(d))),h.setLocal("itOut",h.i32_add(h.getLocal("itOut"),h.i32_const(e))),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}},4795:a=>{a.exports=function(a,b,c,d,e,f){void 0===f&&(f=d<e);let g=a.addFunction(b);g.addParam("pIn1","i32"),g.addParam("pIn2","i32"),g.addParam("n","i32"),g.addParam("pOut","i32"),g.addLocal("i","i32"),g.addLocal("itIn1","i32"),g.addLocal("itIn2","i32"),g.addLocal("itOut","i32");let h=g.getCodeBuilder();f?g.addCode(h.setLocal("itIn1",h.i32_add(h.getLocal("pIn1"),h.i32_mul(h.i32_sub(h.getLocal("n"),h.i32_const(1)),h.i32_const(d)))),h.setLocal("itIn2",h.i32_add(h.getLocal("pIn2"),h.i32_mul(h.i32_sub(h.getLocal("n"),h.i32_const(1)),h.i32_const(d)))),h.setLocal("itOut",h.i32_add(h.getLocal("pOut"),h.i32_mul(h.i32_sub(h.getLocal("n"),h.i32_const(1)),h.i32_const(e)))),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.call(c,h.getLocal("itIn1"),h.getLocal("itIn2"),h.getLocal("itOut")),h.setLocal("itIn1",h.i32_sub(h.getLocal("itIn1"),h.i32_const(d))),h.setLocal("itIn2",h.i32_sub(h.getLocal("itIn2"),h.i32_const(d))),h.setLocal("itOut",h.i32_sub(h.getLocal("itOut"),h.i32_const(e))),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0)))):g.addCode(h.setLocal("itIn1",h.getLocal("pIn1")),h.setLocal("itIn2",h.getLocal("pIn2")),h.setLocal("itOut",h.getLocal("pOut")),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.call(c,h.getLocal("itIn1"),h.getLocal("itIn2"),h.getLocal("itOut")),h.setLocal("itIn1",h.i32_add(h.getLocal("itIn1"),h.i32_const(d))),h.setLocal("itIn2",h.i32_add(h.getLocal("itIn2"),h.i32_const(d))),h.setLocal("itOut",h.i32_add(h.getLocal("itOut"),h.i32_const(e))),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}},4830:a=>{a.exports=function(a,b,c,d,e,f,g){let h=a.addFunction(b);h.addParam("base","i32"),h.addParam("scalar","i32"),h.addParam("scalarLength","i32"),h.addParam("r","i32"),h.addLocal("i","i32"),h.addLocal("b","i32");let i=h.getCodeBuilder(),j=i.i32_const(a.alloc(c));h.addCode(i.if(i.i32_eqz(i.getLocal("scalarLength")),[...i.call(g,i.getLocal("r")),...i.ret([])])),h.addCode(i.call(f,i.getLocal("base"),j)),h.addCode(i.call(g,i.getLocal("r"))),h.addCode(i.setLocal("i",i.getLocal("scalarLength"))),h.addCode(i.block(i.loop(i.setLocal("i",i.i32_sub(i.getLocal("i"),i.i32_const(1))),i.setLocal("b",i.i32_load8_u(i.i32_add(i.getLocal("scalar"),i.getLocal("i")))),...function(){let a=[];for(let b=0;b<8;b++)a.push(...i.call(e,i.getLocal("r"),i.getLocal("r")),...i.if(i.i32_ge_u(i.getLocal("b"),i.i32_const(128>>b)),[...i.setLocal("b",i.i32_sub(i.getLocal("b"),i.i32_const(128>>b))),...i.call(d,i.getLocal("r"),j,i.getLocal("r"))]));return a}(),i.br_if(1,i.i32_eqz(i.getLocal("i"))),i.br(0))))}},4870:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4984:a=>{"use strict";a.exports=require("readline")},5043:(a,b,c)=>{"use strict";let d;c.d(b,{Zh:()=>av,Bw:()=>ab,mG:()=>aj,X5:()=>aR,tK:()=>aP,k1:()=>aO,XN:()=>aQ,Wp:()=>aS});var e={};c.r(e),c.d(e,{abs:()=>D,add:()=>w,band:()=>M,bitLength:()=>k,bits:()=>t,bor:()=>N,bxor:()=>O,div:()=>E,e:()=>i,eq:()=>G,exp:()=>C,fromArray:()=>j,fromRprBE:()=>V,fromRprLE:()=>U,fromString:()=>h,geq:()=>L,gt:()=>J,isNegative:()=>l,isOdd:()=>r,isZero:()=>m,land:()=>P,leq:()=>K,lnot:()=>R,lor:()=>Q,lt:()=>I,mod:()=>F,mul:()=>z,naf:()=>s,neg:()=>y,neq:()=>H,one:()=>Z,pow:()=>B,shiftLeft:()=>n,shiftRight:()=>o,shl:()=>p,shr:()=>q,square:()=>A,sub:()=>x,toArray:()=>v,toLEBuff:()=>X,toNumber:()=>u,toRprBE:()=>T,toRprLE:()=>S,toString:()=>W,zero:()=>Y});var f={};c.r(f),c.d(f,{array2buffer:()=>at,beBuff2int:()=>al,beInt2Buff:()=>am,bitReverse:()=>aq,buffReverseBits:()=>as,buffer2array:()=>au,leBuff2int:()=>an,leInt2Buff:()=>ao,log2:()=>ar,stringifyBigInts:()=>function a(b){if("bigint"==typeof b||void 0!==b.eq)return b.toString(10);if(b instanceof Uint8Array)return U(b,0);if(Array.isArray(b))return b.map(a);{if("object"!=typeof b)return b;let c={};return Object.keys(b).forEach(d=>{c[d]=a(b[d])}),c}},stringifyFElements:()=>function a(b,c){if("bigint"==typeof c||void 0!==c.eq)return c.toString(10);if(c instanceof Uint8Array)return b.toString(b.e(c));if(Array.isArray(c))return c.map(a.bind(this,b));{if("object"!=typeof c)return c;let d={};return Object.keys(c).forEach(e=>{d[e]=a(b,c[e])}),d}},unstringifyBigInts:()=>function a(b){if("string"==typeof b&&/^[0-9]+$/.test(b)||"string"==typeof b&&/^0x[0-9a-fA-F]+$/.test(b))return BigInt(b);if(Array.isArray(b))return b.map(a);{if("object"!=typeof b)return b;if(null===b)return null;let c={};return Object.keys(b).forEach(d=>{c[d]=a(b[d])}),c}},unstringifyFElements:()=>function a(b,c){if("string"==typeof c&&/^[0-9]+$/.test(c)||"string"==typeof c&&/^0x[0-9a-fA-F]+$/.test(c))return b.e(c);if(Array.isArray(c))return c.map(a.bind(this,b));{if("object"!=typeof c)return c;if(null===c)return null;let d={};return Object.keys(c).forEach(e=>{d[e]=a(b,c[e])}),d}}});let g=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function h(a,b){if(!b||10==b)return BigInt(a);if(16==b)if("0x"==a.slice(0,2))return BigInt(a);else return BigInt("0x"+a)}let i=h;function j(a,b){let c=BigInt(0);b=BigInt(b);for(let d=0;d<a.length;d++)c=c*b+BigInt(a[d]);return c}function k(a){let b=a.toString(16);return(b.length-1)*4+g[parseInt(b[0],16)]}function l(a){return BigInt(a)<BigInt(0)}function m(a){return!a}function n(a,b){return BigInt(a)<<BigInt(b)}function o(a,b){return BigInt(a)>>BigInt(b)}let p=n,q=o;function r(a){return(BigInt(a)&BigInt(1))==BigInt(1)}function s(a){let b=BigInt(a),c=[];for(;b;){if(b&BigInt(1)){let a=2-Number(b%BigInt(4));c.push(a),b-=BigInt(a)}else c.push(0);b>>=BigInt(1)}return c}function t(a){let b=BigInt(a),c=[];for(;b;)b&BigInt(1)?c.push(1):c.push(0),b>>=BigInt(1);return c}function u(a){if(a>BigInt(Number.MAX_SAFE_INTEGER))throw Error("Number too big");return Number(a)}function v(a,b){let c=[],d=BigInt(a);for(b=BigInt(b);d;)c.unshift(Number(d%b)),d/=b;return c}function w(a,b){return BigInt(a)+BigInt(b)}function x(a,b){return BigInt(a)-BigInt(b)}function y(a){return-BigInt(a)}function z(a,b){return BigInt(a)*BigInt(b)}function A(a){return BigInt(a)*BigInt(a)}function B(a,b){return BigInt(a)**BigInt(b)}function C(a,b){return BigInt(a)**BigInt(b)}function D(a){return BigInt(a)>=0?BigInt(a):-BigInt(a)}function E(a,b){return BigInt(a)/BigInt(b)}function F(a,b){return BigInt(a)%BigInt(b)}function G(a,b){return BigInt(a)==BigInt(b)}function H(a,b){return BigInt(a)!=BigInt(b)}function I(a,b){return BigInt(a)<BigInt(b)}function J(a,b){return BigInt(a)>BigInt(b)}function K(a,b){return BigInt(a)<=BigInt(b)}function L(a,b){return BigInt(a)>=BigInt(b)}function M(a,b){return BigInt(a)&BigInt(b)}function N(a,b){return BigInt(a)|BigInt(b)}function O(a,b){return BigInt(a)^BigInt(b)}function P(a,b){return BigInt(a)&&BigInt(b)}function Q(a,b){return BigInt(a)||BigInt(b)}function R(a){return!BigInt(a)}function S(a,b,c,d){let e="0000000"+c.toString(16),f=new Uint32Array(a.buffer,a.byteOffset+b,d/4),g=((e.length-7)*4-1>>5)+1;for(let a=0;a<g;a++)f[a]=parseInt(e.substring(e.length-8*a-8,e.length-8*a),16);for(let a=g;a<f.length;a++)f[a]=0;for(let b=4*f.length;b<d;b++)a[b]=u(M(o(c,8*b),255))}function T(a,b,c,d){let e="0000000"+c.toString(16),f=new DataView(a.buffer,a.byteOffset+b,d),g=((e.length-7)*4-1>>5)+1;for(let a=0;a<g;a++)f.setUint32(d-4*a-4,parseInt(e.substring(e.length-8*a-8,e.length-8*a),16),!1);for(let a=0;a<d/4-g;a++)f[a]=0}function U(a,b,c){c=c||a.byteLength,b=b||0;let d=new Uint32Array(a.buffer,a.byteOffset+b,c/4),e=Array(c/4);return d.forEach((a,b)=>e[e.length-b-1]=a.toString(16).padStart(8,"0")),h(e.join(""),16)}function V(a,b,c){c=c||a.byteLength,b=b||0;let d=new DataView(a.buffer,a.byteOffset+b,c),e=Array(c/4);for(let a=0;a<c/4;a++)e[a]=d.getUint32(4*a,!1).toString(16).padStart(8,"0");return h(e.join(""),16)}function W(a,b){return a.toString(b)}function X(a){let b=new Uint8Array(Math.floor((k(a)-1)/8)+1);return S(b,0,a,b.byteLength),b}let Y=i(0),Z=i(1),$=[];for(let a=0;a<256;a++)$[a]=function(a,b){let c=0,d=a;for(let a=0;a<8;a++)c<<=1,c|=1&d,d>>=1;return c}(a,8);function _(a,b,c){if(!c)return a.one;let d=t(c);if(0==d.length)return a.one;let e=b;for(let c=d.length-2;c>=0;c--)e=a.square(e),d[c]&&(e=a.mul(e,b));return e}function aa(a,b,c,d,e){a[b]=a[b]+a[c]>>>0,a[e]=(a[e]^a[b])>>>0,a[e]=(a[e]<<16|a[e]>>>16&65535)>>>0,a[d]=a[d]+a[e]>>>0,a[c]=(a[c]^a[d])>>>0,a[c]=(a[c]<<12|a[c]>>>20&4095)>>>0,a[b]=a[b]+a[c]>>>0,a[e]=(a[e]^a[b])>>>0,a[e]=(a[e]<<8|a[e]>>>24&255)>>>0,a[d]=a[d]+a[e]>>>0,a[c]=(a[c]^a[d])>>>0,a[c]=(a[c]<<7|a[c]>>>25&127)>>>0}class ab{constructor(a){a=a||[0,0,0,0,0,0,0,0],this.state=[0x61707865,0x3320646e,0x79622d32,0x6b206574,a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],0,0,0,0],this.idx=16,this.buff=Array(16)}nextU32(){return 16==this.idx&&this.update(),this.buff[this.idx++]}nextU64(){return w(z(this.nextU32(),0x100000000),this.nextU32())}nextBool(){return(1&this.nextU32())==1}update(){for(let a=0;a<16;a++)this.buff[a]=this.state[a];for(let b=0;b<10;b++){var a;aa(a=this.buff,0,4,8,12),aa(a,1,5,9,13),aa(a,2,6,10,14),aa(a,3,7,11,15),aa(a,0,5,10,15),aa(a,1,6,11,12),aa(a,2,7,8,13),aa(a,3,4,9,14)}for(let a=0;a<16;a++)this.buff[a]=this.buff[a]+this.state[a]>>>0;this.idx=0,this.state[12]=this.state[12]+1>>>0,0!=this.state[12]||(this.state[13]=this.state[13]+1>>>0,0!=this.state[13]||(this.state[14]=this.state[14]+1>>>0,0==this.state[14]&&(this.state[15]=this.state[15]+1>>>0)))}}var ac=c(5511);function ad(a){let b=new Uint8Array(a);return ac.randomFillSync(b),b}let ae=null;function af(){return ae||(ae=new ab(function(){let a=new Uint32Array(ad(32).buffer),b=[];for(let c=0;c<8;c++)b.push(a[c]);return b}()))}class ag{constructor(a,b,c){this.F=b,this.G=a,this.opMulGF=c;let d=b.sqrt_t||b.t,e=b.sqrt_s||b.s,f=b.one;for(;b.eq(b.pow(f,b.half),b.one);)f=b.add(f,b.one);this.w=Array(e+1),this.wi=Array(e+1),this.w[e]=this.F.pow(f,d),this.wi[e]=this.F.inv(this.w[e]);let g=e-1;for(;g>=0;)this.w[g]=this.F.square(this.w[g+1]),this.wi[g]=this.F.square(this.wi[g+1]),g--;this.roots=[],this._setRoots(Math.min(e,15))}_setRoots(a){for(let b=a;b>=0&&!this.roots[b];b--){let a=this.F.one,c=1<<b,d=Array(c);for(let e=0;e<c;e++)d[e]=a,a=this.F.mul(a,this.w[b]);this.roots[b]=d}}fft(a){if(a.length<=1)return a;let b=ah(a.length-1)+1;this._setRoots(b);let c=1<<b;if(a.length!=c)throw Error("Size must be multiple of 2");return ai(this,a,b,0,1)}ifft(a){if(a.length<=1)return a;let b=ah(a.length-1)+1;this._setRoots(b);let c=1<<b;if(a.length!=c)throw Error("Size must be multiple of 2");let d=ai(this,a,b,0,1),e=this.F.inv(this.F.mulScalar(this.F.one,c)),f=Array(c);for(let a=0;a<c;a++)f[a]=this.opMulGF(d[(c-a)%c],e);return f}}function ah(a){return((0xffff0000&a)!=0?(a&=0xffff0000,16):0)|((0xff00ff00&a)!=0?(a&=0xff00ff00,8):0)|((0xf0f0f0f0&a)!=0?(a&=0xf0f0f0f0,4):0)|((0xcccccccc&a)!=0?(a&=0xcccccccc,2):0)|(0xaaaaaaaa&a)!=0}function ai(a,b,c,d,e){let f=1<<c;if(1==f)return[b[d]];if(2==f)return[a.G.add(b[d],b[d+e]),a.G.sub(b[d],b[d+e])];let g=f>>1,h=ai(a,b,c-1,d,2*e),i=ai(a,b,c-1,d+e,2*e),j=Array(f);for(let b=0;b<g;b++)j[b]=a.G.add(h[b],a.opMulGF(i[b],a.roots[c][b])),j[b+g]=a.G.sub(h[b],a.opMulGF(i[b],a.roots[c][b]));return j}class aj{constructor(a){this.type="F1",this.one=BigInt(1),this.zero=BigInt(0),this.p=BigInt(a),this.m=1,this.negone=this.p-this.one,this.two=BigInt(2),this.half=this.p>>this.one,this.bitLength=k(this.p),this.mask=(this.one<<BigInt(this.bitLength))-this.one,this.n64=Math.floor((this.bitLength-1)/64)+1,this.n32=2*this.n64,this.n8=8*this.n64,this.R=this.e(this.one<<BigInt(64*this.n64)),this.Ri=this.inv(this.R);const b=this.negone>>this.one;this.nqr=this.two;let c=this.pow(this.nqr,b);for(;!this.eq(c,this.negone);)this.nqr=this.nqr+this.one,c=this.pow(this.nqr,b);for(this.s=0,this.t=this.negone;(this.t&this.one)==this.zero;)this.s=this.s+1,this.t=this.t>>this.one;this.nqr_to_t=this.pow(this.nqr,this.t),function(a){if(a.m%2==1)if(G(F(a.p,4),1))if(G(F(a.p,8),1))if(G(F(a.p,16),1)){var b,c,d=a;for(d.sqrt_q=B(d.p,d.m),d.sqrt_s=0,d.sqrt_t=x(d.sqrt_q,1);!r(d.sqrt_t);)d.sqrt_s=d.sqrt_s+1,d.sqrt_t=E(d.sqrt_t,2);let e=d.one;for(;d.eq(e,d.one);){let a=d.random();d.sqrt_z=d.pow(a,d.sqrt_t),e=d.pow(d.sqrt_z,2**(d.sqrt_s-1))}d.sqrt_tm1d2=E(x(d.sqrt_t,1),2),d.sqrt=function(a){if(this.isZero(a))return this.zero;let b=this.pow(a,this.sqrt_tm1d2),c=this.pow(this.mul(this.square(b),a),2**(this.sqrt_s-1));if(this.eq(c,this.negone))return null;let d=this.sqrt_s,e=this.mul(a,b),f=this.mul(e,b),g=this.sqrt_z;for(;!this.eq(f,this.one);){let a=this.square(f),c=1;for(;!this.eq(a,this.one);)a=this.square(a),c++;b=g;for(let a=0;a<d-c-1;a++)b=this.square(b);g=this.square(b),f=this.mul(f,g),e=this.mul(e,b),d=c}return this.geq(e,this.zero)?e:this.neg(e)}}else if(G(F(a.p,16),9))a.sqrt=function(){throw Error("Sqrt alg 4 not implemented")};else throw Error("Field withot sqrt");else if(G(F(a.p,8),5))a.sqrt=function(){throw Error("Sqrt alg 3 not implemented")};else throw Error("Field withot sqrt");else{G(F(a.p,4),3)&&((b=a).sqrt_q=B(b.p,b.m),b.sqrt_e1=E(x(b.sqrt_q,3),4),b.sqrt=function(a){if(this.isZero(a))return this.zero;let c=this.pow(a,this.sqrt_e1),d=this.mul(this.square(c),a);if(this.eq(d,this.negone))return null;let e=this.mul(c,a);return b.geq(e,b.zero)?e:b.neg(e)})}else{let b=F(B(a.p,a.m/2),4);1==b?a.sqrt=function(){throw Error("Sqrt alg 10 not implemented")}:3==b?((c=a).sqrt_q=B(c.p,c.m/2),c.sqrt_e34=E(x(c.sqrt_q,3),4),c.sqrt_e12=E(x(c.sqrt_q,1),2),c.frobenius=function(a,b){return a%2==1?c.conjugate(b):b},c.sqrt=function(a){let b,c=this.pow(a,this.sqrt_e34),d=this.mul(this.square(c),a),e=this.mul(this.frobenius(1,d),d);if(this.eq(e,this.negone))return null;let f=this.mul(c,a);if(this.eq(d,this.negone))b=this.mul(f,[this.F.zero,this.F.one]);else{let a=this.pow(this.add(this.one,d),this.sqrt_e12);b=this.mul(a,f)}return this.geq(b,this.zero)?b:this.neg(b)}):a.sqrt=function(){throw Error("Sqrt alg 8 not implemented")}}}(this),this.FFT=new ag(this,this,this.mul.bind(this)),this.fft=this.FFT.fft.bind(this.FFT),this.ifft=this.FFT.ifft.bind(this.FFT),this.w=this.FFT.w,this.wi=this.FFT.wi,this.shift=this.square(this.nqr),this.k=this.exp(this.nqr,2**this.s)}e(a,b){let c;if(b?16==b&&(c=BigInt("0x"+a)):c=BigInt(a),!(c<0))return c>=this.p?c%this.p:c;{let a=-c;return a>=this.p&&(a%=this.p),this.p-a}}add(a,b){let c=a+b;return c>=this.p?c-this.p:c}sub(a,b){return a>=b?a-b:this.p-b+a}neg(a){return a?this.p-a:a}mul(a,b){return a*b%this.p}mulScalar(a,b){return a*this.e(b)%this.p}square(a){return a*a%this.p}eq(a,b){return a==b}neq(a,b){return a!=b}lt(a,b){return(a>this.half?a-this.p:a)<(b>this.half?b-this.p:b)}gt(a,b){return(a>this.half?a-this.p:a)>(b>this.half?b-this.p:b)}leq(a,b){return(a>this.half?a-this.p:a)<=(b>this.half?b-this.p:b)}geq(a,b){return(a>this.half?a-this.p:a)>=(b>this.half?b-this.p:b)}div(a,b){return this.mul(a,this.inv(b))}idiv(a,b){if(!b)throw Error("Division by zero");return a/b}inv(a){if(!a)throw Error("Division by zero");let b=this.zero,c=this.p,d=this.one,e=a%this.p;for(;e;){let a=c/e;[b,d]=[d,b-a*d],[c,e]=[e,c-a*e]}return b<this.zero&&(b+=this.p),b}mod(a,b){return a%b}pow(a,b){return _(this,a,b)}exp(a,b){return _(this,a,b)}band(a,b){let c=a&b&this.mask;return c>=this.p?c-this.p:c}bor(a,b){let c=(a|b)&this.mask;return c>=this.p?c-this.p:c}bxor(a,b){let c=(a^b)&this.mask;return c>=this.p?c-this.p:c}bnot(a){let b=a^this.mask;return b>=this.p?b-this.p:b}shl(a,b){if(Number(b)<this.bitLength){let c=a<<b&this.mask;return c>=this.p?c-this.p:c}{let c=this.p-b;return Number(c)<this.bitLength?a>>c:this.zero}}shr(a,b){if(Number(b)<this.bitLength)return a>>b;{let c=this.p-b;if(!(Number(c)<this.bitLength))return 0;{let b=a<<c&this.mask;return b>=this.p?b-this.p:b}}}land(a,b){return a&&b?this.one:this.zero}lor(a,b){return a||b?this.one:this.zero}lnot(a){return a?this.zero:this.one}sqrt_old(a){if(a==this.zero)return this.zero;if(this.pow(a,this.negone>>this.one)!=this.one)return null;let b=this.s,c=this.nqr_to_t,d=this.pow(a,this.t),e=this.pow(a,this.add(this.t,this.one)>>this.one);for(;d!=this.one;){let a=this.square(d),f=1;for(;a!=this.one;)f++,a=this.square(a);let g=c;for(let a=0;a<b-f-1;a++)g=this.square(g);b=f,c=this.square(g),d=this.mul(d,c),e=this.mul(e,g)}return e>this.p>>this.one&&(e=this.neg(e)),e}normalize(a,b){if(!((a=BigInt(a,b))<0))return a>=this.p?a%this.p:a;{let b=-a;return b>=this.p&&(b%=this.p),this.p-b}}random(){let a=2*this.bitLength/8,b=this.zero;for(let c=0;c<a;c++)b=(b<<BigInt(8))+BigInt(ad(1)[0]);return b%this.p}toString(a,b){return b=b||10,a>this.half&&10==b?"-"+(this.p-a).toString(b):a.toString(b)}isZero(a){return a==this.zero}fromRng(a){let b;do{b=this.zero;for(let c=0;c<this.n64;c++)b+=a.nextU64()<<BigInt(64*c);b&=this.mask}while(b>=this.p);return b*this.Ri%this.p}fft(a){return this.FFT.fft(a)}ifft(a){return this.FFT.ifft(a)}toRprLE(a,b,c){S(a,b,c,8*this.n64)}toRprBE(a,b,c){T(a,b,c,8*this.n64)}toRprBEM(a,b,c){return this.toRprBE(a,b,this.mul(this.R,c))}toRprLEM(a,b,c){return this.toRprLE(a,b,this.mul(this.R,c))}fromRprLE(a,b){return U(a,b,this.n8)}fromRprBE(a,b){return V(a,b,this.n8)}fromRprLEM(a,b){return this.mul(this.fromRprLE(a,b),this.Ri)}fromRprBEM(a,b){return this.mul(this.fromRprBE(a,b),this.Ri)}toObject(a){return a}}var ak=c(9426);function al(a){let b=BigInt(0),c=a.length,d=0,e=new DataView(a.buffer,a.byteOffset,a.byteLength);for(;c>0;)c>=4?(c-=4,b+=BigInt(e.getUint32(c))<<BigInt(8*d),d+=4):c>=2?(c-=2,b+=BigInt(e.getUint16(c))<<BigInt(8*d),d+=2):(c-=1,b+=BigInt(e.getUint8(c))<<BigInt(8*d),d+=1);return b}function am(a,b){let c=a,d=new Uint8Array(b),e=new DataView(d.buffer),f=b;for(;f>0;)f-4>=0?(f-=4,e.setUint32(f,Number(c&BigInt(0xffffffff))),c>>=BigInt(32)):f-2>=0?(f-=2,e.setUint16(f,Number(c&BigInt(65535))),c>>=BigInt(16)):(f-=1,e.setUint8(f,Number(c&BigInt(255))),c>>=BigInt(8));if(c)throw Error("Number does not fit in this length");return d}function an(a){let b=BigInt(0),c=0,d=new DataView(a.buffer,a.byteOffset,a.byteLength);for(;c<a.length;)c+4<=a.length?(b+=BigInt(d.getUint32(c,!0))<<BigInt(8*c),c+=4):c+2<=a.length?(b+=BigInt(d.getUint16(c,!0))<<BigInt(8*c),c+=2):(b+=BigInt(d.getUint8(c,!0))<<BigInt(8*c),c+=1);return b}function ao(a,b){let c=a;void 0===b&&0==(b=Math.floor((k(a)-1)/8)+1)&&(b=1);let d=new Uint8Array(b),e=new DataView(d.buffer),f=0;for(;f<b;)f+4<=b?(e.setUint32(f,Number(c&BigInt(0xffffffff)),!0),f+=4,c>>=BigInt(32)):f+2<=b?(e.setUint16(f,Number(c&BigInt(65535)),!0),f+=2,c>>=BigInt(16)):(e.setUint8(f,Number(c&BigInt(255)),!0),f+=1,c>>=BigInt(8));if(c)throw Error("Number does not fit in this length");return d}let ap=[];for(let a=0;a<256;a++)ap[a]=function(a,b){let c=0,d=a;for(let a=0;a<8;a++)c<<=1,c|=1&d,d>>=1;return c}(a,8);function aq(a,b){return(ap[a>>>24]|ap[a>>>16&255]<<8|ap[a>>>8&255]<<16|ap[255&a]<<24)>>>32-b}function ar(a){return((0xffff0000&a)!=0?(a&=0xffff0000,16):0)|((0xff00ff00&a)!=0?(a&=0xff00ff00,8):0)|((0xf0f0f0f0&a)!=0?(a&=0xf0f0f0f0,4):0)|((0xcccccccc&a)!=0?(a&=0xcccccccc,2):0)|(0xaaaaaaaa&a)!=0}function as(a,b){let c=a.byteLength/b,d=ar(c);if(c!=1<<d)throw Error("Invalid number of pointers");for(let e=0;e<c;e++){let c=aq(e,d);if(e>c){let d=a.slice(e*b,(e+1)*b);a.set(a.slice(c*b,(c+1)*b),e*b),a.set(d,c*b)}}}function at(a,b){let c=new Uint8Array(b*a.length);for(let d=0;d<a.length;d++)c.set(a[d],d*b);return c}function au(a,b){let c=a.byteLength/b,d=Array(c);for(let e=0;e<c;e++)d[e]=a.slice(e*b,e*b+b);return d}class av{constructor(a){this.buffers=[],this.byteLength=a;for(let b=0;b<a;b+=0x40000000){const c=Math.min(a-b,0x40000000);this.buffers.push(new Uint8Array(c))}}slice(a,b){let c;void 0===b&&(b=this.byteLength),void 0===a&&(a=0);let d=b-a,e=Math.floor(a/0x40000000);if(e==Math.floor((a+d-1)/0x40000000)||0==d)return this.buffers[e].slice(a%0x40000000,a%0x40000000+d);let f=e,g=a%0x40000000,h=d;for(;h>0;){let a=g+h>0x40000000?0x40000000-g:h,b=new Uint8Array(this.buffers[f].buffer,this.buffers[f].byteOffset+g,a);if(a==d)return b.slice();c||(c=d<=0x40000000?new Uint8Array(d):new av(d)),c.set(b,d-h),h-=a,f++,g=0}return c}set(a,b){void 0===b&&(b=0);let c=a.byteLength;if(0==c)return;let d=Math.floor(b/0x40000000);if(d==Math.floor((b+c-1)/0x40000000))if(a instanceof av&&1==a.buffers.length)return this.buffers[d].set(a.buffers[0],b%0x40000000);else return this.buffers[d].set(a,b%0x40000000);let e=d,f=b%0x40000000,g=c;for(;g>0;){let b=f+g>0x40000000?0x40000000-f:g,d=a.slice(c-g,c-g+b);new Uint8Array(this.buffers[e].buffer,this.buffers[e].byteOffset+f,b).set(d),g-=b,e++,f=0}}}function aw(a,b,c,d){return async function(e){let f,g=Math.floor(e.byteLength/c);if(g*c!==e.byteLength)throw Error("Invalid buffer size");let h=Math.floor(g/a.concurrency),i=[];for(let f=0;f<a.concurrency;f++){let j;if(0==(j=f<a.concurrency-1?h:g-f*h))continue;let k=[{cmd:"ALLOCSET",var:0,buff:e.slice(f*h*c,f*h*c+j*c)},{cmd:"ALLOC",var:1,len:d*j},{cmd:"CALL",fnName:b,params:[{var:0},{val:j},{var:1}]},{cmd:"GET",out:0,var:1,len:d*j}];i.push(a.queueAction(k))}let j=await Promise.all(i);f=e instanceof av?new av(g*d):new Uint8Array(g*d);let k=0;for(let a=0;a<j.length;a++)f.set(j[a][0],k),k+=j[a][0].byteLength;return f}}class ax{constructor(a,b,c,d){if(this.tm=a,this.prefix=b,this.p=d,this.n8=c,this.type="F1",this.m=1,this.half=o(d,Z),this.bitLength=k(d),this.mask=x(n(Z,this.bitLength),Z),this.pOp1=a.alloc(c),this.pOp2=a.alloc(c),this.pOp3=a.alloc(c),this.tm.instance.exports[b+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,this.n8),this.tm.instance.exports[b+"_one"](this.pOp1),this.one=this.tm.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.n64=Math.floor(c/8),this.n32=Math.floor(c/4),8*this.n64!=this.n8)throw Error("n8 must be a multiple of 8");this.half=o(this.p,Z),this.nqr=this.two;let e=this.exp(this.nqr,this.half);for(;!this.eq(e,this.negone);)this.nqr=this.add(this.nqr,this.one),e=this.exp(this.nqr,this.half);this.shift=this.mul(this.nqr,this.nqr),this.shiftInv=this.inv(this.shift),this.s=0;let f=x(this.p,Z);for(;!r(f);)this.s=this.s+1,f=o(f,Z);this.w=[],this.w[this.s]=this.exp(this.nqr,f);for(let a=this.s-1;a>=0;a--)this.w[a]=this.square(this.w[a+1]);if(!this.eq(this.w[0],this.one))throw Error("Error calculating roots of unity");this.batchToMontgomery=aw(a,b+"_batchToMontgomery",this.n8,this.n8),this.batchFromMontgomery=aw(a,b+"_batchFromMontgomery",this.n8,this.n8)}op2(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2)}op1(a,b){return this.tm.setBuff(this.pOp1,b),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(a,b){return this.tm.setBuff(this.pOp1,b),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3)}add(a,b){return this.op2("_add",a,b)}eq(a,b){return this.op2Bool("_eq",a,b)}isZero(a){return this.op1Bool("_isZero",a)}sub(a,b){return this.op2("_sub",a,b)}neg(a){return this.op1("_neg",a)}inv(a){return this.op1("_inverse",a)}toMontgomery(a){return this.op1("_toMontgomery",a)}fromMontgomery(a){return this.op1("_fromMontgomery",a)}mul(a,b){return this.op2("_mul",a,b)}div(a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(a){return this.op1("_square",a)}isSquare(a){return this.op1Bool("_isSquare",a)}sqrt(a){return this.op1("_sqrt",a)}exp(a,b){return b instanceof Uint8Array||(b=X(i(b))),this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,b.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}isNegative(a){return this.op1Bool("_isNegative",a)}e(a,b){if(a instanceof Uint8Array)return a;let c=i(a,b);l(c)?(J(c=y(c),this.p)&&(c=F(c,this.p)),c=x(this.p,c)):J(c,this.p)&&(c=F(c,this.p));let d=ao(c,this.n8);return this.toMontgomery(d)}toString(a,b){return W(U(this.fromMontgomery(a),0),b)}fromRng(a){let b,c=new Uint8Array(this.n8);do{b=Y;for(let c=0;c<this.n64;c++)b=w(b,n(a.nextU64(),64*c));b=M(b,this.mask)}while(L(b,this.p));return S(c,0,b,this.n8),c}random(){return this.fromRng(af())}toObject(a){return U(this.fromMontgomery(a),0)}fromObject(a){let b=new Uint8Array(this.n8);return S(b,0,a,this.n8),this.toMontgomery(b)}toRprLE(a,b,c){a.set(this.fromMontgomery(c),b)}toRprBE(a,b,c){let d=this.fromMontgomery(c);for(let a=0;a<this.n8/2;a++){let b=d[a];d[a]=d[this.n8-1-a],d[this.n8-1-a]=b}a.set(d,b)}fromRprLE(a,b){b=b||0;let c=a.slice(b,b+this.n8);return this.toMontgomery(c)}async batchInverse(a){let b,c=!1,d=this.n8,e=this.n8;Array.isArray(a)?(a=at(a,d),c=!0):a=a.slice(0,a.byteLength);let f=Math.floor(a.byteLength/d);if(f*d!==a.byteLength)throw Error("Invalid buffer size");let g=Math.floor(f/this.tm.concurrency),h=[];for(let b=0;b<this.tm.concurrency;b++){let c;if(0==(c=b<this.tm.concurrency-1?g:f-b*g))continue;let i=[{cmd:"ALLOCSET",var:0,buff:a.slice(b*g*d,b*g*d+c*d)},{cmd:"ALLOC",var:1,len:e*c},{cmd:"CALL",fnName:this.prefix+"_batchInverse",params:[{var:0},{val:d},{val:c},{var:1},{val:e}]},{cmd:"GET",out:0,var:1,len:e*c}];h.push(this.tm.queueAction(i))}let i=await Promise.all(h);b=a instanceof av?new av(f*e):new Uint8Array(f*e);let j=0;for(let a=0;a<i.length;a++)b.set(i[a][0],j),j+=i[a][0].byteLength;return c?au(b,e):b}}class ay{constructor(a,b,c){this.tm=a,this.prefix=b,this.F=c,this.type="F2",this.m=2*c.m,this.n8=2*this.F.n8,this.n32=2*this.F.n32,this.n64=2*this.F.n64,this.pOp1=a.alloc(2*c.n8),this.pOp2=a.alloc(2*c.n8),this.pOp3=a.alloc(2*c.n8),this.tm.instance.exports[b+"_zero"](this.pOp1),this.zero=a.getBuff(this.pOp1,this.n8),this.tm.instance.exports[b+"_one"](this.pOp1),this.one=a.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2)}op1(a,b){return this.tm.setBuff(this.pOp1,b),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(a,b){return this.tm.setBuff(this.pOp1,b),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3)}add(a,b){return this.op2("_add",a,b)}eq(a,b){return this.op2Bool("_eq",a,b)}isZero(a){return this.op1Bool("_isZero",a)}sub(a,b){return this.op2("_sub",a,b)}neg(a){return this.op1("_neg",a)}inv(a){return this.op1("_inverse",a)}isNegative(a){return this.op1Bool("_isNegative",a)}toMontgomery(a){return this.op1("_toMontgomery",a)}fromMontgomery(a){return this.op1("_fromMontgomery",a)}mul(a,b){return this.op2("_mul",a,b)}mul1(a,b){return this.op2("_mul1",a,b)}div(a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(a){return this.op1("_square",a)}isSquare(a){return this.op1Bool("_isSquare",a)}sqrt(a){return this.op1("_sqrt",a)}exp(a,b){return b instanceof Uint8Array||(b=X(i(b))),this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,b.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}e(a,b){if(a instanceof Uint8Array)return a;if(Array.isArray(a)&&2==a.length){let c=this.F.e(a[0],b),d=this.F.e(a[1],b),e=new Uint8Array(2*this.F.n8);return e.set(c),e.set(d,2*this.F.n8),e}throw Error("invalid F2")}toString(a,b){let c=this.F.toString(a.slice(0,this.F.n8),b),d=this.F.toString(a.slice(this.F.n8),b);return`[${c}, ${d}]`}fromRng(a){let b=this.F.fromRng(a),c=this.F.fromRng(a),d=new Uint8Array(2*this.F.n8);return d.set(b),d.set(c,this.F.n8),d}random(){return this.fromRng(af())}toObject(a){return[this.F.toObject(a.slice(0,this.F.n8)),this.F.toObject(a.slice(this.F.n8,2*this.F.n8))]}fromObject(a){let b=new Uint8Array(2*this.F.n8),c=this.F.fromObject(a[0]),d=this.F.fromObject(a[1]);return b.set(c),b.set(d,this.F.n8),b}c1(a){return a.slice(0,this.F.n8)}c2(a){return a.slice(this.F.n8)}}class az{constructor(a,b,c){this.tm=a,this.prefix=b,this.F=c,this.type="F3",this.m=3*c.m,this.n8=3*this.F.n8,this.n32=3*this.F.n32,this.n64=3*this.F.n64,this.pOp1=a.alloc(3*c.n8),this.pOp2=a.alloc(3*c.n8),this.pOp3=a.alloc(3*c.n8),this.tm.instance.exports[b+"_zero"](this.pOp1),this.zero=a.getBuff(this.pOp1,this.n8),this.tm.instance.exports[b+"_one"](this.pOp1),this.one=a.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2)}op1(a,b){return this.tm.setBuff(this.pOp1,b),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(a,b){return this.tm.setBuff(this.pOp1,b),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3)}eq(a,b){return this.op2Bool("_eq",a,b)}isZero(a){return this.op1Bool("_isZero",a)}add(a,b){return this.op2("_add",a,b)}sub(a,b){return this.op2("_sub",a,b)}neg(a){return this.op1("_neg",a)}inv(a){return this.op1("_inverse",a)}isNegative(a){return this.op1Bool("_isNegative",a)}toMontgomery(a){return this.op1("_toMontgomery",a)}fromMontgomery(a){return this.op1("_fromMontgomery",a)}mul(a,b){return this.op2("_mul",a,b)}div(a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(a){return this.op1("_square",a)}isSquare(a){return this.op1Bool("_isSquare",a)}sqrt(a){return this.op1("_sqrt",a)}exp(a,b){return b instanceof Uint8Array||(b=X(i(b))),this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,b.byteLength,this.pOp3),this.getBuff(this.pOp3,this.n8)}e(a,b){if(a instanceof Uint8Array)return a;if(Array.isArray(a)&&3==a.length){let c=this.F.e(a[0],b),d=this.F.e(a[1],b),e=this.F.e(a[2],b),f=new Uint8Array(3*this.F.n8);return f.set(c),f.set(d,this.F.n8),f.set(e,2*this.F.n8),f}throw Error("invalid F3")}toString(a,b){let c=this.F.toString(a.slice(0,this.F.n8),b),d=this.F.toString(a.slice(this.F.n8,2*this.F.n8),b),e=this.F.toString(a.slice(2*this.F.n8),b);return`[${c}, ${d}, ${e}]`}fromRng(a){let b=this.F.fromRng(a),c=this.F.fromRng(a),d=this.F.fromRng(a),e=new Uint8Array(3*this.F.n8);return e.set(b),e.set(c,this.F.n8),e.set(d,2*this.F.n8),e}random(){return this.fromRng(af())}toObject(a){return[this.F.toObject(a.slice(0,this.F.n8)),this.F.toObject(a.slice(this.F.n8,2*this.F.n8)),this.F.toObject(a.slice(2*this.F.n8,3*this.F.n8))]}fromObject(a){let b=new Uint8Array(3*this.F.n8),c=this.F.fromObject(a[0]),d=this.F.fromObject(a[1]),e=this.F.fromObject(a[2]);return b.set(c),b.set(d,this.F.n8),b.set(e,2*this.F.n8),b}c1(a){return a.slice(0,this.F.n8)}c2(a){return a.slice(this.F.n8,2*this.F.n8)}c3(a){return a.slice(2*this.F.n8)}}class aA{constructor(a,b,c,d,e,f){this.tm=a,this.prefix=b,this.F=c,this.pOp1=a.alloc(3*c.n8),this.pOp2=a.alloc(3*c.n8),this.pOp3=a.alloc(3*c.n8),this.tm.instance.exports[b+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,3*c.n8),this.tm.instance.exports[b+"_zeroAffine"](this.pOp1),this.zeroAffine=this.tm.getBuff(this.pOp1,2*c.n8),this.one=this.tm.getBuff(d,3*c.n8),this.g=this.one,this.oneAffine=this.tm.getBuff(d,2*c.n8),this.gAffine=this.oneAffine,this.b=this.tm.getBuff(e,c.n8),f&&(this.cofactor=X(f)),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.batchLEMtoC=aw(a,b+"_batchLEMtoC",2*c.n8,c.n8),this.batchLEMtoU=aw(a,b+"_batchLEMtoU",2*c.n8,2*c.n8),this.batchCtoLEM=aw(a,b+"_batchCtoLEM",c.n8,2*c.n8),this.batchUtoLEM=aw(a,b+"_batchUtoLEM",2*c.n8,2*c.n8),this.batchToJacobian=aw(a,b+"_batchToJacobian",2*c.n8,3*c.n8),this.batchToAffine=aw(a,b+"_batchToAffine",3*c.n8,2*c.n8)}op2(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}op2bool(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2,this.pOp3)}op1(a,b){return this.tm.setBuff(this.pOp1,b),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}op1Affine(a,b){return this.tm.setBuff(this.pOp1,b),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,2*this.F.n8)}op1Bool(a,b){return this.tm.setBuff(this.pOp1,b),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3)}add(a,b){if(a.byteLength==3*this.F.n8)if(b.byteLength==3*this.F.n8)return this.op2("_add",a,b);else if(b.byteLength==2*this.F.n8)return this.op2("_addMixed",a,b);else throw Error("invalid point size");if(a.byteLength==2*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2("_addMixed",b,a);else if(b.byteLength==2*this.F.n8)return this.op2("_addAffine",a,b)}throw Error("invalid point size")}sub(a,b){if(a.byteLength==3*this.F.n8)if(b.byteLength==3*this.F.n8)return this.op2("_sub",a,b);else if(b.byteLength==2*this.F.n8)return this.op2("_subMixed",a,b);else throw Error("invalid point size");if(a.byteLength==2*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2("_subMixed",b,a);else if(b.byteLength==2*this.F.n8)return this.op2("_subAffine",a,b)}throw Error("invalid point size")}neg(a){if(a.byteLength==3*this.F.n8)return this.op1("_neg",a);if(a.byteLength==2*this.F.n8)return this.op1Affine("_negAffine",a);throw Error("invalid point size")}double(a){if(a.byteLength==3*this.F.n8)return this.op1("_double",a);if(a.byteLength==2*this.F.n8)return this.op1("_doubleAffine",a);throw Error("invalid point size")}isZero(a){if(a.byteLength==3*this.F.n8)return this.op1Bool("_isZero",a);if(a.byteLength==2*this.F.n8)return this.op1Bool("_isZeroAffine",a);throw Error("invalid point size")}timesScalar(a,b){let c;if(b instanceof Uint8Array||(b=X(i(b))),a.byteLength==3*this.F.n8)c=this.prefix+"_timesScalar";else if(a.byteLength==2*this.F.n8)c=this.prefix+"_timesScalarAffine";else throw Error("invalid point size");return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[c](this.pOp1,this.pOp2,b.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}timesFr(a,b){let c;if(a.byteLength==3*this.F.n8)c=this.prefix+"_timesFr";else if(a.byteLength==2*this.F.n8)c=this.prefix+"_timesFrAffine";else throw Error("invalid point size");return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[c](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}eq(a,b){if(a.byteLength==3*this.F.n8)if(b.byteLength==3*this.F.n8)return this.op2bool("_eq",a,b);else if(b.byteLength==2*this.F.n8)return this.op2bool("_eqMixed",a,b);else throw Error("invalid point size");if(a.byteLength==2*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2bool("_eqMixed",b,a);else if(b.byteLength==2*this.F.n8)return this.op2bool("_eqAffine",a,b)}throw Error("invalid point size")}toAffine(a){if(a.byteLength==3*this.F.n8)return this.op1Affine("_toAffine",a);if(a.byteLength==2*this.F.n8)return a;throw Error("invalid point size")}toJacobian(a){if(a.byteLength==3*this.F.n8)return a;if(a.byteLength==2*this.F.n8)return this.op1("_toJacobian",a);throw Error("invalid point size")}toRprUncompressed(a,b,c){if(this.tm.setBuff(this.pOp1,c),c.byteLength==3*this.F.n8)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(c.byteLength!=2*this.F.n8)throw Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoU"](this.pOp1,this.pOp1);let d=this.tm.getBuff(this.pOp1,2*this.F.n8);a.set(d,b)}fromRprUncompressed(a,b){let c=a.slice(b,b+2*this.F.n8);return this.tm.setBuff(this.pOp1,c),this.tm.instance.exports[this.prefix+"_UtoLEM"](this.pOp1,this.pOp1),this.tm.getBuff(this.pOp1,2*this.F.n8)}toRprCompressed(a,b,c){if(this.tm.setBuff(this.pOp1,c),c.byteLength==3*this.F.n8)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(c.byteLength!=2*this.F.n8)throw Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoC"](this.pOp1,this.pOp1);let d=this.tm.getBuff(this.pOp1,this.F.n8);a.set(d,b)}fromRprCompressed(a,b){let c=a.slice(b,b+this.F.n8);return this.tm.setBuff(this.pOp1,c),this.tm.instance.exports[this.prefix+"_CtoLEM"](this.pOp1,this.pOp2),this.tm.getBuff(this.pOp2,2*this.F.n8)}toUncompressed(a){let b=new Uint8Array(2*this.F.n8);return this.toRprUncompressed(b,0,a),b}toRprLEM(a,b,c){if(c.byteLength==2*this.F.n8)return void a.set(c,b);if(c.byteLength==3*this.F.n8){this.tm.setBuff(this.pOp1,c),this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);let d=this.tm.getBuff(this.pOp1,2*this.F.n8);a.set(d,b)}else throw Error("invalid point size")}fromRprLEM(a,b){return b=b||0,a.slice(b,b+2*this.F.n8)}toString(a,b){if(a.byteLength==3*this.F.n8){let c=this.F.toString(a.slice(0,this.F.n8),b),d=this.F.toString(a.slice(this.F.n8,2*this.F.n8),b),e=this.F.toString(a.slice(2*this.F.n8),b);return`[ ${c}, ${d}, ${e} ]`}if(a.byteLength==2*this.F.n8){let c=this.F.toString(a.slice(0,this.F.n8),b),d=this.F.toString(a.slice(this.F.n8),b);return`[ ${c}, ${d} ]`}throw Error("invalid point size")}isValid(a){if(this.isZero(a))return!0;let b=this.F,c=this.toAffine(a),d=c.slice(0,this.F.n8),e=c.slice(this.F.n8,2*this.F.n8),f=b.add(b.mul(b.square(d),d),this.b),g=b.square(e);return b.eq(f,g)}fromRng(a){let b,c,d=this.F,e=[];do e[0]=d.fromRng(a),b=a.nextBool(),c=d.add(d.mul(d.square(e[0]),e[0]),this.b);while(!d.isSquare(c));e[1]=d.sqrt(c),b^d.isNegative(e[1])&&(e[1]=d.neg(e[1]));let f=new Uint8Array(2*this.F.n8);return f.set(e[0]),f.set(e[1],this.F.n8),this.cofactor&&(f=this.timesScalar(f,this.cofactor)),f}toObject(a){return this.isZero(a)?[this.F.toObject(this.F.zero),this.F.toObject(this.F.one),this.F.toObject(this.F.zero)]:[this.F.toObject(a.slice(0,this.F.n8)),this.F.toObject(a.slice(this.F.n8,2*this.F.n8)),a.byteLength==3*this.F.n8?this.F.toObject(a.slice(2*this.F.n8,3*this.F.n8)):this.F.toObject(this.F.one)]}fromObject(a){let b,c=this.F.fromObject(a[0]),d=this.F.fromObject(a[1]);if(b=3==a.length?this.F.fromObject(a[2]):this.F.one,this.F.isZero(b,this.F.one))return this.zeroAffine;if(this.F.eq(b,this.F.one)){let a=new Uint8Array(2*this.F.n8);return a.set(c),a.set(d,this.F.n8),a}{let a=new Uint8Array(3*this.F.n8);return a.set(c),a.set(d,this.F.n8),a.set(b,2*this.F.n8),a}}e(a){return a instanceof Uint8Array?a:this.fromObject(a)}x(a){return this.toAffine(a).slice(0,this.F.n8)}y(a){return this.toAffine(a).slice(this.F.n8)}}function aB(a){let b,c;async function d(a){let d=new Uint8Array(a.code),e=await WebAssembly.compile(d);c=new WebAssembly.Memory({initial:a.init,maximum:32767}),b=await WebAssembly.instantiate(e,{env:{memory:c}})}function e(a){let b=new Uint32Array(c.buffer,0,1);for(;3&b[0];)b[0]++;let d=b[0];if(b[0]+=a,b[0]+a>c.buffer.byteLength){let d=c.buffer.byteLength/65536,e=Math.floor((b[0]+a)/65536)+1;e>32767&&(e=32767),c.grow(e-d)}return d}function f(a,b){new Uint8Array(c.buffer).set(new Uint8Array(b),a)}function g(a){if("INIT"==a[0].cmd)return d(a[0]);let g=[],h=[],i=new Uint32Array(c.buffer,0,1)[0];for(let d=0;d<a.length;d++)switch(a[d].cmd){case"ALLOCSET":g[a[d].var]=function(a){let b=e(a.byteLength);return f(b,a),b}(a[d].buff);break;case"ALLOC":g[a[d].var]=e(a[d].len);break;case"SET":f(g[a[d].var],a[d].buff);break;case"CALL":{let c=[];for(let b=0;b<a[d].params.length;b++){let e=a[d].params[b];void 0!==e.var?c.push(g[e.var]+(e.offset||0)):void 0!==e.val&&c.push(e.val)}b.exports[a[d].fnName](...c);break}case"GET":h[a[d].out]=(function(a,b){let d=new Uint8Array(c.buffer);return new Uint8Array(d.buffer,d.byteOffset+a,b)})(g[a[d].var],a[d].len).slice();break;default:throw Error("Invalid cmd")}return new Uint32Array(c.buffer,0,1)[0]=i,h}return a&&(a.onmessage=function(b){let c;if("INIT"==(c=b.data?b.data:b)[0].cmd)d(c[0]).then(function(){a.postMessage(c.result)});else if("TERMINATE"==c[0].cmd)a.close();else{let b=g(c);a.postMessage(b)}}),g}var aC=c(1820),aD=c(2650);class aE{constructor(){this.promise=new Promise((a,b)=>{this.reject=b,this.resolve=a})}}let aF=`(${aB.toString()})(self)`;async function aG(a,b){let c=new aH;c.memory=new WebAssembly.Memory({initial:25}),c.u8=new Uint8Array(c.memory.buffer),c.u32=new Uint32Array(c.memory.buffer);let e=await WebAssembly.compile(a.code);if(c.instance=await WebAssembly.instantiate(e,{env:{memory:c.memory}}),c.singleThread=b,c.initalPFree=c.u32[0],c.pq=a.pq,c.pr=a.pr,c.pG1gen=a.pG1gen,c.pG1zero=a.pG1zero,c.pG2gen=a.pG2gen,c.pG2zero=a.pG2zero,c.pOneT=a.pOneT,b)c.code=a.code,c.taskManager=aB(),await c.taskManager([{cmd:"INIT",init:25,code:c.code.slice()}]),c.concurrency=1;else{c.workers=[],c.pendingDeferreds=[],c.working=[];let b=2;0==(b=aC.cpus().length)&&(b=2),b>64&&(b=64),c.concurrency=b;for(let a=0;a<b;a++)c.workers[a]=new aD(d),c.workers[a].addEventListener("message",function(a){return function(b){let d;d=b&&b.data?b.data:b,c.working[a]=!1,c.pendingDeferreds[a].resolve(d),c.processWorks()}}(a)),c.working[a]=!1;let e=[];for(let b=0;b<c.workers.length;b++){let d=a.code.slice();e.push(c.postAction(b,[{cmd:"INIT",init:25,code:d}],[d.buffer]))}await Promise.all(e)}return c}d="data:application/javascript;base64,"+Buffer.from(aF).toString("base64");class aH{constructor(){this.actionQueue=[],this.oldPFree=0}startSyncOp(){if(0!=this.oldPFree)throw Error("Sync operation in progress");this.oldPFree=this.u32[0]}endSyncOp(){if(0==this.oldPFree)throw Error("No sync operation in progress");this.u32[0]=this.oldPFree,this.oldPFree=0}postAction(a,b,c,d){if(this.working[a])throw Error("Posting a job t a working worker");return this.working[a]=!0,this.pendingDeferreds[a]=d||new aE,this.workers[a].postMessage(b,c),this.pendingDeferreds[a].promise}processWorks(){for(let a=0;a<this.workers.length&&this.actionQueue.length>0;a++)if(!1==this.working[a]){let b=this.actionQueue.shift();this.postAction(a,b.data,b.transfers,b.deferred)}}queueAction(a,b){let c=new aE;if(this.singleThread){let b=this.taskManager(a);c.resolve(b)}else this.actionQueue.push({data:a,transfers:b,deferred:c}),this.processWorks();return c.promise}resetMemory(){this.u32[0]=this.initalPFree}allocBuff(a){let b=this.alloc(a.byteLength);return this.setBuff(b,a),b}getBuff(a,b){return this.u8.slice(a,a+b)}setBuff(a,b){this.u8.set(new Uint8Array(b),a)}alloc(a){for(;3&this.u32[0];)this.u32[0]++;let b=this.u32[0];return this.u32[0]+=a,b}async terminate(){for(let a=0;a<this.workers.length;a++)this.workers[a].postMessage([{cmd:"TERMINATE"}]);await new Promise(a=>setTimeout(a,200))}}function aI(a,b){let c=a[b],d=a.Fr,e=a.tm;a[b].batchApplyKey=async function(a,f,g,h,i){let j,k,l,m,n,o;if(h=h||"affine",i=i||"affine","G1"==b)"jacobian"==h?(l=3*c.F.n8,j="g1m_batchApplyKey"):(l=2*c.F.n8,j="g1m_batchApplyKeyMixed"),m=3*c.F.n8,"jacobian"==i?n=3*c.F.n8:(k="g1m_batchToAffine",n=2*c.F.n8);else if("G2"==b)"jacobian"==h?(l=3*c.F.n8,j="g2m_batchApplyKey"):(l=2*c.F.n8,j="g2m_batchApplyKeyMixed"),m=3*c.F.n8,"jacobian"==i?n=3*c.F.n8:(k="g2m_batchToAffine",n=2*c.F.n8);else if("Fr"==b)j="frm_batchApplyKey",l=c.n8,m=c.n8,n=c.n8;else throw Error("Invalid group: "+b);let p=Math.floor(a.byteLength/l),q=Math.floor(p/e.concurrency),r=[];g=d.e(g);let s=d.e(f);for(let b=0;b<e.concurrency;b++){let c;if(0==(c=b<e.concurrency-1?q:p-b*q))continue;let f=[];f.push({cmd:"ALLOCSET",var:0,buff:a.slice(b*q*l,b*q*l+c*l)}),f.push({cmd:"ALLOCSET",var:1,buff:s}),f.push({cmd:"ALLOCSET",var:2,buff:g}),f.push({cmd:"ALLOC",var:3,len:c*Math.max(m,n)}),f.push({cmd:"CALL",fnName:j,params:[{var:0},{val:c},{var:1},{var:2},{var:3}]}),k&&f.push({cmd:"CALL",fnName:k,params:[{var:3},{val:c},{var:3}]}),f.push({cmd:"GET",out:0,var:3,len:c*n}),r.push(e.queueAction(f)),s=d.mul(s,d.exp(g,c))}let t=await Promise.all(r);o=a instanceof av?new av(p*n):new Uint8Array(p*n);let u=0;for(let a=0;a<t.length;a++)o.set(t[a][0],u),u+=t[a][0].byteLength;return o}}let aJ=[1,1,1,1,2,3,4,5,6,7,7,8,9,10,11,12,13,13,14,15,16,16,17,17,17,17,17,17,17,17,17,17];function aK(a,b){let c=a[b],d=c.tm;async function e(a,d,e,f,g){let h,i;if(!(a instanceof Uint8Array))throw f&&f.error(`${g} _multiExpChunk buffBases is not Uint8Array`),Error(`${g} _multiExpChunk buffBases is not Uint8Array`);if(!(d instanceof Uint8Array))throw f&&f.error(`${g} _multiExpChunk buffScalars is not Uint8Array`),Error(`${g} _multiExpChunk buffScalars is not Uint8Array`);if(e=e||"affine","G1"==b)"affine"==e?(i="g1m_multiexpAffine_chunk",h=2*c.F.n8):(i="g1m_multiexp_chunk",h=3*c.F.n8);else if("G2"==b)"affine"==e?(i="g2m_multiexpAffine_chunk",h=2*c.F.n8):(i="g2m_multiexp_chunk",h=3*c.F.n8);else throw Error("Invalid group");let j=Math.floor(a.byteLength/h);if(0==j)return c.zero;let k=Math.floor(d.byteLength/j);if(k*j!=d.byteLength)throw Error("Scalar size does not match");let l=aJ[ar(j)],m=Math.floor((8*k-1)/l)+1,n=[];for(let b=0;b<m;b++){let e=[{cmd:"ALLOCSET",var:0,buff:a},{cmd:"ALLOCSET",var:1,buff:d},{cmd:"ALLOC",var:2,len:3*c.F.n8},{cmd:"CALL",fnName:i,params:[{var:0},{var:1},{val:k},{val:j},{val:b*l},{val:Math.min(8*k-b*l,l)},{var:2}]},{cmd:"GET",out:0,var:2,len:3*c.F.n8}];n.push(c.tm.queueAction(e))}let o=await Promise.all(n),p=c.zero;for(let a=o.length-1;a>=0;a--){if(!c.isZero(p))for(let a=0;a<l;a++)p=c.double(p);p=c.add(p,o[a][0])}return p}async function f(a,f,g,h,i){let j,k;if("G1"==b)j="affine"==g?2*c.F.n8:3*c.F.n8;else if("G2"==b)j="affine"==g?2*c.F.n8:3*c.F.n8;else throw Error("Invalid group");let l=Math.floor(a.byteLength/j);if(0==l)return c.zero;let m=Math.floor(f.byteLength/l);if(m*l!=f.byteLength)throw Error("Scalar size does not match");let n=Math.floor((8*m-1)/aJ[ar(l)])+1;(k=Math.floor(l/(d.concurrency/n)))>4194304&&(k=4194304),k<1024&&(k=1024);let o=[];for(let b=0;b<l;b+=k){h&&h.debug(`Multiexp start: ${i}: ${b}/${l}`);let c=Math.min(l-b,k),d=a.slice(b*j,(b+c)*j),n=f.slice(b*m,(b+c)*m);o.push(e(d,n,g,h,i).then(a=>(h&&h.debug(`Multiexp end: ${i}: ${b}/${l}`),a)))}let p=await Promise.all(o),q=c.zero;for(let a=p.length-1;a>=0;a--)q=c.add(q,p[a]);return q}c.multiExp=async function(a,b,c,d){return await f(a,b,"jacobian",c,d)},c.multiExpAffine=async function(a,b,c,d){return await f(a,b,"affine",c,d)}}function aL(a,b){let c=a[b],d=a.Fr,e=c.tm;async function f(a,f,i,j,k,l){let m,n,o,p,q,r,s,t,u,v,w;i=i||"affine",j=j||"affine","G1"==b?("affine"==i?(m=2*c.F.n8,p="g1m_batchToJacobian"):m=3*c.F.n8,n=3*c.F.n8,f&&(t="g1m_fftFinal"),s="g1m_fftJoin",r="g1m_fftMix","affine"==j?(o=2*c.F.n8,q="g1m_batchToAffine"):o=3*c.F.n8):"G2"==b?("affine"==i?(m=2*c.F.n8,p="g2m_batchToJacobian"):m=3*c.F.n8,n=3*c.F.n8,f&&(t="g2m_fftFinal"),s="g2m_fftJoin",r="g2m_fftMix","affine"==j?(o=2*c.F.n8,q="g2m_batchToAffine"):o=3*c.F.n8):"Fr"==b&&(m=c.n8,n=c.n8,o=c.n8,f&&(t="frm_fftFinal"),r="frm_fftMix",s="frm_fftJoin");let x=!1;Array.isArray(a)?(a=at(a,m),x=!0):a=a.slice(0,a.byteLength);let y=a.byteLength/m,z=ar(y);if(1<<z!=y)throw Error("fft must be multiple of 2");if(z==d.s+1){let b;return(b=f?await h(a,i,j,k,l):await g(a,i,j,k,l),x)?au(b,o):b}f&&(u=d.inv(d.e(y))),as(a,m);let A=Math.min(16384,y),B=y/A;for(;B<e.concurrency&&A>=16;)B*=2,A/=2;let C=ar(A),D=[];for(let b=0;b<B;b++){k&&k.debug(`${l}: fft ${z} mix start: ${b}/${B}`);let c=[];c.push({cmd:"ALLOC",var:0,len:n*A});let d=a.slice(A*b*m,A*(b+1)*m);c.push({cmd:"SET",var:0,buff:d}),p&&c.push({cmd:"CALL",fnName:p,params:[{var:0},{val:A},{var:0}]});for(let a=1;a<=C;a++)c.push({cmd:"CALL",fnName:r,params:[{var:0},{val:A},{val:a}]});C==z?(t&&(c.push({cmd:"ALLOCSET",var:1,buff:u}),c.push({cmd:"CALL",fnName:t,params:[{var:0},{val:A},{var:1}]})),q&&c.push({cmd:"CALL",fnName:q,params:[{var:0},{val:A},{var:0}]}),c.push({cmd:"GET",out:0,var:0,len:A*o})):c.push({cmd:"GET",out:0,var:0,len:n*A}),D.push(e.queueAction(c).then(a=>(k&&k.debug(`${l}: fft ${z} mix end: ${b}/${B}`),a)))}w=await Promise.all(D);for(let a=0;a<B;a++)w[a]=w[a][0];for(let a=C+1;a<=z;a++){k&&k.debug(`${l}: fft  ${z}  join: ${a}/${z}`);let b=1<<z-a,c=B/b,f=[];for(let g=0;g<b;g++)for(let h=0;h<c/2;h++){let i=d.exp(d.w[a],h*A),j=d.w[a],m=g*c+h,p=g*c+h+c/2,r=[];r.push({cmd:"ALLOCSET",var:0,buff:w[m]}),r.push({cmd:"ALLOCSET",var:1,buff:w[p]}),r.push({cmd:"ALLOCSET",var:2,buff:i}),r.push({cmd:"ALLOCSET",var:3,buff:j}),r.push({cmd:"CALL",fnName:s,params:[{var:0},{var:1},{val:A},{var:2},{var:3}]}),a==z?(t&&(r.push({cmd:"ALLOCSET",var:4,buff:u}),r.push({cmd:"CALL",fnName:t,params:[{var:0},{val:A},{var:4}]}),r.push({cmd:"CALL",fnName:t,params:[{var:1},{val:A},{var:4}]})),q&&(r.push({cmd:"CALL",fnName:q,params:[{var:0},{val:A},{var:0}]}),r.push({cmd:"CALL",fnName:q,params:[{var:1},{val:A},{var:1}]})),r.push({cmd:"GET",out:0,var:0,len:A*o}),r.push({cmd:"GET",out:1,var:1,len:A*o})):(r.push({cmd:"GET",out:0,var:0,len:A*n}),r.push({cmd:"GET",out:1,var:1,len:A*n})),f.push(e.queueAction(r).then(d=>(k&&k.debug(`${l}: fft ${z} join  ${a}/${z}  ${g+1}/${b} ${h}/${c/2}`),d)))}let g=await Promise.all(f);for(let a=0;a<b;a++)for(let b=0;b<c/2;b++){let d=a*c+b,e=a*c+b+c/2,f=g.shift();w[d]=f[0],w[e]=f[1]}}if(v=a instanceof av?new av(y*o):new Uint8Array(y*o),f){v.set(w[0].slice((A-1)*o));let a=o;for(let b=B-1;b>0;b--)v.set(w[b],a),a+=A*o,delete w[b];v.set(w[0].slice(0,(A-1)*o),a),delete w[0]}else for(let a=0;a<B;a++)v.set(w[a],A*o*a),delete w[a];return x?au(v,o):v}async function g(a,b,c,e,g){let h,j,k;h=a.slice(0,a.byteLength/2),j=a.slice(a.byteLength/2,a.byteLength);let l=[];[h,j]=await i(h,j,"fftJoinExt",d.one,d.shift,b,"jacobian",e,g),l.push(f(h,!1,"jacobian",c,e,g)),l.push(f(j,!1,"jacobian",c,e,g));let m=await Promise.all(l);return(k=m[0].byteLength>0x10000000?new av(2*m[0].byteLength):new Uint8Array(2*m[0].byteLength)).set(m[0]),k.set(m[1],m[0].byteLength),k}async function h(a,b,c,e,g){let h,j,k;h=a.slice(0,a.byteLength/2),j=a.slice(a.byteLength/2,a.byteLength);let l=[];l.push(f(h,!0,b,"jacobian",e,g)),l.push(f(j,!0,b,"jacobian",e,g)),[h,j]=await Promise.all(l);let m=await i(h,j,"fftJoinExtInv",d.one,d.shiftInv,"jacobian",c,e,g);return(k=m[0].byteLength>0x10000000?new av(2*m[0].byteLength):new Uint8Array(2*m[0].byteLength)).set(m[0]),k.set(m[1],m[0].byteLength),k}async function i(a,f,g,h,i,j,k,l,m){let n,o,p,q,r,s,t,u;if("G1"==b)"affine"==j?(r=2*c.F.n8,o="g1m_batchToJacobian"):r=3*c.F.n8,s=3*c.F.n8,n="g1m_"+g,"affine"==k?(p="g1m_batchToAffine",q=2*c.F.n8):q=3*c.F.n8;else if("G2"==b)"affine"==j?(r=2*c.F.n8,o="g2m_batchToJacobian"):r=3*c.F.n8,n="g2m_"+g,s=3*c.F.n8,"affine"==k?(p="g2m_batchToAffine",q=2*c.F.n8):q=3*c.F.n8;else if("Fr"==b)r=d.n8,q=d.n8,s=d.n8,n="frm_"+g;else throw Error("Invalid group");if(a.byteLength!=f.byteLength)throw Error("Invalid buffer size");let v=Math.floor(a.byteLength/r);if(v!=1<<ar(v))throw Error("Invalid number of points");let w=Math.floor(v/e.concurrency);w<16&&(w=16),w>65536&&(w=65536);let x=[];for(let b=0;b<v;b+=w){l&&l.debug(`${m}: fftJoinExt Start: ${b}/${v}`);let c=Math.min(v-b,w),g=d.mul(h,d.exp(i,b)),j=[],k=a.slice(b*r,(b+c)*r),t=f.slice(b*r,(b+c)*r);j.push({cmd:"ALLOC",var:0,len:s*c}),j.push({cmd:"SET",var:0,buff:k}),j.push({cmd:"ALLOC",var:1,len:s*c}),j.push({cmd:"SET",var:1,buff:t}),j.push({cmd:"ALLOCSET",var:2,buff:g}),j.push({cmd:"ALLOCSET",var:3,buff:i}),o&&(j.push({cmd:"CALL",fnName:o,params:[{var:0},{val:c},{var:0}]}),j.push({cmd:"CALL",fnName:o,params:[{var:1},{val:c},{var:1}]})),j.push({cmd:"CALL",fnName:n,params:[{var:0},{var:1},{val:c},{var:2},{var:3},{val:d.s}]}),p&&(j.push({cmd:"CALL",fnName:p,params:[{var:0},{val:c},{var:0}]}),j.push({cmd:"CALL",fnName:p,params:[{var:1},{val:c},{var:1}]})),j.push({cmd:"GET",out:0,var:0,len:c*q}),j.push({cmd:"GET",out:1,var:1,len:c*q}),x.push(e.queueAction(j).then(a=>(l&&l.debug(`${m}: fftJoinExt End: ${b}/${v}`),a)))}let y=await Promise.all(x);v*q>0x10000000?(t=new av(v*q),u=new av(v*q)):(t=new Uint8Array(v*q),u=new Uint8Array(v*q));let z=0;for(let a=0;a<y.length;a++)t.set(y[a][0],z),u.set(y[a][1],z),z+=y[a][0].byteLength;return[t,u]}c.fft=async function(a,b,c,d,e){return await f(a,!1,b,c,d,e)},c.ifft=async function(a,b,c,d,e){return await f(a,!0,b,c,d,e)},c.lagrangeEvaluations=async function(a,e,g,h,j){let k,l;if(e=e||"affine",g=g||"affine","G1"==b)k="affine"==e?2*c.F.n8:3*c.F.n8;else if("G2"==b)k="affine"==e?2*c.F.n8:3*c.F.n8;else if("Fr"==b)k=d.n8;else throw Error("Invalid group");let m=a.byteLength/k,n=ar(m);if(2**n*k!=a.byteLength)throw h&&h.error("lagrangeEvaluations iinvalid input size"),Error("lagrangeEvaluations invalid Input size");if(n<=d.s)return await c.ifft(a,e,g,h,j);if(n>d.s+1)throw h&&h.error("lagrangeEvaluations input too big"),Error("lagrangeEvaluations input too big");let o=a.slice(0,a.byteLength/2),p=a.slice(a.byteLength/2,a.byteLength),q=d.exp(d.shift,m/2),r=d.inv(d.sub(d.one,q));[o,p]=await i(o,p,"prepareLagrangeEvaluation",r,d.shiftInv,e,"jacobian",h,j+" prep");let s=[];return s.push(f(o,!0,"jacobian",g,h,j+" t0")),s.push(f(p,!0,"jacobian",g,h,j+" t1")),[o,p]=await Promise.all(s),(l=o.byteLength>0x10000000?new av(2*o.byteLength):new Uint8Array(2*o.byteLength)).set(o),l.set(p,o.byteLength),l},c.fftMix=async function(a){let f,g,h,i=3*c.F.n8;if("G1"==b)f="g1m_fftMix",g="g1m_fftJoin";else if("G2"==b)f="g2m_fftMix",g="g2m_fftJoin";else if("Fr"==b)f="frm_fftMix",g="frm_fftJoin";else throw Error("Invalid group");let j=Math.floor(a.byteLength/i),k=ar(j),l=1<<ar(e.concurrency);j<=2*l&&(l=1);let m=j/l,n=ar(m),o=[];for(let b=0;b<l;b++){let c=[],d=a.slice(b*m*i,(b+1)*m*i);c.push({cmd:"ALLOCSET",var:0,buff:d});for(let a=1;a<=n;a++)c.push({cmd:"CALL",fnName:f,params:[{var:0},{val:m},{val:a}]});c.push({cmd:"GET",out:0,var:0,len:m*i}),o.push(e.queueAction(c))}let p=await Promise.all(o),q=[];for(let a=0;a<p.length;a++)q[a]=p[a][0];for(let a=n+1;a<=k;a++){let b=1<<k-a,c=l/b,f=[];for(let h=0;h<b;h++)for(let b=0;b<c/2;b++){let j=d.exp(d.w[a],b*m),k=d.w[a],l=h*c+b,n=h*c+b+c/2,o=[];o.push({cmd:"ALLOCSET",var:0,buff:q[l]}),o.push({cmd:"ALLOCSET",var:1,buff:q[n]}),o.push({cmd:"ALLOCSET",var:2,buff:j}),o.push({cmd:"ALLOCSET",var:3,buff:k}),o.push({cmd:"CALL",fnName:g,params:[{var:0},{var:1},{val:m},{var:2},{var:3}]}),o.push({cmd:"GET",out:0,var:0,len:m*i}),o.push({cmd:"GET",out:1,var:1,len:m*i}),f.push(e.queueAction(o))}let h=await Promise.all(f);for(let a=0;a<b;a++)for(let b=0;b<c/2;b++){let d=a*c+b,e=a*c+b+c/2,f=h.shift();q[d]=f[0],q[e]=f[1]}}h=a instanceof av?new av(j*i):new Uint8Array(j*i);let r=0;for(let a=0;a<l;a++)h.set(q[a],r),r+=q[a].byteLength;return h},c.fftJoin=async function(a,f,g,h){let i,j,k,l=3*c.F.n8;if("G1"==b)i="g1m_fftJoin";else if("G2"==b)i="g2m_fftJoin";else if("Fr"==b)i="frm_fftJoin";else throw Error("Invalid group");if(a.byteLength!=f.byteLength)throw Error("Invalid buffer size");let m=Math.floor(a.byteLength/l);if(m!=1<<ar(m))throw Error("Invalid number of points");let n=1<<ar(e.concurrency);m<=2*n&&(n=1);let o=m/n,p=[];for(let b=0;b<n;b++){let c=[],j=d.mul(g,d.exp(h,b*o)),k=a.slice(b*o*l,(b+1)*o*l),m=f.slice(b*o*l,(b+1)*o*l);c.push({cmd:"ALLOCSET",var:0,buff:k}),c.push({cmd:"ALLOCSET",var:1,buff:m}),c.push({cmd:"ALLOCSET",var:2,buff:j}),c.push({cmd:"ALLOCSET",var:3,buff:h}),c.push({cmd:"CALL",fnName:i,params:[{var:0},{var:1},{val:o},{var:2},{var:3}]}),c.push({cmd:"GET",out:0,var:0,len:o*l}),c.push({cmd:"GET",out:1,var:1,len:o*l}),p.push(e.queueAction(c))}let q=await Promise.all(p);a instanceof av?(j=new av(m*l),k=new av(m*l)):(j=new Uint8Array(m*l),k=new Uint8Array(m*l));let r=0;for(let a=0;a<q.length;a++)j.set(q[a][0],r),k.set(q[a][1],r),r+=q[a][0].byteLength;return[j,k]},c.fftFinal=async function(a,d){let f,g,h,i=3*c.F.n8,j=2*c.F.n8;if("G1"==b)f="g1m_fftFinal",g="g1m_batchToAffine";else if("G2"==b)f="g2m_fftFinal",g="g2m_batchToAffine";else throw Error("Invalid group");let k=Math.floor(a.byteLength/i);if(k!=1<<ar(k))throw Error("Invalid number of points");let l=Math.floor(k/e.concurrency),m=[];for(let b=0;b<e.concurrency;b++){let c;if(0==(c=b<e.concurrency-1?l:k-b*l))continue;let h=[],n=a.slice(b*l*i,(b*l+c)*i);h.push({cmd:"ALLOCSET",var:0,buff:n}),h.push({cmd:"ALLOCSET",var:1,buff:d}),h.push({cmd:"CALL",fnName:f,params:[{var:0},{val:c},{var:1}]}),h.push({cmd:"CALL",fnName:g,params:[{var:0},{val:c},{var:0}]}),h.push({cmd:"GET",out:0,var:0,len:c*j}),m.push(e.queueAction(h))}let n=await Promise.all(m);h=a instanceof av?new av(k*j):new Uint8Array(k*j);let o=0;for(let a=n.length-1;a>=0;a--)h.set(n[a][0],o),o+=n[a][0].byteLength;return h}}async function aM(a){let b,c=await aG(a.wasm,a.singleThread),d={};return d.q=i(a.wasm.q.toString()),d.r=i(a.wasm.r.toString()),d.name=a.name,d.tm=c,d.prePSize=a.wasm.prePSize,d.preQSize=a.wasm.preQSize,d.Fr=new ax(c,"frm",a.n8r,a.r),d.F1=new ax(c,"f1m",a.n8q,a.q),d.F2=new ay(c,"f2m",d.F1),d.G1=new aA(c,"g1m",d.F1,a.wasm.pG1gen,a.wasm.pG1b,a.cofactorG1),d.G2=new aA(c,"g2m",d.F2,a.wasm.pG2gen,a.wasm.pG2b,a.cofactorG2),d.F6=new az(c,"f6m",d.F2),d.F12=new ay(c,"ftm",d.F6),d.Gt=d.F12,aI(d,"G1"),aI(d,"G2"),aI(d,"Fr"),aK(d,"G1"),aK(d,"G2"),aL(d,"G1"),aL(d,"G2"),aL(d,"Fr"),b=d.tm,d.pairing=function(a,c){b.startSyncOp();let e=b.allocBuff(d.G1.toJacobian(a)),f=b.allocBuff(d.G2.toJacobian(c)),g=b.alloc(d.Gt.n8);b.instance.exports[d.name+"_pairing"](e,f,g);let h=b.getBuff(g,d.Gt.n8);return b.endSyncOp(),h},d.pairingEq=async function(){let a,c;arguments.length%2==1?(a=arguments[arguments.length-1],c=(arguments.length-1)/2):(a=d.Gt.one,c=arguments.length/2);let e=[];for(let a=0;a<c;a++){let c=[],f=d.G1.toJacobian(arguments[2*a]);c.push({cmd:"ALLOCSET",var:0,buff:f}),c.push({cmd:"ALLOC",var:1,len:d.prePSize});let g=d.G2.toJacobian(arguments[2*a+1]);c.push({cmd:"ALLOCSET",var:2,buff:g}),c.push({cmd:"ALLOC",var:3,len:d.preQSize}),c.push({cmd:"ALLOC",var:4,len:d.Gt.n8}),c.push({cmd:"CALL",fnName:d.name+"_prepareG1",params:[{var:0},{var:1}]}),c.push({cmd:"CALL",fnName:d.name+"_prepareG2",params:[{var:2},{var:3}]}),c.push({cmd:"CALL",fnName:d.name+"_millerLoop",params:[{var:1},{var:3},{var:4}]}),c.push({cmd:"GET",out:0,var:4,len:d.Gt.n8}),e.push(b.queueAction(c))}let f=await Promise.all(e);b.startSyncOp();let g=b.alloc(d.Gt.n8);b.instance.exports.ftm_one(g);for(let a=0;a<f.length;a++){let c=b.allocBuff(f[a][0]);b.instance.exports.ftm_mul(g,c,g)}b.instance.exports[d.name+"_finalExponentiation"](g,g);let h=b.allocBuff(a),i=!!b.instance.exports.ftm_eq(g,h);return b.endSyncOp(),i},d.prepareG1=function(a){this.tm.startSyncOp();let b=this.tm.allocBuff(a),c=this.tm.alloc(this.prePSize);this.tm.instance.exports[this.name+"_prepareG1"](b,c);let d=this.tm.getBuff(c,this.prePSize);return this.tm.endSyncOp(),d},d.prepareG2=function(a){this.tm.startSyncOp();let b=this.tm.allocBuff(a),c=this.tm.alloc(this.preQSize);this.tm.instance.exports[this.name+"_prepareG2"](b,c);let d=this.tm.getBuff(c,this.preQSize);return this.tm.endSyncOp(),d},d.millerLoop=function(a,b){this.tm.startSyncOp();let c=this.tm.allocBuff(a),d=this.tm.allocBuff(b),e=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_millerLoop"](c,d,e);let f=this.tm.getBuff(e,this.Gt.n8);return this.tm.endSyncOp(),f},d.finalExponentiation=function(a){this.tm.startSyncOp();let b=this.tm.allocBuff(a),c=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_finalExponentiation"](b,c);let d=this.tm.getBuff(c,this.Gt.n8);return this.tm.endSyncOp(),d},d.array2buffer=function(a,b){let c=new Uint8Array(b*a.length);for(let d=0;d<a.length;d++)c.set(a[d],d*b);return c},d.buffer2array=function(a,b){let c=a.byteLength/b,d=Array(c);for(let e=0;e<c;e++)d[e]=a.slice(e*b,e*b+b);return d},d}var aN=c(507);async function aO(a,b){if(!a&&globalThis.curve_bn128)return globalThis.curve_bn128;let c=new aN._o;c.setMemory(25),(0,ak.buildBn128)(c),b&&b(c);let d={};d.code=c.build(),d.pq=c.modules.f1m.pq,d.pr=c.modules.frm.pq,d.pG1gen=c.modules.bn128.pG1gen,d.pG1zero=c.modules.bn128.pG1zero,d.pG1b=c.modules.bn128.pG1b,d.pG2gen=c.modules.bn128.pG2gen,d.pG2zero=c.modules.bn128.pG2zero,d.pG2b=c.modules.bn128.pG2b,d.pOneT=c.modules.bn128.pOneT,d.prePSize=c.modules.bn128.prePSize,d.preQSize=c.modules.bn128.preQSize,d.n8q=32,d.n8r=32,d.q=c.modules.bn128.q,d.r=c.modules.bn128.r;let e={name:"bn128",wasm:d,q:i("21888242871839275222246405745257275088696311157297823662689037894645226208583"),r:i("21888242871839275222246405745257275088548364400416034343698204186575808495617"),n8q:32,n8r:32,cofactorG2:i("30644e72e131a029b85045b68181585e06ceecda572a2489345f2299c0f9fa8d",16),singleThread:!!a},f=await aM(e);return f.terminate=async function(){e.singleThread||(globalThis.curve_bn128=null,await this.tm.terminate())},a||(globalThis.curve_bn128=f),f}async function aP(a,b){if(!a&&globalThis.curve_bls12381)return globalThis.curve_bls12381;let c=new aN._o;c.setMemory(25),(0,ak.buildBls12381)(c),b&&b(c);let d={};d.code=c.build(),d.pq=c.modules.f1m.pq,d.pr=c.modules.frm.pq,d.pG1gen=c.modules.bls12381.pG1gen,d.pG1zero=c.modules.bls12381.pG1zero,d.pG1b=c.modules.bls12381.pG1b,d.pG2gen=c.modules.bls12381.pG2gen,d.pG2zero=c.modules.bls12381.pG2zero,d.pG2b=c.modules.bls12381.pG2b,d.pOneT=c.modules.bls12381.pOneT,d.prePSize=c.modules.bls12381.prePSize,d.preQSize=c.modules.bls12381.preQSize,d.n8q=48,d.n8r=32,d.q=c.modules.bls12381.q,d.r=c.modules.bls12381.r;let e={name:"bls12381",wasm:d,q:i("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),r:i("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),n8q:48,n8r:32,cofactorG1:i("0x396c8c005555e1568c00aaab0000aaab",16),cofactorG2:i("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5",16),singleThread:!!a},f=await aM(e);return f.terminate=async function(){e.singleThread||(globalThis.curve_bls12381=null,await this.tm.terminate())},a||(globalThis.curve_bls12381=f),f}async function aQ(a,b,c){let d,e=a.toUpperCase().match(/[A-Za-z0-9]+/g).join("");if(["BN128","BN254","ALTBN128"].indexOf(e)>=0)d=await aO(b,c);else if(["BLS12381"].indexOf(e)>=0)d=await aP(b,c);else throw Error(`Curve not supported: ${a}`);return d}globalThis.curve_bn128=null,globalThis.curve_bls12381=null,i("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),i("21888242871839275222246405745257275088548364400416034343698204186575808495617"),i("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),i("21888242871839275222246405745257275088696311157297823662689037894645226208583");let aR=e,aS=f},5511:a=>{"use strict";a.exports=require("crypto")},5591:a=>{"use strict";a.exports=require("https")},5856:a=>{function b(a,b){return a===b?0:a>b?1:-1}function c(a){return a%2n!==0n}function d(a){return a%2n===0n}function e(a){return a<0n?a.toString(2).length-1:a.toString(2).length}function f(a){return a<0n?-a:a}function g(a){return 1n===f(a)}function h(a,c){for(var d,e,h,i=0n,j=1n,k=c,l=f(a);0n!==l;)d=k/l,e=i,h=k,i=j,k=l,j=e-d*j,l=h-d*l;if(!g(k))throw Error(a.toString()+" and "+c.toString()+" are not co-prime");return(-1===b(i,0n)&&(i+=c),a<0n)?-i:i}function i(a,b,d){if(0n===d)throw Error("Cannot take modPow with modulus 0");var e,f=1n,g=a%d;for(b<0n&&(b=-(1n*b),g=h(g,d));b>0n;){if(0n===g)return 0n;c(b)&&(f=f*g%d),b/=2n,g=(e=g)*e%d}return f}function j(a,b){var c,e;return 0n!==b&&(!!g(b)||(0==(e=2n,(c=(c=b)>=0n?c:-c)===(e=e>=0n?e:-e)?0:c>e?1:-1)?d(a):a%b===0n))}function k(a,b){for(var c,e,f,h,j=a-1n,k=j,l=0;d(k);)k/=2n,l++;a:for(f=0;f<b.length;f++)if(!(a<b[f])&&!g(h=i(BigInt(b[f]),k,a))&&h!==j){for(e=l-1;0!=e&&!g(h=(c=h)*c%a);e--){;if(h===j)continue a}return!1}return!0}a.exports.bitLength=e,a.exports.isOdd=c,a.exports.isNegative=function(a){return a<0n},a.exports.abs=f,a.exports.isUnit=g,a.exports.compare=b,a.exports.modInv=h,a.exports.modPow=i,a.exports.isPrime=function(a){var b,c=!g(b=f(a))&&(2n===b||3n===b||5n===b||!(d(b)||j(b,3n)||j(b,5n))&&(b<49n||void 0));if(void 0!==c)return c;var h=f(a),i=e(h);if(i<=64)return k(h,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var l=Math.ceil(Math.log(2)*Number(i)),m=[],n=0;n<l;n++)m.push(BigInt(n+2));return k(h,m)},a.exports.square=function(a){return a*a}},5939:(a,b,c)=>{let d=c(6001),e=c(4607),f=c(2758);a.exports=function(a,b,c,g){let h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a$,a_,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b$,b_,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV=a.modules[c].n64,cW=8*cV;if(a.modules[b])return b;a.modules[b]={n64:3*cV},(h=a.addFunction(b+"_isZeroAffine")).addParam("p1","i32"),h.setReturnType("i32"),i=h.getCodeBuilder(),h.addCode(i.i32_and(i.call(c+"_isZero",i.getLocal("p1")),i.call(c+"_isZero",i.i32_add(i.getLocal("p1"),i.i32_const(cW))))),(j=a.addFunction(b+"_isZero")).addParam("p1","i32"),j.setReturnType("i32"),k=j.getCodeBuilder(),j.addCode(k.call(c+"_isZero",k.i32_add(k.getLocal("p1"),k.i32_const(2*cW)))),(l=a.addFunction(b+"_zeroAffine")).addParam("pr","i32"),m=l.getCodeBuilder(),l.addCode(m.call(c+"_zero",m.getLocal("pr"))),l.addCode(m.call(c+"_zero",m.i32_add(m.getLocal("pr"),m.i32_const(cW)))),(n=a.addFunction(b+"_zero")).addParam("pr","i32"),o=n.getCodeBuilder(),n.addCode(o.call(c+"_zero",o.getLocal("pr"))),n.addCode(o.call(c+"_one",o.i32_add(o.getLocal("pr"),o.i32_const(cW)))),n.addCode(o.call(c+"_zero",o.i32_add(o.getLocal("pr"),o.i32_const(2*cW))));let cX=a.addFunction(b+"_copyAffine");cX.addParam("ps","i32"),cX.addParam("pd","i32");let cY=cX.getCodeBuilder();for(let a=0;a<2*cV;a++)cX.addCode(cY.i64_store(cY.getLocal("pd"),8*a,cY.i64_load(cY.getLocal("ps"),8*a)));let cZ=a.addFunction(b+"_copy");cZ.addParam("ps","i32"),cZ.addParam("pd","i32");let c$=cZ.getCodeBuilder();for(let a=0;a<3*cV;a++)cZ.addCode(c$.i64_store(c$.getLocal("pd"),8*a,c$.i64_load(c$.getLocal("ps"),8*a)));(p=a.addFunction(b+"_toJacobian")).addParam("p1","i32"),p.addParam("pr","i32"),r=(q=p.getCodeBuilder()).getLocal("p1"),s=q.i32_add(q.getLocal("p1"),q.i32_const(cW)),t=q.getLocal("pr"),u=q.i32_add(q.getLocal("pr"),q.i32_const(cW)),v=q.i32_add(q.getLocal("pr"),q.i32_const(2*cW)),p.addCode(q.if(q.call(b+"_isZeroAffine",q.getLocal("p1")),q.call(b+"_zero",q.getLocal("pr")),[...q.call(c+"_one",v),...q.call(c+"_copy",s,u),...q.call(c+"_copy",r,t)])),(w=a.addFunction(b+"_eqAffine")).addParam("p1","i32"),w.addParam("p2","i32"),w.setReturnType("i32"),w.addLocal("z1","i32"),x=w.getCodeBuilder(),w.addCode(x.ret(x.i32_and(x.call(c+"_eq",x.getLocal("p1"),x.getLocal("p2")),x.call(c+"_eq",x.i32_add(x.getLocal("p1"),x.i32_const(cW)),x.i32_add(x.getLocal("p2"),x.i32_const(cW)))))),(y=a.addFunction(b+"_eqMixed")).addParam("p1","i32"),y.addParam("p2","i32"),y.setReturnType("i32"),y.addLocal("z1","i32"),A=(z=y.getCodeBuilder()).getLocal("p1"),B=z.i32_add(z.getLocal("p1"),z.i32_const(cW)),y.addCode(z.setLocal("z1",z.i32_add(z.getLocal("p1"),z.i32_const(2*cW)))),C=z.getLocal("z1"),D=z.getLocal("p2"),E=z.i32_add(z.getLocal("p2"),z.i32_const(cW)),F=z.i32_const(a.alloc(cW)),G=z.i32_const(a.alloc(cW)),H=z.i32_const(a.alloc(cW)),I=z.i32_const(a.alloc(cW)),y.addCode(z.if(z.call(b+"_isZero",z.getLocal("p1")),z.ret(z.call(b+"_isZeroAffine",z.getLocal("p2")))),z.if(z.call(b+"_isZeroAffine",z.getLocal("p2")),z.ret(z.i32_const(0))),z.if(z.call(c+"_isOne",C),z.ret(z.call(b+"_eqAffine",z.getLocal("p1"),z.getLocal("p2")))),z.call(c+"_square",C,F),z.call(c+"_mul",D,F,G),z.call(c+"_mul",C,F,H),z.call(c+"_mul",E,H,I),z.if(z.call(c+"_eq",A,G),z.if(z.call(c+"_eq",B,I),z.ret(z.i32_const(1)))),z.ret(z.i32_const(0))),(J=a.addFunction(b+"_eq")).addParam("p1","i32"),J.addParam("p2","i32"),J.setReturnType("i32"),J.addLocal("z1","i32"),J.addLocal("z2","i32"),L=(K=J.getCodeBuilder()).getLocal("p1"),M=K.i32_add(K.getLocal("p1"),K.i32_const(cW)),J.addCode(K.setLocal("z1",K.i32_add(K.getLocal("p1"),K.i32_const(2*cW)))),N=K.getLocal("z1"),O=K.getLocal("p2"),P=K.i32_add(K.getLocal("p2"),K.i32_const(cW)),J.addCode(K.setLocal("z2",K.i32_add(K.getLocal("p2"),K.i32_const(2*cW)))),Q=K.getLocal("z2"),R=K.i32_const(a.alloc(cW)),S=K.i32_const(a.alloc(cW)),T=K.i32_const(a.alloc(cW)),U=K.i32_const(a.alloc(cW)),V=K.i32_const(a.alloc(cW)),W=K.i32_const(a.alloc(cW)),X=K.i32_const(a.alloc(cW)),Y=K.i32_const(a.alloc(cW)),J.addCode(K.if(K.call(b+"_isZero",K.getLocal("p1")),K.ret(K.call(b+"_isZero",K.getLocal("p2")))),K.if(K.call(b+"_isZero",K.getLocal("p2")),K.ret(K.i32_const(0))),K.if(K.call(c+"_isOne",N),K.ret(K.call(b+"_eqMixed",K.getLocal("p2"),K.getLocal("p1")))),K.if(K.call(c+"_isOne",Q),K.ret(K.call(b+"_eqMixed",K.getLocal("p1"),K.getLocal("p2")))),K.call(c+"_square",N,R),K.call(c+"_square",Q,S),K.call(c+"_mul",L,S,T),K.call(c+"_mul",O,R,U),K.call(c+"_mul",N,R,V),K.call(c+"_mul",Q,S,W),K.call(c+"_mul",M,W,X),K.call(c+"_mul",P,V,Y),K.if(K.call(c+"_eq",T,U),K.if(K.call(c+"_eq",X,Y),K.ret(K.i32_const(1)))),K.ret(K.i32_const(0))),(Z=a.addFunction(b+"_doubleAffine")).addParam("p1","i32"),Z.addParam("pr","i32"),_=($=Z.getCodeBuilder()).getLocal("p1"),aa=$.i32_add($.getLocal("p1"),$.i32_const(cW)),ab=$.getLocal("pr"),ac=$.i32_add($.getLocal("pr"),$.i32_const(cW)),ad=$.i32_add($.getLocal("pr"),$.i32_const(2*cW)),ae=$.i32_const(a.alloc(cW)),af=$.i32_const(a.alloc(cW)),ag=$.i32_const(a.alloc(cW)),ah=$.i32_const(a.alloc(cW)),ai=$.i32_const(a.alloc(cW)),aj=$.i32_const(a.alloc(cW)),Z.addCode($.if($.call(b+"_isZeroAffine",$.getLocal("p1")),[...$.call(b+"_toJacobian",$.getLocal("p1"),$.getLocal("pr")),...$.ret([])]),$.call(c+"_square",_,ae),$.call(c+"_square",aa,af),$.call(c+"_square",af,ag),$.call(c+"_add",_,af,ah),$.call(c+"_square",ah,ah),$.call(c+"_sub",ah,ae,ah),$.call(c+"_sub",ah,ag,ah),$.call(c+"_add",ah,ah,ah),$.call(c+"_add",ae,ae,ai),$.call(c+"_add",ai,ae,ai),$.call(c+"_add",aa,aa,ad),$.call(c+"_square",ai,ab),$.call(c+"_sub",ab,ah,ab),$.call(c+"_sub",ab,ah,ab),$.call(c+"_add",ag,ag,aj),$.call(c+"_add",aj,aj,aj),$.call(c+"_add",aj,aj,aj),$.call(c+"_sub",ah,ab,ac),$.call(c+"_mul",ac,ai,ac),$.call(c+"_sub",ac,aj,ac)),(ak=a.addFunction(b+"_double")).addParam("p1","i32"),ak.addParam("pr","i32"),am=(al=ak.getCodeBuilder()).getLocal("p1"),an=al.i32_add(al.getLocal("p1"),al.i32_const(cW)),ao=al.i32_add(al.getLocal("p1"),al.i32_const(2*cW)),ap=al.getLocal("pr"),aq=al.i32_add(al.getLocal("pr"),al.i32_const(cW)),ar=al.i32_add(al.getLocal("pr"),al.i32_const(2*cW)),as=al.i32_const(a.alloc(cW)),at=al.i32_const(a.alloc(cW)),au=al.i32_const(a.alloc(cW)),av=al.i32_const(a.alloc(cW)),aw=al.i32_const(a.alloc(cW)),ax=al.i32_const(a.alloc(cW)),ay=al.i32_const(a.alloc(cW)),az=al.i32_const(a.alloc(cW)),ak.addCode(al.if(al.call(b+"_isZero",al.getLocal("p1")),[...al.call(b+"_copy",al.getLocal("p1"),al.getLocal("pr")),...al.ret([])]),al.if(al.call(c+"_isOne",ao),[...al.ret(al.call(b+"_doubleAffine",al.getLocal("p1"),al.getLocal("pr"))),...al.ret([])]),al.call(c+"_square",am,as),al.call(c+"_square",an,at),al.call(c+"_square",at,au),al.call(c+"_add",am,at,av),al.call(c+"_square",av,av),al.call(c+"_sub",av,as,av),al.call(c+"_sub",av,au,av),al.call(c+"_add",av,av,av),al.call(c+"_add",as,as,aw),al.call(c+"_add",aw,as,aw),al.call(c+"_square",aw,ax),al.call(c+"_mul",an,ao,ay),al.call(c+"_add",av,av,ap),al.call(c+"_sub",ax,ap,ap),al.call(c+"_add",au,au,az),al.call(c+"_add",az,az,az),al.call(c+"_add",az,az,az),al.call(c+"_sub",av,ap,aq),al.call(c+"_mul",aq,aw,aq),al.call(c+"_sub",aq,az,aq),al.call(c+"_add",ay,ay,ar)),(aA=a.addFunction(b+"_addAffine")).addParam("p1","i32"),aA.addParam("p2","i32"),aA.addParam("pr","i32"),aA.addLocal("z1","i32"),aC=(aB=aA.getCodeBuilder()).getLocal("p1"),aD=aB.i32_add(aB.getLocal("p1"),aB.i32_const(cW)),aA.addCode(aB.setLocal("z1",aB.i32_add(aB.getLocal("p1"),aB.i32_const(2*cW)))),aE=aB.getLocal("p2"),aF=aB.i32_add(aB.getLocal("p2"),aB.i32_const(cW)),aG=aB.getLocal("pr"),aH=aB.i32_add(aB.getLocal("pr"),aB.i32_const(cW)),aI=aB.i32_add(aB.getLocal("pr"),aB.i32_const(2*cW)),aJ=aB.i32_const(a.alloc(cW)),aK=aB.i32_const(a.alloc(cW)),aL=aB.i32_const(a.alloc(cW)),aM=aB.i32_const(a.alloc(cW)),aN=aB.i32_const(a.alloc(cW)),aO=aB.i32_const(a.alloc(cW)),aP=aB.i32_const(a.alloc(cW)),aQ=aB.i32_const(a.alloc(cW)),aR=aB.i32_const(a.alloc(cW)),aS=aB.i32_const(a.alloc(cW)),aA.addCode(aB.if(aB.call(b+"_isZeroAffine",aB.getLocal("p1")),[...aB.call(b+"_copyAffine",aB.getLocal("p2"),aB.getLocal("pr")),...aB.call(c+"_one",aB.i32_add(aB.getLocal("pr"),aB.i32_const(2*cW))),...aB.ret([])]),aB.if(aB.call(b+"_isZeroAffine",aB.getLocal("p2")),[...aB.call(b+"_copyAffine",aB.getLocal("p1"),aB.getLocal("pr")),...aB.call(c+"_one",aB.i32_add(aB.getLocal("pr"),aB.i32_const(2*cW))),...aB.ret([])]),aB.if(aB.call(c+"_eq",aC,aE),aB.if(aB.call(c+"_eq",aD,aF),[...aB.call(b+"_doubleAffine",aB.getLocal("p2"),aB.getLocal("pr")),...aB.ret([])])),aB.call(c+"_sub",aE,aC,aJ),aB.call(c+"_sub",aF,aD,aL),aB.call(c+"_square",aJ,aK),aB.call(c+"_add",aK,aK,aM),aB.call(c+"_add",aM,aM,aM),aB.call(c+"_mul",aJ,aM,aN),aB.call(c+"_add",aL,aL,aO),aB.call(c+"_mul",aC,aM,aQ),aB.call(c+"_square",aO,aP),aB.call(c+"_add",aQ,aQ,aR),aB.call(c+"_sub",aP,aN,aG),aB.call(c+"_sub",aG,aR,aG),aB.call(c+"_mul",aD,aN,aS),aB.call(c+"_add",aS,aS,aS),aB.call(c+"_sub",aQ,aG,aH),aB.call(c+"_mul",aH,aO,aH),aB.call(c+"_sub",aH,aS,aH),aB.call(c+"_add",aJ,aJ,aI)),(aT=a.addFunction(b+"_addMixed")).addParam("p1","i32"),aT.addParam("p2","i32"),aT.addParam("pr","i32"),aT.addLocal("z1","i32"),aV=(aU=aT.getCodeBuilder()).getLocal("p1"),aW=aU.i32_add(aU.getLocal("p1"),aU.i32_const(cW)),aT.addCode(aU.setLocal("z1",aU.i32_add(aU.getLocal("p1"),aU.i32_const(2*cW)))),aX=aU.getLocal("z1"),aY=aU.getLocal("p2"),aZ=aU.i32_add(aU.getLocal("p2"),aU.i32_const(cW)),a$=aU.getLocal("pr"),a_=aU.i32_add(aU.getLocal("pr"),aU.i32_const(cW)),a0=aU.i32_add(aU.getLocal("pr"),aU.i32_const(2*cW)),a1=aU.i32_const(a.alloc(cW)),a2=aU.i32_const(a.alloc(cW)),a3=aU.i32_const(a.alloc(cW)),a4=aU.i32_const(a.alloc(cW)),a5=aU.i32_const(a.alloc(cW)),a6=aU.i32_const(a.alloc(cW)),a7=aU.i32_const(a.alloc(cW)),a8=aU.i32_const(a.alloc(cW)),a9=aU.i32_const(a.alloc(cW)),ba=aU.i32_const(a.alloc(cW)),bb=aU.i32_const(a.alloc(cW)),bc=aU.i32_const(a.alloc(cW)),bd=aU.i32_const(a.alloc(cW)),be=aU.i32_const(a.alloc(cW)),aT.addCode(aU.if(aU.call(b+"_isZero",aU.getLocal("p1")),[...aU.call(b+"_copyAffine",aU.getLocal("p2"),aU.getLocal("pr")),...aU.call(c+"_one",aU.i32_add(aU.getLocal("pr"),aU.i32_const(2*cW))),...aU.ret([])]),aU.if(aU.call(b+"_isZeroAffine",aU.getLocal("p2")),[...aU.call(b+"_copy",aU.getLocal("p1"),aU.getLocal("pr")),...aU.ret([])]),aU.if(aU.call(c+"_isOne",aX),[...aU.call(b+"_addAffine",aV,aY,a$),...aU.ret([])]),aU.call(c+"_square",aX,a1),aU.call(c+"_mul",aY,a1,a2),aU.call(c+"_mul",aX,a1,a3),aU.call(c+"_mul",aZ,a3,a4),aU.if(aU.call(c+"_eq",aV,a2),aU.if(aU.call(c+"_eq",aW,a4),[...aU.call(b+"_doubleAffine",aU.getLocal("p2"),aU.getLocal("pr")),...aU.ret([])])),aU.call(c+"_sub",a2,aV,a5),aU.call(c+"_sub",a4,aW,a7),aU.call(c+"_square",a5,a6),aU.call(c+"_add",a6,a6,a8),aU.call(c+"_add",a8,a8,a8),aU.call(c+"_mul",a5,a8,a9),aU.call(c+"_add",a7,a7,ba),aU.call(c+"_mul",aV,a8,bc),aU.call(c+"_square",ba,bb),aU.call(c+"_add",bc,bc,bd),aU.call(c+"_sub",bb,a9,a$),aU.call(c+"_sub",a$,bd,a$),aU.call(c+"_mul",aW,a9,be),aU.call(c+"_add",be,be,be),aU.call(c+"_sub",bc,a$,a_),aU.call(c+"_mul",a_,ba,a_),aU.call(c+"_sub",a_,be,a_),aU.call(c+"_add",aX,a5,a0),aU.call(c+"_square",a0,a0),aU.call(c+"_sub",a0,a1,a0),aU.call(c+"_sub",a0,a6,a0)),(bf=a.addFunction(b+"_add")).addParam("p1","i32"),bf.addParam("p2","i32"),bf.addParam("pr","i32"),bf.addLocal("z1","i32"),bf.addLocal("z2","i32"),bh=(bg=bf.getCodeBuilder()).getLocal("p1"),bi=bg.i32_add(bg.getLocal("p1"),bg.i32_const(cW)),bf.addCode(bg.setLocal("z1",bg.i32_add(bg.getLocal("p1"),bg.i32_const(2*cW)))),bj=bg.getLocal("z1"),bk=bg.getLocal("p2"),bl=bg.i32_add(bg.getLocal("p2"),bg.i32_const(cW)),bf.addCode(bg.setLocal("z2",bg.i32_add(bg.getLocal("p2"),bg.i32_const(2*cW)))),bm=bg.getLocal("z2"),bn=bg.getLocal("pr"),bo=bg.i32_add(bg.getLocal("pr"),bg.i32_const(cW)),bp=bg.i32_add(bg.getLocal("pr"),bg.i32_const(2*cW)),bq=bg.i32_const(a.alloc(cW)),br=bg.i32_const(a.alloc(cW)),bs=bg.i32_const(a.alloc(cW)),bt=bg.i32_const(a.alloc(cW)),bu=bg.i32_const(a.alloc(cW)),bv=bg.i32_const(a.alloc(cW)),bw=bg.i32_const(a.alloc(cW)),bx=bg.i32_const(a.alloc(cW)),by=bg.i32_const(a.alloc(cW)),bz=bg.i32_const(a.alloc(cW)),bA=bg.i32_const(a.alloc(cW)),bB=bg.i32_const(a.alloc(cW)),bC=bg.i32_const(a.alloc(cW)),bD=bg.i32_const(a.alloc(cW)),bE=bg.i32_const(a.alloc(cW)),bF=bg.i32_const(a.alloc(cW)),bG=bg.i32_const(a.alloc(cW)),bf.addCode(bg.if(bg.call(b+"_isZero",bg.getLocal("p1")),[...bg.call(b+"_copy",bg.getLocal("p2"),bg.getLocal("pr")),...bg.ret([])]),bg.if(bg.call(b+"_isZero",bg.getLocal("p2")),[...bg.call(b+"_copy",bg.getLocal("p1"),bg.getLocal("pr")),...bg.ret([])]),bg.if(bg.call(c+"_isOne",bj),[...bg.call(b+"_addMixed",bk,bh,bn),...bg.ret([])]),bg.if(bg.call(c+"_isOne",bm),[...bg.call(b+"_addMixed",bh,bk,bn),...bg.ret([])]),bg.call(c+"_square",bj,bq),bg.call(c+"_square",bm,br),bg.call(c+"_mul",bh,br,bs),bg.call(c+"_mul",bk,bq,bt),bg.call(c+"_mul",bj,bq,bu),bg.call(c+"_mul",bm,br,bv),bg.call(c+"_mul",bi,bv,bw),bg.call(c+"_mul",bl,bu,bx),bg.if(bg.call(c+"_eq",bs,bt),bg.if(bg.call(c+"_eq",bw,bx),[...bg.call(b+"_double",bg.getLocal("p1"),bg.getLocal("pr")),...bg.ret([])])),bg.call(c+"_sub",bt,bs,by),bg.call(c+"_sub",bx,bw,bz),bg.call(c+"_add",by,by,bA),bg.call(c+"_square",bA,bA),bg.call(c+"_mul",by,bA,bB),bg.call(c+"_add",bz,bz,bC),bg.call(c+"_mul",bs,bA,bE),bg.call(c+"_square",bC,bD),bg.call(c+"_add",bE,bE,bF),bg.call(c+"_sub",bD,bB,bn),bg.call(c+"_sub",bn,bF,bn),bg.call(c+"_mul",bw,bB,bG),bg.call(c+"_add",bG,bG,bG),bg.call(c+"_sub",bE,bn,bo),bg.call(c+"_mul",bo,bC,bo),bg.call(c+"_sub",bo,bG,bo),bg.call(c+"_add",bj,bm,bp),bg.call(c+"_square",bp,bp),bg.call(c+"_sub",bp,bq,bp),bg.call(c+"_sub",bp,br,bp),bg.call(c+"_mul",bp,by,bp)),(bH=a.addFunction(b+"_negAffine")).addParam("p1","i32"),bH.addParam("pr","i32"),bJ=(bI=bH.getCodeBuilder()).getLocal("p1"),bK=bI.i32_add(bI.getLocal("p1"),bI.i32_const(cW)),bL=bI.getLocal("pr"),bM=bI.i32_add(bI.getLocal("pr"),bI.i32_const(cW)),bH.addCode(bI.call(c+"_copy",bJ,bL),bI.call(c+"_neg",bK,bM)),(bN=a.addFunction(b+"_neg")).addParam("p1","i32"),bN.addParam("pr","i32"),bP=(bO=bN.getCodeBuilder()).getLocal("p1"),bQ=bO.i32_add(bO.getLocal("p1"),bO.i32_const(cW)),bR=bO.i32_add(bO.getLocal("p1"),bO.i32_const(2*cW)),bS=bO.getLocal("pr"),bT=bO.i32_add(bO.getLocal("pr"),bO.i32_const(cW)),bU=bO.i32_add(bO.getLocal("pr"),bO.i32_const(2*cW)),bN.addCode(bO.call(c+"_copy",bP,bS),bO.call(c+"_neg",bQ,bT),bO.call(c+"_copy",bR,bU)),(bV=a.addFunction(b+"_subAffine")).addParam("p1","i32"),bV.addParam("p2","i32"),bV.addParam("pr","i32"),bX=(bW=bV.getCodeBuilder()).i32_const(a.alloc(3*cW)),bV.addCode(bW.call(b+"_negAffine",bW.getLocal("p2"),bX),bW.call(b+"_addAffine",bW.getLocal("p1"),bX,bW.getLocal("pr"))),(bY=a.addFunction(b+"_subMixed")).addParam("p1","i32"),bY.addParam("p2","i32"),bY.addParam("pr","i32"),b$=(bZ=bY.getCodeBuilder()).i32_const(a.alloc(3*cW)),bY.addCode(bZ.call(b+"_negAffine",bZ.getLocal("p2"),b$),bZ.call(b+"_addMixed",bZ.getLocal("p1"),b$,bZ.getLocal("pr"))),(b_=a.addFunction(b+"_sub")).addParam("p1","i32"),b_.addParam("p2","i32"),b_.addParam("pr","i32"),b1=(b0=b_.getCodeBuilder()).i32_const(a.alloc(3*cW)),b_.addCode(b0.call(b+"_neg",b0.getLocal("p2"),b1),b0.call(b+"_add",b0.getLocal("p1"),b1,b0.getLocal("pr")));let c_=a.addFunction(b+"_fromMontgomeryAffine");c_.addParam("p1","i32"),c_.addParam("pr","i32");let c0=c_.getCodeBuilder();c_.addCode(c0.call(c+"_fromMontgomery",c0.getLocal("p1"),c0.getLocal("pr")));for(let a=1;a<2;a++)c_.addCode(c0.call(c+"_fromMontgomery",c0.i32_add(c0.getLocal("p1"),c0.i32_const(a*cW)),c0.i32_add(c0.getLocal("pr"),c0.i32_const(a*cW))));let c1=a.addFunction(b+"_fromMontgomery");c1.addParam("p1","i32"),c1.addParam("pr","i32");let c2=c1.getCodeBuilder();c1.addCode(c2.call(c+"_fromMontgomery",c2.getLocal("p1"),c2.getLocal("pr")));for(let a=1;a<3;a++)c1.addCode(c2.call(c+"_fromMontgomery",c2.i32_add(c2.getLocal("p1"),c2.i32_const(a*cW)),c2.i32_add(c2.getLocal("pr"),c2.i32_const(a*cW))));let c3=a.addFunction(b+"_toMontgomeryAffine");c3.addParam("p1","i32"),c3.addParam("pr","i32");let c4=c3.getCodeBuilder();c3.addCode(c4.call(c+"_toMontgomery",c4.getLocal("p1"),c4.getLocal("pr")));for(let a=1;a<2;a++)c3.addCode(c4.call(c+"_toMontgomery",c4.i32_add(c4.getLocal("p1"),c4.i32_const(a*cW)),c4.i32_add(c4.getLocal("pr"),c4.i32_const(a*cW))));let c5=a.addFunction(b+"_toMontgomery");c5.addParam("p1","i32"),c5.addParam("pr","i32");let c6=c5.getCodeBuilder();c5.addCode(c6.call(c+"_toMontgomery",c6.getLocal("p1"),c6.getLocal("pr")));for(let a=1;a<3;a++)c5.addCode(c6.call(c+"_toMontgomery",c6.i32_add(c6.getLocal("p1"),c6.i32_const(a*cW)),c6.i32_add(c6.getLocal("pr"),c6.i32_const(a*cW))));return(b2=a.addFunction(b+"_toAffine")).addParam("p1","i32"),b2.addParam("pr","i32"),b4=(b3=b2.getCodeBuilder()).getLocal("p1"),b5=b3.i32_add(b3.getLocal("p1"),b3.i32_const(cW)),b6=b3.i32_add(b3.getLocal("p1"),b3.i32_const(2*cW)),b7=b3.getLocal("pr"),b8=b3.i32_add(b3.getLocal("pr"),b3.i32_const(cW)),b9=b3.i32_const(a.alloc(cW)),ca=b3.i32_const(a.alloc(cW)),cb=b3.i32_const(a.alloc(cW)),b2.addCode(b3.if(b3.call(b+"_isZero",b3.getLocal("p1")),[...b3.call(c+"_zero",b7),...b3.call(c+"_zero",b8)],[...b3.call(c+"_inverse",b6,b9),...b3.call(c+"_square",b9,ca),...b3.call(c+"_mul",b9,ca,cb),...b3.call(c+"_mul",b4,ca,b7),...b3.call(c+"_mul",b5,cb,b8)])),(cc=a.addFunction(b+"_inCurveAffine")).addParam("pIn","i32"),cc.setReturnType("i32"),ce=(cd=cc.getCodeBuilder()).getLocal("pIn"),cf=cd.i32_add(cd.getLocal("pIn"),cd.i32_const(cW)),cg=cd.i32_const(a.alloc(cW)),ch=cd.i32_const(a.alloc(cW)),cc.addCode(cd.call(c+"_square",cf,cg),cd.call(c+"_square",ce,ch),cd.call(c+"_mul",ce,ch,ch),cd.call(c+"_add",ch,cd.i32_const(g),ch),cd.ret(cd.call(c+"_eq",cg,ch))),(ci=a.addFunction(b+"_inCurve")).addParam("pIn","i32"),ci.setReturnType("i32"),ck=(cj=ci.getCodeBuilder()).i32_const(a.alloc(2*cW)),ci.addCode(cj.call(b+"_toAffine",cj.getLocal("pIn"),ck),cj.ret(cj.call(b+"_inCurveAffine",ck))),(cl=a.addFunction(b+"_batchToAffine")).addParam("pIn","i32"),cl.addParam("n","i32"),cl.addParam("pOut","i32"),cl.addLocal("pAux","i32"),cl.addLocal("itIn","i32"),cl.addLocal("itAux","i32"),cl.addLocal("itOut","i32"),cl.addLocal("i","i32"),cn=(cm=cl.getCodeBuilder()).i32_const(a.alloc(cW)),cl.addCode(cm.setLocal("pAux",cm.i32_load(cm.i32_const(0))),cm.i32_store(cm.i32_const(0),cm.i32_add(cm.getLocal("pAux"),cm.i32_mul(cm.getLocal("n"),cm.i32_const(cW)))),cm.call(c+"_batchInverse",cm.i32_add(cm.getLocal("pIn"),cm.i32_const(2*cW)),cm.i32_const(3*cW),cm.getLocal("n"),cm.getLocal("pAux"),cm.i32_const(cW)),cm.setLocal("itIn",cm.getLocal("pIn")),cm.setLocal("itAux",cm.getLocal("pAux")),cm.setLocal("itOut",cm.getLocal("pOut")),cm.setLocal("i",cm.i32_const(0)),cm.block(cm.loop(cm.br_if(1,cm.i32_eq(cm.getLocal("i"),cm.getLocal("n"))),cm.if(cm.call(c+"_isZero",cm.getLocal("itAux")),[...cm.call(c+"_zero",cm.getLocal("itOut")),...cm.call(c+"_zero",cm.i32_add(cm.getLocal("itOut"),cm.i32_const(cW)))],[...cm.call(c+"_mul",cm.getLocal("itAux"),cm.i32_add(cm.getLocal("itIn"),cm.i32_const(cW)),cn),...cm.call(c+"_square",cm.getLocal("itAux"),cm.getLocal("itAux")),...cm.call(c+"_mul",cm.getLocal("itAux"),cm.getLocal("itIn"),cm.getLocal("itOut")),...cm.call(c+"_mul",cm.getLocal("itAux"),cn,cm.i32_add(cm.getLocal("itOut"),cm.i32_const(cW)))]),cm.setLocal("itIn",cm.i32_add(cm.getLocal("itIn"),cm.i32_const(3*cW))),cm.setLocal("itOut",cm.i32_add(cm.getLocal("itOut"),cm.i32_const(2*cW))),cm.setLocal("itAux",cm.i32_add(cm.getLocal("itAux"),cm.i32_const(cW))),cm.setLocal("i",cm.i32_add(cm.getLocal("i"),cm.i32_const(1))),cm.br(0))),cm.i32_store(cm.i32_const(0),cm.getLocal("pAux"))),(co=a.addFunction(b+"_normalize")).addParam("p1","i32"),co.addParam("pr","i32"),cq=(cp=co.getCodeBuilder()).getLocal("p1"),cr=cp.i32_add(cp.getLocal("p1"),cp.i32_const(cW)),cs=cp.i32_add(cp.getLocal("p1"),cp.i32_const(2*cW)),ct=cp.getLocal("pr"),cu=cp.i32_add(cp.getLocal("pr"),cp.i32_const(cW)),cv=cp.i32_add(cp.getLocal("pr"),cp.i32_const(2*cW)),cw=cp.i32_const(a.alloc(cW)),cx=cp.i32_const(a.alloc(cW)),cy=cp.i32_const(a.alloc(cW)),co.addCode(cp.if(cp.call(b+"_isZero",cp.getLocal("p1")),cp.call(b+"_zero",cp.getLocal("pr")),[...cp.call(c+"_inverse",cs,cw),...cp.call(c+"_square",cw,cx),...cp.call(c+"_mul",cw,cx,cy),...cp.call(c+"_mul",cq,cx,ct),...cp.call(c+"_mul",cr,cy,cu),...cp.call(c+"_one",cv)])),(cz=a.addFunction(b+"__reverseBytes")).addParam("pIn","i32"),cz.addParam("n","i32"),cz.addParam("pOut","i32"),cz.addLocal("itOut","i32"),cz.addLocal("itIn","i32"),cA=cz.getCodeBuilder(),cz.addCode(cA.setLocal("itOut",cA.i32_sub(cA.i32_add(cA.getLocal("pOut"),cA.getLocal("n")),cA.i32_const(1))),cA.setLocal("itIn",cA.getLocal("pIn")),cA.block(cA.loop(cA.br_if(1,cA.i32_lt_s(cA.getLocal("itOut"),cA.getLocal("pOut"))),cA.i32_store8(cA.getLocal("itOut"),cA.i32_load8_u(cA.getLocal("itIn"))),cA.setLocal("itOut",cA.i32_sub(cA.getLocal("itOut"),cA.i32_const(1))),cA.setLocal("itIn",cA.i32_add(cA.getLocal("itIn"),cA.i32_const(1))),cA.br(0)))),(cB=a.addFunction(b+"_LEMtoU")).addParam("pIn","i32"),cB.addParam("pOut","i32"),cC=cB.getCodeBuilder(),cD=a.alloc(2*cW),cE=cC.i32_const(cD),cF=cC.i32_const(cD),cG=cC.i32_const(cD+cW),cB.addCode(cC.if(cC.call(b+"_isZeroAffine",cC.getLocal("pIn")),[...cC.call(b+"_zeroAffine",cC.getLocal("pOut")),...cC.ret([])]),cC.call(b+"_fromMontgomeryAffine",cC.getLocal("pIn"),cE),cC.call(b+"__reverseBytes",cF,cC.i32_const(cW),cC.getLocal("pOut")),cC.call(b+"__reverseBytes",cG,cC.i32_const(cW),cC.i32_add(cC.getLocal("pOut"),cC.i32_const(cW)))),(cH=a.addFunction(b+"_LEMtoC")).addParam("pIn","i32"),cH.addParam("pOut","i32"),cJ=(cI=cH.getCodeBuilder()).i32_const(a.alloc(cW)),cH.addCode(cI.if(cI.call(b+"_isZeroAffine",cI.getLocal("pIn")),[...cI.call(c+"_zero",cI.getLocal("pOut")),...cI.i32_store8(cI.getLocal("pOut"),cI.i32_const(64)),...cI.ret([])]),cI.call(c+"_fromMontgomery",cI.getLocal("pIn"),cJ),cI.call(b+"__reverseBytes",cJ,cI.i32_const(cW),cI.getLocal("pOut")),cI.if(cI.i32_eq(cI.call(c+"_sign",cI.i32_add(cI.getLocal("pIn"),cI.i32_const(cW))),cI.i32_const(-1)),cI.i32_store8(cI.getLocal("pOut"),cI.i32_or(cI.i32_load8_u(cI.getLocal("pOut")),cI.i32_const(128))))),(cK=a.addFunction(b+"_UtoLEM")).addParam("pIn","i32"),cK.addParam("pOut","i32"),cL=cK.getCodeBuilder(),cM=a.alloc(2*cW),cN=cL.i32_const(cM),cO=cL.i32_const(cM),cP=cL.i32_const(cM+cW),cK.addCode(cL.if(cL.i32_and(cL.i32_load8_u(cL.getLocal("pIn")),cL.i32_const(64)),[...cL.call(b+"_zeroAffine",cL.getLocal("pOut")),...cL.ret([])]),cL.call(b+"__reverseBytes",cL.getLocal("pIn"),cL.i32_const(cW),cO),cL.call(b+"__reverseBytes",cL.i32_add(cL.getLocal("pIn"),cL.i32_const(cW)),cL.i32_const(cW),cP),cL.call(b+"_toMontgomeryAffine",cN,cL.getLocal("pOut"))),(cQ=a.addFunction(b+"_CtoLEM")).addParam("pIn","i32"),cQ.addParam("pOut","i32"),cQ.addLocal("firstByte","i32"),cQ.addLocal("greatest","i32"),cR=cQ.getCodeBuilder(),cS=a.alloc(2*cW),cT=cR.i32_const(cS),cU=cR.i32_const(cS+cW),cQ.addCode(cR.setLocal("firstByte",cR.i32_load8_u(cR.getLocal("pIn"))),cR.if(cR.i32_and(cR.getLocal("firstByte"),cR.i32_const(64)),[...cR.call(b+"_zeroAffine",cR.getLocal("pOut")),...cR.ret([])]),cR.setLocal("greatest",cR.i32_and(cR.getLocal("firstByte"),cR.i32_const(128))),cR.call(c+"_copy",cR.getLocal("pIn"),cU),cR.i32_store8(cU,cR.i32_and(cR.getLocal("firstByte"),cR.i32_const(63))),cR.call(b+"__reverseBytes",cU,cR.i32_const(cW),cT),cR.call(c+"_toMontgomery",cT,cR.getLocal("pOut")),cR.call(c+"_square",cR.getLocal("pOut"),cU),cR.call(c+"_mul",cR.getLocal("pOut"),cU,cU),cR.call(c+"_add",cU,cR.i32_const(g),cU),cR.call(c+"_sqrt",cU,cU),cR.call(c+"_neg",cU,cT),cR.if(cR.i32_eq(cR.call(c+"_sign",cU),cR.i32_const(-1)),cR.if(cR.getLocal("greatest"),cR.call(c+"_copy",cU,cR.i32_add(cR.getLocal("pOut"),cR.i32_const(cW))),cR.call(c+"_neg",cU,cR.i32_add(cR.getLocal("pOut"),cR.i32_const(cW)))),cR.if(cR.getLocal("greatest"),cR.call(c+"_neg",cU,cR.i32_add(cR.getLocal("pOut"),cR.i32_const(cW))),cR.call(c+"_copy",cU,cR.i32_add(cR.getLocal("pOut"),cR.i32_const(cW)))))),e(a,b+"_batchLEMtoU",b+"_LEMtoU",2*cW,2*cW),e(a,b+"_batchLEMtoC",b+"_LEMtoC",2*cW,cW),e(a,b+"_batchUtoLEM",b+"_UtoLEM",2*cW,2*cW),e(a,b+"_batchCtoLEM",b+"_CtoLEM",cW,2*cW,!0),e(a,b+"_batchToJacobian",b+"_toJacobian",2*cW,3*cW,!0),f(a,b,b+"_multiexp",b+"_add",3*cW),f(a,b,b+"_multiexpAffine",b+"_addMixed",2*cW),d(a,b+"_timesScalar",3*cW,b+"_add",b+"_double",b+"_sub",b+"_copy",b+"_zero"),d(a,b+"_timesScalarAffine",2*cW,b+"_addMixed",b+"_double",b+"_subMixed",b+"_copyAffine",b+"_zero"),a.exportFunction(b+"_isZero"),a.exportFunction(b+"_isZeroAffine"),a.exportFunction(b+"_eq"),a.exportFunction(b+"_eqMixed"),a.exportFunction(b+"_eqAffine"),a.exportFunction(b+"_copy"),a.exportFunction(b+"_copyAffine"),a.exportFunction(b+"_zero"),a.exportFunction(b+"_zeroAffine"),a.exportFunction(b+"_double"),a.exportFunction(b+"_doubleAffine"),a.exportFunction(b+"_add"),a.exportFunction(b+"_addMixed"),a.exportFunction(b+"_addAffine"),a.exportFunction(b+"_neg"),a.exportFunction(b+"_negAffine"),a.exportFunction(b+"_sub"),a.exportFunction(b+"_subMixed"),a.exportFunction(b+"_subAffine"),a.exportFunction(b+"_fromMontgomery"),a.exportFunction(b+"_fromMontgomeryAffine"),a.exportFunction(b+"_toMontgomery"),a.exportFunction(b+"_toMontgomeryAffine"),a.exportFunction(b+"_timesScalar"),a.exportFunction(b+"_timesScalarAffine"),a.exportFunction(b+"_normalize"),a.exportFunction(b+"_LEMtoU"),a.exportFunction(b+"_LEMtoC"),a.exportFunction(b+"_UtoLEM"),a.exportFunction(b+"_CtoLEM"),a.exportFunction(b+"_batchLEMtoU"),a.exportFunction(b+"_batchLEMtoC"),a.exportFunction(b+"_batchUtoLEM"),a.exportFunction(b+"_batchCtoLEM"),a.exportFunction(b+"_toAffine"),a.exportFunction(b+"_toJacobian"),a.exportFunction(b+"_batchToAffine"),a.exportFunction(b+"_batchToJacobian"),a.exportFunction(b+"_inCurve"),a.exportFunction(b+"_inCurveAffine"),b}},5967:(a,b,c)=>{let d=c(4246),e=c(760),f=c(2239),g=c(2123),h=c(7594),i=c(5939),j=c(6340),k=c(2763),l=c(9142),m=c(905),{bitLength:n,isOdd:o,isNegative:p}=c(5856);a.exports=function(a,b){let c,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a$,a_,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b$,b_,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO=b||"bls12381";if(a.modules[cO])return cO;let cP=Math.floor((n(0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn-1n)-1)/64)+1,cQ=8*cP,cR=2*cQ,cS=12*cQ,cT=Math.floor((n(0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001n-1n)-1)/64)+1,cU=8*cT,cV=a.alloc(d.bigInt2BytesLE(0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001n,cU)),cW=e(a,0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn,"f1m","intq");f(a,0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001n,"fr","frm","intr");let cX=a.alloc(d.bigInt2BytesLE(c1(4n),cQ)),cY=i(a,"g1m","f1m",cX);j(a,"frm","frm","frm","frm_mul"),k(a,"pol","frm"),l(a,"qap","frm");let cZ=g(a,"f1m_neg","f2m","f1m"),c$=a.alloc([...d.bigInt2BytesLE(c1(4n),cQ),...d.bigInt2BytesLE(c1(4n),cQ)]),c_=i(a,"g2m","f2m",c$);function c0(b,c){let d=a.addFunction(b);d.addParam("pG","i32"),d.addParam("pFr","i32"),d.addParam("pr","i32");let e=d.getCodeBuilder(),f=e.i32_const(a.alloc(cU));d.addCode(e.call("frm_fromMontgomery",e.getLocal("pFr"),f),e.call(c,e.getLocal("pG"),f,e.i32_const(cU),e.getLocal("pr"))),a.exportFunction(b)}function c1(a){return BigInt(a)*(1n<<BigInt(8*cQ))%0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn}c0("g1m_timesFr","g1m_timesScalar"),j(a,"g1m","g1m","frm","g1m_timesFr"),c0("g2m_timesFr","g2m_timesScalar"),j(a,"g2m","g2m","frm","g2m_timesFr"),c0("g1m_timesFrAffine","g1m_timesScalarAffine"),c0("g2m_timesFrAffine","g2m_timesScalarAffine"),m(a,"frm_batchApplyKey","fmr","frm",cU,cU,cU,"frm_mul"),m(a,"g1m_batchApplyKey","g1m","frm",3*cQ,3*cQ,cU,"g1m_timesFr"),m(a,"g1m_batchApplyKeyMixed","g1m","frm",2*cQ,3*cQ,cU,"g1m_timesFrAffine"),m(a,"g2m_batchApplyKey","g2m","frm",2*cQ*3,3*cQ*2,cU,"g2m_timesFr"),m(a,"g2m_batchApplyKeyMixed","g2m","frm",2*cQ*2,3*cQ*2,cU,"g2m_timesFrAffine");let c2=a.alloc([...d.bigInt2BytesLE(c1(0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bbn),cQ),...d.bigInt2BytesLE(c1(0x8b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1n),cQ),...d.bigInt2BytesLE(c1(1n),cQ)]),c3=a.alloc([...d.bigInt2BytesLE(c1(0n),cQ),...d.bigInt2BytesLE(c1(1n),cQ),...d.bigInt2BytesLE(c1(0n),cQ)]),c4=[[0x24aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8n,0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7en],[0xce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801n,0x606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79ben],[1n,0n]],c5=a.alloc([...d.bigInt2BytesLE(c1(c4[0][0]),cQ),...d.bigInt2BytesLE(c1(c4[0][1]),cQ),...d.bigInt2BytesLE(c1(c4[1][0]),cQ),...d.bigInt2BytesLE(c1(c4[1][1]),cQ),...d.bigInt2BytesLE(c1(c4[2][0]),cQ),...d.bigInt2BytesLE(c1(c4[2][1]),cQ)]),c6=[[0n,0n],[1n,0n],[0n,0n]],c7=a.alloc([...d.bigInt2BytesLE(c1(c6[0][0]),cQ),...d.bigInt2BytesLE(c1(c6[0][1]),cQ),...d.bigInt2BytesLE(c1(c6[1][0]),cQ),...d.bigInt2BytesLE(c1(c6[1][1]),cQ),...d.bigInt2BytesLE(c1(c6[2][0]),cQ),...d.bigInt2BytesLE(c1(c6[2][1]),cQ)]),c8=a.alloc([...d.bigInt2BytesLE(c1(1n),cQ),...d.bigInt2BytesLE(c1(0n),cQ),...d.bigInt2BytesLE(c1(0n),cQ),...d.bigInt2BytesLE(c1(0n),cQ),...d.bigInt2BytesLE(c1(0n),cQ),...d.bigInt2BytesLE(c1(0n),cQ),...d.bigInt2BytesLE(c1(0n),cQ),...d.bigInt2BytesLE(c1(0n),cQ),...d.bigInt2BytesLE(c1(0n),cQ),...d.bigInt2BytesLE(c1(0n),cQ),...d.bigInt2BytesLE(c1(0n),cQ),...d.bigInt2BytesLE(c1(0n),cQ)]),c9=a.alloc([...d.bigInt2BytesLE(c1(1n),cQ),...d.bigInt2BytesLE(c1(1n),cQ)]);(c=a.addFunction(cZ+"_mulNR")).addParam("x","i32"),c.addParam("pr","i32"),r=(q=c.getCodeBuilder()).i32_const(a.alloc(cQ)),s=q.getLocal("x"),t=q.i32_add(q.getLocal("x"),q.i32_const(cQ)),u=q.getLocal("pr"),v=q.i32_add(q.getLocal("pr"),q.i32_const(cQ)),c.addCode(q.call(cW+"_copy",s,r),q.call(cW+"_sub",s,t,u),q.call(cW+"_add",r,t,v));let da=h(a,cZ+"_mulNR","f6m","f2m");(w=a.addFunction(da+"_mulNR")).addParam("x","i32"),w.addParam("pr","i32"),y=(x=w.getCodeBuilder()).i32_const(a.alloc(2*cQ)),w.addCode(x.call(cZ+"_copy",x.getLocal("x"),y),x.call(cZ+"_mulNR",x.i32_add(x.getLocal("x"),x.i32_const(4*cQ)),x.getLocal("pr")),x.call(cZ+"_copy",x.i32_add(x.getLocal("x"),x.i32_const(2*cQ)),x.i32_add(x.getLocal("pr"),x.i32_const(4*cQ))),x.call(cZ+"_copy",y,x.i32_add(x.getLocal("pr"),x.i32_const(2*cQ))));let db=g(a,da+"_mulNR","ftm",da),dc=function(a){let b=0xd201000000010000n,c=[];for(;b>0n;)o(b)?c.push(1):c.push(0),b>>=1n;return c}(0xd201000000010000n),dd=a.alloc(dc),de=3*cR,df=dc.length-1,dg=dc.reduce((a,b)=>a+ +(0!=b),0),dh=6*cQ,di=3*cQ*2+(dg+df+1)*de;a.modules[cO]={n64q:cP,n64r:cT,n8q:cQ,n8r:cU,pG1gen:c2,pG1zero:c3,pG1b:cX,pG2gen:c5,pG2zero:c7,pG2b:c$,pq:a.modules.f1m.pq,pr:cV,pOneT:c8,r:0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001n,q:0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn,prePSize:dh,preQSize:di},(z=a.addFunction(da+"_mul1")).addParam("pA","i32"),z.addParam("pC1","i32"),z.addParam("pR","i32"),B=(A=z.getCodeBuilder()).getLocal("pA"),C=A.i32_add(A.getLocal("pA"),A.i32_const(2*cQ)),D=A.i32_add(A.getLocal("pA"),A.i32_const(4*cQ)),E=A.getLocal("pC1"),F=A.getLocal("pR"),G=A.i32_add(A.getLocal("pR"),A.i32_const(2*cQ)),H=A.i32_add(A.getLocal("pR"),A.i32_const(4*cQ)),I=A.i32_const(a.alloc(2*cQ)),J=A.i32_const(a.alloc(2*cQ)),z.addCode(A.call(cZ+"_add",B,C,I),A.call(cZ+"_add",C,D,J),A.call(cZ+"_mul",C,E,H),A.call(cZ+"_mul",J,E,F),A.call(cZ+"_sub",F,H,F),A.call(cZ+"_mulNR",F,F),A.call(cZ+"_mul",I,E,G),A.call(cZ+"_sub",G,H,G)),(K=a.addFunction(da+"_mul01")).addParam("pA","i32"),K.addParam("pC0","i32"),K.addParam("pC1","i32"),K.addParam("pR","i32"),M=(L=K.getCodeBuilder()).getLocal("pA"),N=L.i32_add(L.getLocal("pA"),L.i32_const(2*cQ)),O=L.i32_add(L.getLocal("pA"),L.i32_const(4*cQ)),P=L.getLocal("pC0"),Q=L.getLocal("pC1"),R=L.getLocal("pR"),S=L.i32_add(L.getLocal("pR"),L.i32_const(2*cQ)),T=L.i32_add(L.getLocal("pR"),L.i32_const(4*cQ)),U=L.i32_const(a.alloc(2*cQ)),V=L.i32_const(a.alloc(2*cQ)),W=L.i32_const(a.alloc(2*cQ)),X=L.i32_const(a.alloc(2*cQ)),K.addCode(L.call(cZ+"_mul",M,P,U),L.call(cZ+"_mul",N,Q,V),L.call(cZ+"_add",M,N,W),L.call(cZ+"_add",M,O,X),L.call(cZ+"_add",N,O,R),L.call(cZ+"_mul",R,Q,R),L.call(cZ+"_sub",R,V,R),L.call(cZ+"_mulNR",R,R),L.call(cZ+"_add",R,U,R),L.call(cZ+"_add",P,Q,S),L.call(cZ+"_mul",S,W,S),L.call(cZ+"_sub",S,U,S),L.call(cZ+"_sub",S,V,S),L.call(cZ+"_mul",X,P,T),L.call(cZ+"_sub",T,U,T),L.call(cZ+"_add",T,V,T)),(Y=a.addFunction(db+"_mul014")).addParam("pA","i32"),Y.addParam("pC0","i32"),Y.addParam("pC1","i32"),Y.addParam("pC4","i32"),Y.addParam("pR","i32"),$=(Z=Y.getCodeBuilder()).getLocal("pA"),_=Z.i32_add(Z.getLocal("pA"),Z.i32_const(6*cQ)),aa=Z.getLocal("pC0"),ab=Z.getLocal("pC1"),ac=Z.getLocal("pC4"),ad=Z.i32_const(a.alloc(6*cQ)),ae=Z.i32_const(a.alloc(6*cQ)),af=Z.i32_const(a.alloc(2*cQ)),ag=Z.getLocal("pR"),ah=Z.i32_add(Z.getLocal("pR"),Z.i32_const(6*cQ)),Y.addCode(Z.call(da+"_mul01",$,aa,ab,ad),Z.call(da+"_mul1",_,ac,ae),Z.call(cZ+"_add",ab,ac,af),Z.call(da+"_add",_,$,ah),Z.call(da+"_mul01",ah,aa,af,ah),Z.call(da+"_sub",ah,ad,ah),Z.call(da+"_sub",ah,ae,ah),Z.call(da+"_copy",ae,ag),Z.call(da+"_mulNR",ag,ag),Z.call(da+"_add",ag,ad,ag)),(ai=a.addFunction(cO+"_ell")).addParam("pP","i32"),ai.addParam("pCoefs","i32"),ai.addParam("pF","i32"),ak=(aj=ai.getCodeBuilder()).getLocal("pP"),al=aj.i32_add(aj.getLocal("pP"),aj.i32_const(cQ)),am=aj.getLocal("pF"),an=aj.getLocal("pCoefs"),ao=aj.i32_add(aj.getLocal("pCoefs"),aj.i32_const(cQ)),ap=aj.i32_add(aj.getLocal("pCoefs"),aj.i32_const(2*cQ)),aq=aj.i32_add(aj.getLocal("pCoefs"),aj.i32_const(3*cQ)),ar=aj.i32_add(aj.getLocal("pCoefs"),aj.i32_const(4*cQ)),as=a.alloc(2*cQ),at=aj.i32_const(as),au=aj.i32_const(as),av=aj.i32_const(as+cQ),aw=a.alloc(2*cQ),ax=aj.i32_const(aw),ay=aj.i32_const(aw),az=aj.i32_const(aw+cQ),ai.addCode(aj.call(cW+"_mul",an,al,au),aj.call(cW+"_mul",ao,al,av),aj.call(cW+"_mul",ap,ak,ay),aj.call(cW+"_mul",aq,ak,az),aj.call(db+"_mul014",am,ar,ax,at,am));let dj=a.alloc(dh),dk=a.alloc(di);for(let b=0;b<10;b++)!function(b){let c=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0x1904d3bf02bb0667c231beb4202c0d1f0fd603fd3cbd5f4f7b2443d784bab9c4f67ea53d63e7813d8d0775ed92235fb8n,0xfc3e2b36c4e03288e9e902231f9fb854a14787b6c7b36fec0c8ec971f63c5f282d5ac14d6c7ec22cf78a126ddc4af3n],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffeffffn,0n],[0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2n,0x6af0e0437ff400b6831e36d6bd17ffe48395dabc2d3435e77f76e17009241c5ee67992f72ec05f4c81084fbede3cc09n],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen,0n],[0x144e4211384586c16bd3ad4afa99cc9170df3560e77982d0db45f3536814f0bd5871c1908bd478cd1ee605167ff82995n,0x5b2cfd9013a5fd8df47fa6b48b1e045f39816240c0b8fee8beadf4d8e9c0566c63a3e6e257f87329b18fae980078116n],[0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaaan,0n],[0xfc3e2b36c4e03288e9e902231f9fb854a14787b6c7b36fec0c8ec971f63c5f282d5ac14d6c7ec22cf78a126ddc4af3n,0x1904d3bf02bb0667c231beb4202c0d1f0fd603fd3cbd5f4f7b2443d784bab9c4f67ea53d63e7813d8d0775ed92235fb8n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,0n],[0x6af0e0437ff400b6831e36d6bd17ffe48395dabc2d3435e77f76e17009241c5ee67992f72ec05f4c81084fbede3cc09n,0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaadn,0n],[0x5b2cfd9013a5fd8df47fa6b48b1e045f39816240c0b8fee8beadf4d8e9c0566c63a3e6e257f87329b18fae980078116n,0x144e4211384586c16bd3ad4afa99cc9170df3560e77982d0db45f3536814f0bd5871c1908bd478cd1ee605167ff82995n]]],e=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0n,0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen,0n],[0n,1n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,0n],[0n,0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen]],[[1n,0n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaadn,0n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,0n],[0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaaan,0n],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen,0n],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffeffffn,0n]]],f=a.addFunction(db+"_frobeniusMap"+b);f.addParam("x","i32"),f.addParam("r","i32");let g=f.getCodeBuilder();for(let h=0;h<6;h++){let i=0==h?g.getLocal("x"):g.i32_add(g.getLocal("x"),g.i32_const(h*cR)),j=g.i32_add(g.getLocal("x"),g.i32_const(h*cR+cQ)),k=0==h?g.getLocal("r"):g.i32_add(g.getLocal("r"),g.i32_const(h*cR)),l=g.i32_add(g.getLocal("r"),g.i32_const(h*cR+cQ)),m=function(a,b){let c=a[0],d=a[1],e=b[0],f=b[1],g=[(c*e-d*f)%0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn,(c*f+d*e)%0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn];return p(g[0])&&(g[0]=g[0]+0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn),g}(c[Math.floor(h/3)][b%12],e[h%3][b%6]),n=a.alloc([...d.bigInt2BytesLE(c1(m[0]),cQ),...d.bigInt2BytesLE(c1(m[1]),cQ)]);b%2==1?f.addCode(g.call(cW+"_copy",i,k),g.call(cW+"_neg",j,l),g.call(cZ+"_mul",k,g.i32_const(n),k)):f.addCode(g.call(cZ+"_mul",i,g.i32_const(n),k))}}(b),a.exportFunction(db+"_frobeniusMap"+b);(aA=a.addFunction(cY+"_inGroupAffine")).addParam("p","i32"),aA.setReturnType("i32"),aC=(aB=aA.getCodeBuilder()).i32_const(a.alloc(d.bigInt2BytesLE(c1(0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn),cQ))),aD=aB.i32_const(a.alloc(d.bigInt2BytesLE(c1(0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen),cQ))),aE=aB.i32_const(a.alloc(d.bigInt2BytesLE((0xd201000000010000n*0xd201000000010000n-1n)/3n,16))),aF=aB.getLocal("p"),aG=aB.i32_add(aB.getLocal("p"),aB.i32_const(cQ)),aH=a.alloc(3*cQ),aI=aB.i32_const(aH),aJ=aB.i32_const(aH),aK=aB.i32_const(aH+cQ),aL=a.alloc(2*cQ),aM=aB.i32_const(aL),aN=aB.i32_const(aL),aO=aB.i32_const(aL+cQ),aA.addCode(aB.if(aB.call(cY+"_isZeroAffine",aB.getLocal("p")),aB.ret(aB.i32_const(1))),aB.if(aB.i32_eqz(aB.call(cY+"_inCurveAffine",aB.getLocal("p"))),aB.ret(aB.i32_const(0))),aB.call(cW+"_mul",aF,aC,aJ),aB.call(cW+"_copy",aG,aK),aB.call(cW+"_mul",aF,aD,aN),aB.call(cW+"_copy",aG,aO),aB.call(cY+"_doubleAffine",aI,aI),aB.call(cY+"_subMixed",aI,aB.getLocal("p"),aI),aB.call(cY+"_subMixed",aI,aM,aI),aB.call(cY+"_timesScalar",aI,aE,aB.i32_const(16),aI),aB.ret(aB.call(cY+"_eqMixed",aI,aM))),(aP=a.addFunction(cY+"_inGroup")).addParam("pIn","i32"),aP.setReturnType("i32"),aR=(aQ=aP.getCodeBuilder()).i32_const(a.alloc(2*cQ)),aP.addCode(aQ.call(cY+"_toAffine",aQ.getLocal("pIn"),aR),aQ.ret(aQ.call(cY+"_inGroupAffine",aR))),(aS=a.addFunction(c_+"_inGroupAffine")).addParam("p","i32"),aS.setReturnType("i32"),aT=aS.getCodeBuilder(),aU=aT.i32_const(a.alloc([...d.bigInt2BytesLE(c1(0xd0088f51cbff34d258dd3db21a5d66bb23ba5c279c2895fb39869507b587b120f55ffff58a9ffffdcff7fffffffd556n),cQ),...d.bigInt2BytesLE(c1(0xd0088f51cbff34d258dd3db21a5d66bb23ba5c279c2895fb39869507b587b120f55ffff58a9ffffdcff7fffffffd555n),cQ)])),aV=aT.i32_const(a.alloc(d.bigInt2BytesLE(c1(0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn),cQ))),aW=aT.i32_const(a.alloc([...d.bigInt2BytesLE(c1(0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2n),cQ),...d.bigInt2BytesLE(c1(0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2n),cQ)])),aX=aT.i32_const(a.alloc(d.bigInt2BytesLE(0xd201000000010000n,8))),aY=aT.getLocal("p"),aZ=aT.i32_add(aT.getLocal("p"),aT.i32_const(cR)),a$=aT.i32_const(a.alloc(cQ)),a_=aT.i32_const(a.alloc(cR)),a0=aT.i32_const(a.alloc(cR)),a1=a.alloc(2*cR),a2=aT.i32_const(a1),a3=aT.i32_const(a1),a4=aT.i32_const(a1),a5=aT.i32_const(a1+cQ),a6=aT.i32_const(a1+cR),a7=aT.i32_const(a1+cR),a8=aT.i32_const(a1+cR+cQ),a9=a.alloc(3*cR),ba=aT.i32_const(a9),bb=aT.i32_const(a9),bc=aT.i32_const(a9),bd=aT.i32_const(a9+cQ),be=aT.i32_const(a9+cR),bf=aT.i32_const(a9+cR),bg=aT.i32_const(a9+cR+cQ),bh=aT.i32_const(a9+2*cR),aS.addCode(aT.if(aT.call(c_+"_isZeroAffine",aT.getLocal("p")),aT.ret(aT.i32_const(1))),aT.if(aT.i32_eqz(aT.call(c_+"_inCurveAffine",aT.getLocal("p"))),aT.ret(aT.i32_const(0))),aT.call(cZ+"_mul",aY,aU,a_),aT.call(cZ+"_mul",aZ,aU,a0),aT.call(cZ+"_mul1",a_,aV,a3),aT.call(cZ+"_neg",a0,a6),aT.call(cZ+"_neg",a_,bb),aT.call(cZ+"_mul",a0,aW,be),aT.call(cW+"_sub",a4,a5,a$),aT.call(cW+"_add",a4,a5,a5),aT.call(cW+"_copy",a$,a4),aT.call(cW+"_sub",a7,a8,a$),aT.call(cW+"_add",a7,a8,a8),aT.call(cW+"_copy",a$,a7),aT.call(cW+"_add",bc,bd,a$),aT.call(cW+"_sub",bc,bd,bd),aT.call(cW+"_copy",a$,bc),aT.call(cW+"_sub",bg,bf,a$),aT.call(cW+"_add",bf,bg,bg),aT.call(cW+"_copy",a$,bf),aT.call(cZ+"_one",bh),aT.call(c_+"_timesScalar",ba,aX,aT.i32_const(8),ba),aT.call(c_+"_addMixed",ba,a2,ba),aT.ret(aT.call(c_+"_eqMixed",ba,aT.getLocal("p")))),(bi=a.addFunction(c_+"_inGroup")).addParam("pIn","i32"),bi.setReturnType("i32"),bk=(bj=bi.getCodeBuilder()).i32_const(a.alloc(2*cR)),bi.addCode(bj.call(c_+"_toAffine",bj.getLocal("pIn"),bk),bj.ret(bj.call(c_+"_inGroupAffine",bk))),(bl=a.addFunction(cO+"_prepAddStep")).addParam("R","i32"),bl.addParam("Q","i32"),bl.addParam("r","i32"),bn=(bm=bl.getCodeBuilder()).getLocal("R"),bo=bm.i32_add(bm.getLocal("R"),bm.i32_const(2*cQ)),bp=bm.i32_add(bm.getLocal("R"),bm.i32_const(4*cQ)),bq=bm.getLocal("Q"),br=bm.i32_add(bm.getLocal("Q"),bm.i32_const(2*cQ)),bs=bm.getLocal("r"),bt=bm.i32_add(bm.getLocal("r"),bm.i32_const(2*cQ)),bu=bm.i32_add(bm.getLocal("r"),bm.i32_const(4*cQ)),bv=bm.i32_const(a.alloc(cR)),bw=bm.i32_const(a.alloc(cR)),bx=bm.i32_const(a.alloc(cR)),by=bm.i32_const(a.alloc(cR)),bz=bm.i32_const(a.alloc(cR)),bA=bm.i32_const(a.alloc(cR)),bB=bm.i32_const(a.alloc(cR)),bC=bm.i32_const(a.alloc(cR)),bD=bm.i32_const(a.alloc(cR)),bE=bm.i32_const(a.alloc(cR)),bF=bm.i32_const(a.alloc(cR)),bl.addCode(bm.call(cZ+"_square",bp,bv),bm.call(cZ+"_square",br,bw),bm.call(cZ+"_mul",bv,bq,by),bm.call(cZ+"_add",br,bp,bt),bm.call(cZ+"_square",bt,bt),bm.call(cZ+"_sub",bt,bw,bt),bm.call(cZ+"_sub",bt,bv,bt),bm.call(cZ+"_mul",bt,bv,bt),bm.call(cZ+"_sub",by,bn,bz),bm.call(cZ+"_square",bz,bA),bm.call(cZ+"_add",bA,bA,bB),bm.call(cZ+"_add",bB,bB,bB),bm.call(cZ+"_mul",bB,bz,bC),bm.call(cZ+"_sub",bt,bo,bD),bm.call(cZ+"_sub",bD,bo,bD),bm.call(cZ+"_mul",bD,bq,bu),bm.call(cZ+"_mul",bB,bn,bE),bm.call(cZ+"_square",bD,bn),bm.call(cZ+"_sub",bn,bC,bn),bm.call(cZ+"_sub",bn,bE,bn),bm.call(cZ+"_sub",bn,bE,bn),bm.call(cZ+"_add",bp,bz,bp),bm.call(cZ+"_square",bp,bp),bm.call(cZ+"_sub",bp,bv,bp),bm.call(cZ+"_sub",bp,bA,bp),bm.call(cZ+"_add",br,bp,bs),bm.call(cZ+"_sub",bE,bn,bF),bm.call(cZ+"_mul",bF,bD,bF),bm.call(cZ+"_mul",bo,bC,by),bm.call(cZ+"_add",by,by,by),bm.call(cZ+"_sub",bF,by,bo),bm.call(cZ+"_square",bs,bs),bm.call(cZ+"_sub",bs,bw,bs),bm.call(cZ+"_square",bp,bx),bm.call(cZ+"_sub",bs,bx,bs),bm.call(cZ+"_add",bu,bu,bu),bm.call(cZ+"_sub",bu,bs,bu),bm.call(cZ+"_add",bp,bp,bs),bm.call(cZ+"_neg",bD,bD),bm.call(cZ+"_add",bD,bD,bt)),(bG=a.addFunction(cO+"_prepDblStep")).addParam("R","i32"),bG.addParam("r","i32"),bI=(bH=bG.getCodeBuilder()).getLocal("R"),bJ=bH.i32_add(bH.getLocal("R"),bH.i32_const(2*cQ)),bK=bH.i32_add(bH.getLocal("R"),bH.i32_const(4*cQ)),bL=bH.getLocal("r"),bM=bH.i32_add(bH.getLocal("r"),bH.i32_const(2*cQ)),bN=bH.i32_add(bH.getLocal("r"),bH.i32_const(4*cQ)),bO=bH.i32_const(a.alloc(cR)),bP=bH.i32_const(a.alloc(cR)),bQ=bH.i32_const(a.alloc(cR)),bR=bH.i32_const(a.alloc(cR)),bS=bH.i32_const(a.alloc(cR)),bG.addCode(bH.call(cZ+"_square",bI,bL),bH.call(cZ+"_square",bJ,bP),bH.call(cZ+"_square",bP,bQ),bH.call(cZ+"_add",bP,bI,bM),bH.call(cZ+"_square",bM,bM),bH.call(cZ+"_sub",bM,bL,bM),bH.call(cZ+"_sub",bM,bQ,bM),bH.call(cZ+"_add",bM,bM,bM),bH.call(cZ+"_add",bL,bL,bR),bH.call(cZ+"_add",bR,bL,bR),bH.call(cZ+"_add",bI,bR,bN),bH.call(cZ+"_square",bR,bS),bH.call(cZ+"_square",bK,bO),bH.call(cZ+"_sub",bS,bM,bI),bH.call(cZ+"_sub",bI,bM,bI),bH.call(cZ+"_add",bK,bJ,bK),bH.call(cZ+"_square",bK,bK),bH.call(cZ+"_sub",bK,bP,bK),bH.call(cZ+"_sub",bK,bO,bK),bH.call(cZ+"_sub",bM,bI,bJ),bH.call(cZ+"_mul",bJ,bR,bJ),bH.call(cZ+"_add",bQ,bQ,bQ),bH.call(cZ+"_add",bQ,bQ,bQ),bH.call(cZ+"_add",bQ,bQ,bQ),bH.call(cZ+"_sub",bJ,bQ,bJ),bH.call(cZ+"_mul",bR,bO,bM),bH.call(cZ+"_add",bM,bM,bM),bH.call(cZ+"_neg",bM,bM),bH.call(cZ+"_square",bN,bN),bH.call(cZ+"_sub",bN,bL,bN),bH.call(cZ+"_sub",bN,bS,bN),bH.call(cZ+"_add",bP,bP,bP),bH.call(cZ+"_add",bP,bP,bP),bH.call(cZ+"_sub",bN,bP,bN),bH.call(cZ+"_mul",bK,bO,bL),bH.call(cZ+"_add",bL,bL,bL)),(bT=a.addFunction(cO+"_prepareG1")).addParam("pP","i32"),bT.addParam("ppreP","i32"),bU=bT.getCodeBuilder(),bT.addCode(bU.call(cY+"_normalize",bU.getLocal("pP"),bU.getLocal("ppreP"))),(bV=a.addFunction(cO+"_prepareG2")).addParam("pQ","i32"),bV.addParam("ppreQ","i32"),bV.addLocal("pCoef","i32"),bV.addLocal("i","i32"),bX=(bW=bV.getCodeBuilder()).getLocal("pQ"),bY=a.alloc(3*cR),bZ=bW.i32_const(bY),b$=bW.getLocal("ppreQ"),bV.addCode(bW.call(c_+"_normalize",bX,b$),bW.if(bW.call(c_+"_isZero",b$),bW.ret([])),bW.call(c_+"_copy",b$,bZ),bW.setLocal("pCoef",bW.i32_add(bW.getLocal("ppreQ"),bW.i32_const(3*cR)))),bV.addCode(bW.setLocal("i",bW.i32_const(dc.length-2)),bW.block(bW.loop(bW.call(cO+"_prepDblStep",bZ,bW.getLocal("pCoef")),bW.setLocal("pCoef",bW.i32_add(bW.getLocal("pCoef"),bW.i32_const(de))),bW.if(bW.i32_load8_s(bW.getLocal("i"),dd),[...bW.call(cO+"_prepAddStep",bZ,b$,bW.getLocal("pCoef")),...bW.setLocal("pCoef",bW.i32_add(bW.getLocal("pCoef"),bW.i32_const(de)))]),bW.br_if(1,bW.i32_eqz(bW.getLocal("i"))),bW.setLocal("i",bW.i32_sub(bW.getLocal("i"),bW.i32_const(1))),bW.br(0)))),(b_=a.addFunction(cO+"_millerLoop")).addParam("ppreP","i32"),b_.addParam("ppreQ","i32"),b_.addParam("r","i32"),b_.addLocal("pCoef","i32"),b_.addLocal("i","i32"),b1=(b0=b_.getCodeBuilder()).getLocal("ppreP"),b2=b0.getLocal("pCoef"),b3=b0.getLocal("r"),b_.addCode(b0.call(db+"_one",b3),b0.if(b0.call(cY+"_isZero",b1),b0.ret([])),b0.if(b0.call(cY+"_isZero",b0.getLocal("ppreQ")),b0.ret([])),b0.setLocal("pCoef",b0.i32_add(b0.getLocal("ppreQ"),b0.i32_const(3*cR))),b0.setLocal("i",b0.i32_const(dc.length-2)),b0.block(b0.loop(b0.call(cO+"_ell",b1,b2,b3),b0.setLocal("pCoef",b0.i32_add(b0.getLocal("pCoef"),b0.i32_const(de))),b0.if(b0.i32_load8_s(b0.getLocal("i"),dd),[...b0.call(cO+"_ell",b1,b2,b3),...b0.setLocal("pCoef",b0.i32_add(b0.getLocal("pCoef"),b0.i32_const(de)))]),b0.call(db+"_square",b3,b3),b0.br_if(1,b0.i32_eq(b0.getLocal("i"),b0.i32_const(1))),b0.setLocal("i",b0.i32_sub(b0.getLocal("i"),b0.i32_const(1))),b0.br(0))),b0.call(cO+"_ell",b1,b2,b3)),b_.addCode(b0.call(db+"_conjugate",b3,b3)),(b4=a.addFunction(cO+"_finalExponentiationOld")).addParam("x","i32"),b4.addParam("r","i32"),b5=a.alloc(d.bigInt2BytesLE(0x2ee1db5dcc825b7e1bda9c0496a1c0a89ee0193d4977b3f7d4507d07363baa13f8d14a917848517badc3a43d1073776ab353f2c30698e8cc7deada9c0aadff5e9cfee9a074e43b9a660835cc872ee83ff3a0f0f1c0ad0d6106feaf4e347aa68ad49466fa927e7bb9375331807a0dce2630d9aa4b113f414386b0e8819328148978e2b0dd39099b86e1ab656d2670d93e4d7acdd350da5359bc73ab61a0c5bf24c374693c49f570bcd2b01f3077ffb10bf24dde41064837f27611212596bc293c8d4c01f25118790f4684d0b9c40a68eb74bb22a40ee7169cdc1041296532fef459f12438dfc8e2886ef965e61a474c5c85b0129127a1b5ad0463434724538411d1676a53b5a62eb34c05739334f46c02c3f0bd0c55d3109cd15948d0a1fad20044ce6ad4c6bec3ec03ef19592004cedd556952c6d8823b19dadd7c2498345c6e5308f1c511291097db60b1749bf9b71a9f9e0100418a3ef0bc627751bbd81367066bca6a4c1b6dcfc5cceb73fc56947a403577dfa9e13c24ea820b09c1d9f7c31759c3635de3f7a3639991708e88adce88177456c49637fd7961be1a4c7e79fb02faa732e2f3ec2bea83d196283313492caa9d4aff1c910e9622d2a73f62537f2701aaef6539314043f7bbce5b78c7869aeb2181a67e49eeed2161daf3f881bd88592d767f67c4717489119226c2f011d4cab803e9d71650a6f80698e2f8491d12191a04406fbc8fbd5f48925f98630e68bfb24c0bcb9b55df57510n,544)),b6=b4.getCodeBuilder(),b4.addCode(b6.call(db+"_exp",b6.getLocal("x"),b6.i32_const(b5),b6.i32_const(544),b6.getLocal("r"))),(b7=a.addFunction(cO+"__cyclotomicSquare")).addParam("x","i32"),b7.addParam("r","i32"),b9=(b8=b7.getCodeBuilder()).getLocal("x"),ca=b8.i32_add(b8.getLocal("x"),b8.i32_const(cR)),cb=b8.i32_add(b8.getLocal("x"),b8.i32_const(2*cR)),cc=b8.i32_add(b8.getLocal("x"),b8.i32_const(3*cR)),cd=b8.i32_add(b8.getLocal("x"),b8.i32_const(4*cR)),ce=b8.i32_add(b8.getLocal("x"),b8.i32_const(5*cR)),cf=b8.getLocal("r"),cg=b8.i32_add(b8.getLocal("r"),b8.i32_const(cR)),ch=b8.i32_add(b8.getLocal("r"),b8.i32_const(2*cR)),ci=b8.i32_add(b8.getLocal("r"),b8.i32_const(3*cR)),cj=b8.i32_add(b8.getLocal("r"),b8.i32_const(4*cR)),ck=b8.i32_add(b8.getLocal("r"),b8.i32_const(5*cR)),cl=b8.i32_const(a.alloc(cR)),cm=b8.i32_const(a.alloc(cR)),cn=b8.i32_const(a.alloc(cR)),co=b8.i32_const(a.alloc(cR)),cp=b8.i32_const(a.alloc(cR)),cq=b8.i32_const(a.alloc(cR)),cr=b8.i32_const(a.alloc(cR)),cs=b8.i32_const(a.alloc(cR)),b7.addCode(b8.call(cZ+"_mul",b9,cd,cr),b8.call(cZ+"_mulNR",cd,cl),b8.call(cZ+"_add",b9,cl,cl),b8.call(cZ+"_add",b9,cd,cs),b8.call(cZ+"_mul",cs,cl,cl),b8.call(cZ+"_mulNR",cr,cs),b8.call(cZ+"_add",cr,cs,cs),b8.call(cZ+"_sub",cl,cs,cl),b8.call(cZ+"_add",cr,cr,cm),b8.call(cZ+"_mul",cc,cb,cr),b8.call(cZ+"_mulNR",cb,cn),b8.call(cZ+"_add",cc,cn,cn),b8.call(cZ+"_add",cc,cb,cs),b8.call(cZ+"_mul",cs,cn,cn),b8.call(cZ+"_mulNR",cr,cs),b8.call(cZ+"_add",cr,cs,cs),b8.call(cZ+"_sub",cn,cs,cn),b8.call(cZ+"_add",cr,cr,co),b8.call(cZ+"_mul",ca,ce,cr),b8.call(cZ+"_mulNR",ce,cp),b8.call(cZ+"_add",ca,cp,cp),b8.call(cZ+"_add",ca,ce,cs),b8.call(cZ+"_mul",cs,cp,cp),b8.call(cZ+"_mulNR",cr,cs),b8.call(cZ+"_add",cr,cs,cs),b8.call(cZ+"_sub",cp,cs,cp),b8.call(cZ+"_add",cr,cr,cq),b8.call(cZ+"_sub",cl,b9,cf),b8.call(cZ+"_add",cf,cf,cf),b8.call(cZ+"_add",cl,cf,cf),b8.call(cZ+"_add",cm,cd,cj),b8.call(cZ+"_add",cj,cj,cj),b8.call(cZ+"_add",cm,cj,cj),b8.call(cZ+"_mul",cq,b8.i32_const(c9),cs),b8.call(cZ+"_add",cs,cc,ci),b8.call(cZ+"_add",ci,ci,ci),b8.call(cZ+"_add",cs,ci,ci),b8.call(cZ+"_sub",cp,cb,ch),b8.call(cZ+"_add",ch,ch,ch),b8.call(cZ+"_add",cp,ch,ch),b8.call(cZ+"_sub",cn,ca,cg),b8.call(cZ+"_add",cg,cg,cg),b8.call(cZ+"_add",cn,cg,cg),b8.call(cZ+"_add",co,ce,ck),b8.call(cZ+"_add",ck,ck,ck),b8.call(cZ+"_add",co,ck,ck)),ct=(function(a){let b=0xd201000000010000n,c=[];for(;b>0n;){if(o(b)){let a=2-Number(b%4n);c.push(a),b-=BigInt(a)}else c.push(0);b>>=1n}return c})(0xd201000000010000n).map(a=>-1==a?255:a),cu=a.alloc(ct),(cv=a.addFunction(cO+"__cyclotomicExp_w0")).addParam("x","i32"),cv.addParam("r","i32"),cv.addLocal("bit","i32"),cv.addLocal("i","i32"),cx=(cw=cv.getCodeBuilder()).getLocal("x"),cy=cw.getLocal("r"),cz=cw.i32_const(a.alloc(cS)),cv.addCode(cw.call(db+"_conjugate",cx,cz),cw.call(db+"_one",cy),cw.if(cw.teeLocal("bit",cw.i32_load8_s(cw.i32_const(ct.length-1),cu)),cw.if(cw.i32_eq(cw.getLocal("bit"),cw.i32_const(1)),cw.call(db+"_mul",cy,cx,cy),cw.call(db+"_mul",cy,cz,cy))),cw.setLocal("i",cw.i32_const(ct.length-2)),cw.block(cw.loop(cw.call(cO+"__cyclotomicSquare",cy,cy),cw.if(cw.teeLocal("bit",cw.i32_load8_s(cw.getLocal("i"),cu)),cw.if(cw.i32_eq(cw.getLocal("bit"),cw.i32_const(1)),cw.call(db+"_mul",cy,cx,cy),cw.call(db+"_mul",cy,cz,cy))),cw.br_if(1,cw.i32_eqz(cw.getLocal("i"))),cw.setLocal("i",cw.i32_sub(cw.getLocal("i"),cw.i32_const(1))),cw.br(0)))),cv.addCode(cw.call(db+"_conjugate",cy,cy)),(cA=a.addFunction(cO+"_finalExponentiation")).addParam("x","i32"),cA.addParam("r","i32"),cC=(cB=cA.getCodeBuilder()).getLocal("x"),cD=cB.getLocal("r"),cE=cB.i32_const(a.alloc(cS)),cF=cB.i32_const(a.alloc(cS)),cG=cB.i32_const(a.alloc(cS)),cH=cB.i32_const(a.alloc(cS)),cI=cB.i32_const(a.alloc(cS)),cJ=cB.i32_const(a.alloc(cS)),cK=cB.i32_const(a.alloc(cS)),cA.addCode(cB.call(db+"_frobeniusMap6",cC,cE),cB.call(db+"_inverse",cC,cF),cB.call(db+"_mul",cE,cF,cG),cB.call(db+"_copy",cG,cF),cB.call(db+"_frobeniusMap2",cG,cG),cB.call(db+"_mul",cG,cF,cG),cB.call(cO+"__cyclotomicSquare",cG,cF),cB.call(db+"_conjugate",cF,cF),cB.call(cO+"__cyclotomicExp_w0",cG,cH),cB.call(cO+"__cyclotomicSquare",cH,cI),cB.call(db+"_mul",cF,cH,cJ),cB.call(cO+"__cyclotomicExp_w0",cJ,cF),cB.call(cO+"__cyclotomicExp_w0",cF,cE),cB.call(cO+"__cyclotomicExp_w0",cE,cK),cB.call(db+"_mul",cK,cI,cK),cB.call(cO+"__cyclotomicExp_w0",cK,cI),cB.call(db+"_conjugate",cJ,cJ),cB.call(db+"_mul",cI,cJ,cI),cB.call(db+"_mul",cI,cG,cI),cB.call(db+"_conjugate",cG,cJ),cB.call(db+"_mul",cF,cG,cF),cB.call(db+"_frobeniusMap3",cF,cF),cB.call(db+"_mul",cK,cJ,cK),cB.call(db+"_frobeniusMap1",cK,cK),cB.call(db+"_mul",cH,cE,cH),cB.call(db+"_frobeniusMap2",cH,cH),cB.call(db+"_mul",cH,cF,cH),cB.call(db+"_mul",cH,cK,cH),cB.call(db+"_mul",cH,cI,cD));for(let b=1;b<=5;b++)!function(b){let c=a.addFunction(cO+"_pairingEq"+b);for(let a=0;a<b;a++)c.addParam("p_"+a,"i32"),c.addParam("q_"+a,"i32");c.addParam("c","i32"),c.setReturnType("i32");let d=c.getCodeBuilder(),e=d.i32_const(a.alloc(cS)),f=d.i32_const(a.alloc(cS));c.addCode(d.call(db+"_one",e));for(let a=0;a<b;a++)c.addCode(d.call(cO+"_prepareG1",d.getLocal("p_"+a),d.i32_const(dj))),c.addCode(d.call(cO+"_prepareG2",d.getLocal("q_"+a),d.i32_const(dk))),c.addCode(d.if(d.i32_eqz(d.call(cY+"_inGroupAffine",d.i32_const(dj))),d.ret(d.i32_const(0))),d.if(d.i32_eqz(d.call(c_+"_inGroupAffine",d.i32_const(dk))),d.ret(d.i32_const(0)))),c.addCode(d.call(cO+"_millerLoop",d.i32_const(dj),d.i32_const(dk),f)),c.addCode(d.call(db+"_mul",e,f,e));c.addCode(d.call(cO+"_finalExponentiation",e,e)),c.addCode(d.call(db+"_eq",e,d.getLocal("c")))}(b),a.exportFunction(cO+"_pairingEq"+b);(cL=a.addFunction(cO+"_pairing")).addParam("p","i32"),cL.addParam("q","i32"),cL.addParam("r","i32"),cN=(cM=cL.getCodeBuilder()).i32_const(a.alloc(cS)),cL.addCode(cM.call(cO+"_prepareG1",cM.getLocal("p"),cM.i32_const(dj))),cL.addCode(cM.call(cO+"_prepareG2",cM.getLocal("q"),cM.i32_const(dk))),cL.addCode(cM.call(cO+"_millerLoop",cM.i32_const(dj),cM.i32_const(dk),cN)),cL.addCode(cM.call(cO+"_finalExponentiation",cN,cM.getLocal("r"))),a.exportFunction(cO+"_pairing"),a.exportFunction(cO+"_prepareG1"),a.exportFunction(cO+"_prepareG2"),a.exportFunction(cO+"_millerLoop"),a.exportFunction(cO+"_finalExponentiation"),a.exportFunction(cO+"_finalExponentiationOld"),a.exportFunction(cO+"__cyclotomicSquare"),a.exportFunction(cO+"__cyclotomicExp_w0"),a.exportFunction(da+"_mul1"),a.exportFunction(da+"_mul01"),a.exportFunction(db+"_mul014"),a.exportFunction(cY+"_inGroupAffine"),a.exportFunction(cY+"_inGroup"),a.exportFunction(c_+"_inGroupAffine"),a.exportFunction(c_+"_inGroup")}},6001:a=>{a.exports=function(a,b,c,d,e,f,g,h){let i=a.addFunction(b);i.addParam("base","i32"),i.addParam("scalar","i32"),i.addParam("scalarLength","i32"),i.addParam("r","i32"),i.addLocal("old0","i32"),i.addLocal("nbits","i32"),i.addLocal("i","i32"),i.addLocal("last","i32"),i.addLocal("cur","i32"),i.addLocal("carry","i32"),i.addLocal("p","i32");let j=i.getCodeBuilder(),k=j.i32_const(a.alloc(c));function l(a){return j.i32_and(j.i32_shr_u(j.i32_load(j.i32_add(j.getLocal("scalar"),j.i32_and(j.i32_shr_u(a,j.i32_const(3)),j.i32_const(0xfffffffc)))),j.i32_and(a,j.i32_const(31))),j.i32_const(1))}function m(a){return[...j.i32_store8(j.getLocal("p"),j.i32_const(a)),...j.setLocal("p",j.i32_add(j.getLocal("p"),j.i32_const(1)))]}i.addCode(j.if(j.i32_eqz(j.getLocal("scalarLength")),[...j.call(h,j.getLocal("r")),...j.ret([])]),j.setLocal("nbits",j.i32_shl(j.getLocal("scalarLength"),j.i32_const(3))),j.setLocal("old0",j.i32_load(j.i32_const(0))),j.setLocal("p",j.getLocal("old0")),j.i32_store(j.i32_const(0),j.i32_and(j.i32_add(j.i32_add(j.getLocal("old0"),j.i32_const(32)),j.getLocal("nbits")),j.i32_const(0xfffffff8))),j.setLocal("i",j.i32_const(1)),j.setLocal("last",l(j.i32_const(0))),j.setLocal("carry",j.i32_const(0)),j.block(j.loop(j.br_if(1,j.i32_eq(j.getLocal("i"),j.getLocal("nbits"))),j.setLocal("cur",l(j.getLocal("i"))),j.if(j.getLocal("last"),j.if(j.getLocal("cur"),j.if(j.getLocal("carry"),[...j.setLocal("last",j.i32_const(0)),...j.setLocal("carry",j.i32_const(1)),...m(1)],[...j.setLocal("last",j.i32_const(0)),...j.setLocal("carry",j.i32_const(1)),...m(255)]),j.if(j.getLocal("carry"),[...j.setLocal("last",j.i32_const(0)),...j.setLocal("carry",j.i32_const(1)),...m(255)],[...j.setLocal("last",j.i32_const(0)),...j.setLocal("carry",j.i32_const(0)),...m(1)])),j.if(j.getLocal("cur"),j.if(j.getLocal("carry"),[...j.setLocal("last",j.i32_const(0)),...j.setLocal("carry",j.i32_const(1)),...m(0)],[...j.setLocal("last",j.i32_const(1)),...j.setLocal("carry",j.i32_const(0)),...m(0)]),j.if(j.getLocal("carry"),[...j.setLocal("last",j.i32_const(1)),...j.setLocal("carry",j.i32_const(0)),...m(0)],[...j.setLocal("last",j.i32_const(0)),...j.setLocal("carry",j.i32_const(0)),...m(0)]))),j.setLocal("i",j.i32_add(j.getLocal("i"),j.i32_const(1))),j.br(0))),j.if(j.getLocal("last"),j.if(j.getLocal("carry"),[...m(255),...m(0),...m(1)],[...m(1)]),j.if(j.getLocal("carry"),[...m(0),...m(1)])),j.setLocal("p",j.i32_sub(j.getLocal("p"),j.i32_const(1))),j.call(g,j.getLocal("base"),k),j.call(h,j.getLocal("r")),j.block(j.loop(j.call(e,j.getLocal("r"),j.getLocal("r")),j.setLocal("cur",j.i32_load8_u(j.getLocal("p"))),j.if(j.getLocal("cur"),j.if(j.i32_eq(j.getLocal("cur"),j.i32_const(1)),j.call(d,j.getLocal("r"),k,j.getLocal("r")),j.call(f,j.getLocal("r"),k,j.getLocal("r")))),j.br_if(1,j.i32_eq(j.getLocal("old0"),j.getLocal("p"))),j.setLocal("p",j.i32_sub(j.getLocal("p"),j.i32_const(1))),j.br(0))),j.i32_store(j.i32_const(0),j.getLocal("old0")))}},6340:(a,b,c)=>{let{isOdd:d,modInv:e,modPow:f}=c(5856),g=c(4246);a.exports=function(a,b,c,h,i){let j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa=8*a.modules[h].n64,ab=8*a.modules[c].n64,ac=a.modules[h].q,ad=ac-1n,ae=0;for(;!d(ad);)ae++,ad>>=1n;let af=2n;for(;1n===f(af,ac>>1n,ac);)af+=1n;let ag=Array(ae+1);ag[ae]=f(af,ad,ac);let ah=ae-1;for(;ah>=0;)ag[ah]=f(ag[ah+1],2n,ac),ah--;let ai=[],aj=(1n<<BigInt(8*aa))%ac;for(let a=0;a<ag.length;a++){let b=ag[a]*aj%ac;ai.push(...g.bigInt2BytesLE(b,aa))}let ak=a.alloc(ai),al=Array(ae+1);al[0]=1n;for(let a=1;a<=ae;a++)al[a]=2n*al[a-1];let am=[];for(let a=0;a<=ae;a++){let b=e(al[a],ac)*aj%ac;am.push(...g.bigInt2BytesLE(b,aa))}let an=a.alloc(am),ao=f(af,2n,ac),ap=[],aq=[];for(let a=0;a<=ae;a++){let b=f(ao,2n**BigInt(a),ac),c=e(ac+1n-b,ac);ap.push(...g.bigInt2BytesLE(b*aj%ac,aa)),aq.push(...g.bigInt2BytesLE(c*aj%ac,aa))}let ar=a.alloc(ap),as=a.alloc(aq),at=Array(256);for(let a=0;a<256;a++)at[a]=function(a){let b=0;for(let c=0;c<8;c++)a&1<<c&&(b|=128>>c);return b}(a);let au=a.alloc(at);(j=a.addFunction(b+"__rev")).addParam("x","i32"),j.addParam("bits","i32"),j.setReturnType("i32"),k=j.getCodeBuilder(),j.addCode(k.i32_rotl(k.i32_add(k.i32_add(k.i32_shl(k.i32_load8_u(k.i32_and(k.getLocal("x"),k.i32_const(255)),au,0),k.i32_const(24)),k.i32_shl(k.i32_load8_u(k.i32_and(k.i32_shr_u(k.getLocal("x"),k.i32_const(8)),k.i32_const(255)),au,0),k.i32_const(16))),k.i32_add(k.i32_shl(k.i32_load8_u(k.i32_and(k.i32_shr_u(k.getLocal("x"),k.i32_const(16)),k.i32_const(255)),au,0),k.i32_const(8)),k.i32_load8_u(k.i32_and(k.i32_shr_u(k.getLocal("x"),k.i32_const(24)),k.i32_const(255)),au,0))),k.getLocal("bits"))),(l=a.addFunction(b+"__reversePermutation")).addParam("px","i32"),l.addParam("bits","i32"),l.addLocal("n","i32"),l.addLocal("i","i32"),l.addLocal("ri","i32"),l.addLocal("idx1","i32"),l.addLocal("idx2","i32"),n=(m=l.getCodeBuilder()).i32_const(a.alloc(ab)),l.addCode(m.setLocal("n",m.i32_shl(m.i32_const(1),m.getLocal("bits"))),m.setLocal("i",m.i32_const(0)),m.block(m.loop(m.br_if(1,m.i32_eq(m.getLocal("i"),m.getLocal("n"))),m.setLocal("idx1",m.i32_add(m.getLocal("px"),m.i32_mul(m.getLocal("i"),m.i32_const(ab)))),m.setLocal("ri",m.call(b+"__rev",m.getLocal("i"),m.getLocal("bits"))),m.setLocal("idx2",m.i32_add(m.getLocal("px"),m.i32_mul(m.getLocal("ri"),m.i32_const(ab)))),m.if(m.i32_lt_u(m.getLocal("i"),m.getLocal("ri")),[...m.call(c+"_copy",m.getLocal("idx1"),n),...m.call(c+"_copy",m.getLocal("idx2"),m.getLocal("idx1")),...m.call(c+"_copy",n,m.getLocal("idx2"))]),m.setLocal("i",m.i32_add(m.getLocal("i"),m.i32_const(1))),m.br(0)))),(o=a.addFunction(b+"__fftFinal")).addParam("px","i32"),o.addParam("bits","i32"),o.addParam("reverse","i32"),o.addParam("mulFactor","i32"),o.addLocal("n","i32"),o.addLocal("ndiv2","i32"),o.addLocal("pInv2","i32"),o.addLocal("i","i32"),o.addLocal("mask","i32"),o.addLocal("idx1","i32"),o.addLocal("idx2","i32"),q=(p=o.getCodeBuilder()).i32_const(a.alloc(ab)),o.addCode(p.if(p.i32_and(p.i32_eqz(p.getLocal("reverse")),p.call(h+"_isOne",p.getLocal("mulFactor"))),p.ret([])),p.setLocal("n",p.i32_shl(p.i32_const(1),p.getLocal("bits"))),p.setLocal("mask",p.i32_sub(p.getLocal("n"),p.i32_const(1))),p.setLocal("i",p.i32_const(1)),p.setLocal("ndiv2",p.i32_shr_u(p.getLocal("n"),p.i32_const(1))),p.block(p.loop(p.br_if(1,p.i32_ge_u(p.getLocal("i"),p.getLocal("ndiv2"))),p.setLocal("idx1",p.i32_add(p.getLocal("px"),p.i32_mul(p.getLocal("i"),p.i32_const(ab)))),p.setLocal("idx2",p.i32_add(p.getLocal("px"),p.i32_mul(p.i32_sub(p.getLocal("n"),p.getLocal("i")),p.i32_const(ab)))),p.if(p.getLocal("reverse"),p.if(p.call(h+"_isOne",p.getLocal("mulFactor")),[...p.call(c+"_copy",p.getLocal("idx1"),q),...p.call(c+"_copy",p.getLocal("idx2"),p.getLocal("idx1")),...p.call(c+"_copy",q,p.getLocal("idx2"))],[...p.call(c+"_copy",p.getLocal("idx1"),q),...p.call(i,p.getLocal("idx2"),p.getLocal("mulFactor"),p.getLocal("idx1")),...p.call(i,q,p.getLocal("mulFactor"),p.getLocal("idx2"))]),p.if(p.call(h+"_isOne",p.getLocal("mulFactor")),[],[...p.call(i,p.getLocal("idx1"),p.getLocal("mulFactor"),p.getLocal("idx1")),...p.call(i,p.getLocal("idx2"),p.getLocal("mulFactor"),p.getLocal("idx2"))])),p.setLocal("i",p.i32_add(p.getLocal("i"),p.i32_const(1))),p.br(0))),p.if(p.call(h+"_isOne",p.getLocal("mulFactor")),[],[...p.call(i,p.getLocal("px"),p.getLocal("mulFactor"),p.getLocal("px")),...p.setLocal("idx2",p.i32_add(p.getLocal("px"),p.i32_mul(p.getLocal("ndiv2"),p.i32_const(ab)))),...p.call(i,p.getLocal("idx2"),p.getLocal("mulFactor"),p.getLocal("idx2"))])),(r=a.addFunction(b+"_rawfft")).addParam("px","i32"),r.addParam("bits","i32"),r.addParam("reverse","i32"),r.addParam("mulFactor","i32"),r.addLocal("s","i32"),r.addLocal("k","i32"),r.addLocal("j","i32"),r.addLocal("m","i32"),r.addLocal("mdiv2","i32"),r.addLocal("n","i32"),r.addLocal("pwm","i32"),r.addLocal("idx1","i32"),r.addLocal("idx2","i32"),t=(s=r.getCodeBuilder()).i32_const(a.alloc(aa)),u=s.i32_const(a.alloc(ab)),v=s.i32_const(a.alloc(ab)),r.addCode(s.call(b+"__reversePermutation",s.getLocal("px"),s.getLocal("bits")),s.setLocal("n",s.i32_shl(s.i32_const(1),s.getLocal("bits"))),s.setLocal("s",s.i32_const(1)),s.block(s.loop(s.br_if(1,s.i32_gt_u(s.getLocal("s"),s.getLocal("bits"))),s.setLocal("m",s.i32_shl(s.i32_const(1),s.getLocal("s"))),s.setLocal("pwm",s.i32_add(s.i32_const(ak),s.i32_mul(s.getLocal("s"),s.i32_const(aa)))),s.setLocal("k",s.i32_const(0)),s.block(s.loop(s.br_if(1,s.i32_ge_u(s.getLocal("k"),s.getLocal("n"))),s.call(h+"_one",t),s.setLocal("mdiv2",s.i32_shr_u(s.getLocal("m"),s.i32_const(1))),s.setLocal("j",s.i32_const(0)),s.block(s.loop(s.br_if(1,s.i32_ge_u(s.getLocal("j"),s.getLocal("mdiv2"))),s.setLocal("idx1",s.i32_add(s.getLocal("px"),s.i32_mul(s.i32_add(s.getLocal("k"),s.getLocal("j")),s.i32_const(ab)))),s.setLocal("idx2",s.i32_add(s.getLocal("idx1"),s.i32_mul(s.getLocal("mdiv2"),s.i32_const(ab)))),s.call(i,s.getLocal("idx2"),t,u),s.call(c+"_copy",s.getLocal("idx1"),v),s.call(c+"_add",v,u,s.getLocal("idx1")),s.call(c+"_sub",v,u,s.getLocal("idx2")),s.call(h+"_mul",t,s.getLocal("pwm"),t),s.setLocal("j",s.i32_add(s.getLocal("j"),s.i32_const(1))),s.br(0))),s.setLocal("k",s.i32_add(s.getLocal("k"),s.getLocal("m"))),s.br(0))),s.setLocal("s",s.i32_add(s.getLocal("s"),s.i32_const(1))),s.br(0))),s.call(b+"__fftFinal",s.getLocal("px"),s.getLocal("bits"),s.getLocal("reverse"),s.getLocal("mulFactor"))),(w=a.addFunction(b+"__log2")).addParam("n","i32"),w.setReturnType("i32"),w.addLocal("bits","i32"),w.addLocal("aux","i32"),x=w.getCodeBuilder(),w.addCode(x.setLocal("aux",x.i32_shr_u(x.getLocal("n"),x.i32_const(1)))),w.addCode(x.setLocal("bits",x.i32_const(0))),w.addCode(x.block(x.loop(x.br_if(1,x.i32_eqz(x.getLocal("aux"))),x.setLocal("aux",x.i32_shr_u(x.getLocal("aux"),x.i32_const(1))),x.setLocal("bits",x.i32_add(x.getLocal("bits"),x.i32_const(1))),x.br(0)))),w.addCode(x.if(x.i32_ne(x.getLocal("n"),x.i32_shl(x.i32_const(1),x.getLocal("bits"))),x.unreachable())),w.addCode(x.if(x.i32_gt_u(x.getLocal("bits"),x.i32_const(ae)),x.unreachable())),w.addCode(x.getLocal("bits")),(y=a.addFunction(b+"_fft")).addParam("px","i32"),y.addParam("n","i32"),y.addLocal("bits","i32"),A=(z=y.getCodeBuilder()).i32_const(a.alloc(aa)),y.addCode(z.setLocal("bits",z.call(b+"__log2",z.getLocal("n"))),z.call(h+"_one",A),z.call(b+"_rawfft",z.getLocal("px"),z.getLocal("bits"),z.i32_const(0),A)),(B=a.addFunction(b+"_ifft")).addParam("px","i32"),B.addParam("n","i32"),B.addLocal("bits","i32"),B.addLocal("pInv2","i32"),C=B.getCodeBuilder(),B.addCode(C.setLocal("bits",C.call(b+"__log2",C.getLocal("n"))),C.setLocal("pInv2",C.i32_add(C.i32_const(an),C.i32_mul(C.getLocal("bits"),C.i32_const(aa)))),C.call(b+"_rawfft",C.getLocal("px"),C.getLocal("bits"),C.i32_const(1),C.getLocal("pInv2"))),(D=a.addFunction(b+"_fftJoin")).addParam("pBuff1","i32"),D.addParam("pBuff2","i32"),D.addParam("n","i32"),D.addParam("first","i32"),D.addParam("inc","i32"),D.addLocal("idx1","i32"),D.addLocal("idx2","i32"),D.addLocal("i","i32"),F=(E=D.getCodeBuilder()).i32_const(a.alloc(aa)),G=E.i32_const(a.alloc(ab)),H=E.i32_const(a.alloc(ab)),D.addCode(E.call(h+"_copy",E.getLocal("first"),F),E.setLocal("i",E.i32_const(0)),E.block(E.loop(E.br_if(1,E.i32_eq(E.getLocal("i"),E.getLocal("n"))),E.setLocal("idx1",E.i32_add(E.getLocal("pBuff1"),E.i32_mul(E.getLocal("i"),E.i32_const(ab)))),E.setLocal("idx2",E.i32_add(E.getLocal("pBuff2"),E.i32_mul(E.getLocal("i"),E.i32_const(ab)))),E.call(i,E.getLocal("idx2"),F,G),E.call(c+"_copy",E.getLocal("idx1"),H),E.call(c+"_add",H,G,E.getLocal("idx1")),E.call(c+"_sub",H,G,E.getLocal("idx2")),E.call(h+"_mul",F,E.getLocal("inc"),F),E.setLocal("i",E.i32_add(E.getLocal("i"),E.i32_const(1))),E.br(0)))),(I=a.addFunction(b+"_fftJoinExt")).addParam("pBuff1","i32"),I.addParam("pBuff2","i32"),I.addParam("n","i32"),I.addParam("first","i32"),I.addParam("inc","i32"),I.addParam("totalBits","i32"),I.addLocal("idx1","i32"),I.addLocal("idx2","i32"),I.addLocal("i","i32"),I.addLocal("pShiftToM","i32"),K=(J=I.getCodeBuilder()).i32_const(a.alloc(aa)),L=J.i32_const(a.alloc(ab)),I.addCode(J.setLocal("pShiftToM",J.i32_add(J.i32_const(ar),J.i32_mul(J.getLocal("totalBits"),J.i32_const(aa)))),J.call(h+"_copy",J.getLocal("first"),K),J.setLocal("i",J.i32_const(0)),J.block(J.loop(J.br_if(1,J.i32_eq(J.getLocal("i"),J.getLocal("n"))),J.setLocal("idx1",J.i32_add(J.getLocal("pBuff1"),J.i32_mul(J.getLocal("i"),J.i32_const(ab)))),J.setLocal("idx2",J.i32_add(J.getLocal("pBuff2"),J.i32_mul(J.getLocal("i"),J.i32_const(ab)))),J.call(c+"_add",J.getLocal("idx1"),J.getLocal("idx2"),L),J.call(i,J.getLocal("idx2"),J.getLocal("pShiftToM"),J.getLocal("idx2")),J.call(c+"_add",J.getLocal("idx1"),J.getLocal("idx2"),J.getLocal("idx2")),J.call(i,J.getLocal("idx2"),K,J.getLocal("idx2")),J.call(c+"_copy",L,J.getLocal("idx1")),J.call(h+"_mul",K,J.getLocal("inc"),K),J.setLocal("i",J.i32_add(J.getLocal("i"),J.i32_const(1))),J.br(0)))),(M=a.addFunction(b+"_fftJoinExtInv")).addParam("pBuff1","i32"),M.addParam("pBuff2","i32"),M.addParam("n","i32"),M.addParam("first","i32"),M.addParam("inc","i32"),M.addParam("totalBits","i32"),M.addLocal("idx1","i32"),M.addLocal("idx2","i32"),M.addLocal("i","i32"),M.addLocal("pShiftToM","i32"),M.addLocal("pSConst","i32"),O=(N=M.getCodeBuilder()).i32_const(a.alloc(aa)),P=N.i32_const(a.alloc(ab)),M.addCode(N.setLocal("pShiftToM",N.i32_add(N.i32_const(ar),N.i32_mul(N.getLocal("totalBits"),N.i32_const(aa)))),N.setLocal("pSConst",N.i32_add(N.i32_const(as),N.i32_mul(N.getLocal("totalBits"),N.i32_const(aa)))),N.call(h+"_copy",N.getLocal("first"),O),N.setLocal("i",N.i32_const(0)),N.block(N.loop(N.br_if(1,N.i32_eq(N.getLocal("i"),N.getLocal("n"))),N.setLocal("idx1",N.i32_add(N.getLocal("pBuff1"),N.i32_mul(N.getLocal("i"),N.i32_const(ab)))),N.setLocal("idx2",N.i32_add(N.getLocal("pBuff2"),N.i32_mul(N.getLocal("i"),N.i32_const(ab)))),N.call(i,N.getLocal("idx2"),O,P),N.call(c+"_sub",N.getLocal("idx1"),P,N.getLocal("idx2")),N.call(i,N.getLocal("idx2"),N.getLocal("pSConst"),N.getLocal("idx2")),N.call(i,N.getLocal("idx1"),N.getLocal("pShiftToM"),N.getLocal("idx1")),N.call(c+"_sub",P,N.getLocal("idx1"),N.getLocal("idx1")),N.call(i,N.getLocal("idx1"),N.getLocal("pSConst"),N.getLocal("idx1")),N.call(h+"_mul",O,N.getLocal("inc"),O),N.setLocal("i",N.i32_add(N.getLocal("i"),N.i32_const(1))),N.br(0)))),(Q=a.addFunction(b+"_fftMix")).addParam("pBuff","i32"),Q.addParam("n","i32"),Q.addParam("exp","i32"),Q.addLocal("nGroups","i32"),Q.addLocal("nPerGroup","i32"),Q.addLocal("nPerGroupDiv2","i32"),Q.addLocal("pairOffset","i32"),Q.addLocal("idx1","i32"),Q.addLocal("idx2","i32"),Q.addLocal("i","i32"),Q.addLocal("j","i32"),Q.addLocal("pwm","i32"),S=(R=Q.getCodeBuilder()).i32_const(a.alloc(aa)),T=R.i32_const(a.alloc(ab)),U=R.i32_const(a.alloc(ab)),Q.addCode(R.setLocal("nPerGroup",R.i32_shl(R.i32_const(1),R.getLocal("exp"))),R.setLocal("nPerGroupDiv2",R.i32_shr_u(R.getLocal("nPerGroup"),R.i32_const(1))),R.setLocal("nGroups",R.i32_shr_u(R.getLocal("n"),R.getLocal("exp"))),R.setLocal("pairOffset",R.i32_mul(R.getLocal("nPerGroupDiv2"),R.i32_const(ab))),R.setLocal("pwm",R.i32_add(R.i32_const(ak),R.i32_mul(R.getLocal("exp"),R.i32_const(aa)))),R.setLocal("i",R.i32_const(0)),R.block(R.loop(R.br_if(1,R.i32_eq(R.getLocal("i"),R.getLocal("nGroups"))),R.call(h+"_one",S),R.setLocal("j",R.i32_const(0)),R.block(R.loop(R.br_if(1,R.i32_eq(R.getLocal("j"),R.getLocal("nPerGroupDiv2"))),R.setLocal("idx1",R.i32_add(R.getLocal("pBuff"),R.i32_mul(R.i32_add(R.i32_mul(R.getLocal("i"),R.getLocal("nPerGroup")),R.getLocal("j")),R.i32_const(ab)))),R.setLocal("idx2",R.i32_add(R.getLocal("idx1"),R.getLocal("pairOffset"))),R.call(i,R.getLocal("idx2"),S,T),R.call(c+"_copy",R.getLocal("idx1"),U),R.call(c+"_add",U,T,R.getLocal("idx1")),R.call(c+"_sub",U,T,R.getLocal("idx2")),R.call(h+"_mul",S,R.getLocal("pwm"),S),R.setLocal("j",R.i32_add(R.getLocal("j"),R.i32_const(1))),R.br(0))),R.setLocal("i",R.i32_add(R.getLocal("i"),R.i32_const(1))),R.br(0)))),(V=a.addFunction(b+"_fftFinal")).addParam("pBuff","i32"),V.addParam("n","i32"),V.addParam("factor","i32"),V.addLocal("idx1","i32"),V.addLocal("idx2","i32"),V.addLocal("i","i32"),V.addLocal("ndiv2","i32"),X=(W=V.getCodeBuilder()).i32_const(a.alloc(ab)),V.addCode(W.setLocal("ndiv2",W.i32_shr_u(W.getLocal("n"),W.i32_const(1))),W.if(W.i32_and(W.getLocal("n"),W.i32_const(1)),W.call(i,W.i32_add(W.getLocal("pBuff"),W.i32_mul(W.getLocal("ndiv2"),W.i32_const(ab))),W.getLocal("factor"),W.i32_add(W.getLocal("pBuff"),W.i32_mul(W.getLocal("ndiv2"),W.i32_const(ab))))),W.setLocal("i",W.i32_const(0)),W.block(W.loop(W.br_if(1,W.i32_ge_u(W.getLocal("i"),W.getLocal("ndiv2"))),W.setLocal("idx1",W.i32_add(W.getLocal("pBuff"),W.i32_mul(W.getLocal("i"),W.i32_const(ab)))),W.setLocal("idx2",W.i32_add(W.getLocal("pBuff"),W.i32_mul(W.i32_sub(W.i32_sub(W.getLocal("n"),W.i32_const(1)),W.getLocal("i")),W.i32_const(ab)))),W.call(i,W.getLocal("idx2"),W.getLocal("factor"),X),W.call(i,W.getLocal("idx1"),W.getLocal("factor"),W.getLocal("idx2")),W.call(c+"_copy",X,W.getLocal("idx1")),W.setLocal("i",W.i32_add(W.getLocal("i"),W.i32_const(1))),W.br(0)))),(Y=a.addFunction(b+"_prepareLagrangeEvaluation")).addParam("pBuff1","i32"),Y.addParam("pBuff2","i32"),Y.addParam("n","i32"),Y.addParam("first","i32"),Y.addParam("inc","i32"),Y.addParam("totalBits","i32"),Y.addLocal("idx1","i32"),Y.addLocal("idx2","i32"),Y.addLocal("i","i32"),Y.addLocal("pShiftToM","i32"),Y.addLocal("pSConst","i32"),$=(Z=Y.getCodeBuilder()).i32_const(a.alloc(aa)),_=Z.i32_const(a.alloc(ab)),Y.addCode(Z.setLocal("pShiftToM",Z.i32_add(Z.i32_const(ar),Z.i32_mul(Z.getLocal("totalBits"),Z.i32_const(aa)))),Z.setLocal("pSConst",Z.i32_add(Z.i32_const(as),Z.i32_mul(Z.getLocal("totalBits"),Z.i32_const(aa)))),Z.call(h+"_copy",Z.getLocal("first"),$),Z.setLocal("i",Z.i32_const(0)),Z.block(Z.loop(Z.br_if(1,Z.i32_eq(Z.getLocal("i"),Z.getLocal("n"))),Z.setLocal("idx1",Z.i32_add(Z.getLocal("pBuff1"),Z.i32_mul(Z.getLocal("i"),Z.i32_const(ab)))),Z.setLocal("idx2",Z.i32_add(Z.getLocal("pBuff2"),Z.i32_mul(Z.getLocal("i"),Z.i32_const(ab)))),Z.call(i,Z.getLocal("idx1"),Z.getLocal("pShiftToM"),_),Z.call(c+"_sub",Z.getLocal("idx2"),_,_),Z.call(c+"_sub",Z.getLocal("idx1"),Z.getLocal("idx2"),Z.getLocal("idx2")),Z.call(i,_,Z.getLocal("pSConst"),Z.getLocal("idx1")),Z.call(i,Z.getLocal("idx2"),$,Z.getLocal("idx2")),Z.call(h+"_mul",$,Z.getLocal("inc"),$),Z.setLocal("i",Z.i32_add(Z.getLocal("i"),Z.i32_const(1))),Z.br(0)))),a.exportFunction(b+"_fft"),a.exportFunction(b+"_ifft"),a.exportFunction(b+"_rawfft"),a.exportFunction(b+"_fftJoin"),a.exportFunction(b+"_fftJoinExt"),a.exportFunction(b+"_fftJoinExtInv"),a.exportFunction(b+"_fftMix"),a.exportFunction(b+"_fftFinal"),a.exportFunction(b+"_prepareLagrangeEvaluation")}},6439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},7594:(a,b,c)=>{let d=c(4830),e=c(8286);a.exports=function(a,b,c,f){let g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a$,a_,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT;if(a.modules[c])return c;let bU=8*a.modules[f].n64;return a.modules[c]={n64:3*a.modules[f].n64},(g=a.addFunction(c+"_isZero")).addParam("x","i32"),g.setReturnType("i32"),i=(h=g.getCodeBuilder()).getLocal("x"),j=h.i32_add(h.getLocal("x"),h.i32_const(bU)),k=h.i32_add(h.getLocal("x"),h.i32_const(2*bU)),g.addCode(h.i32_and(h.i32_and(h.call(f+"_isZero",i),h.call(f+"_isZero",j)),h.call(f+"_isZero",k))),(l=a.addFunction(c+"_isOne")).addParam("x","i32"),l.setReturnType("i32"),n=(m=l.getCodeBuilder()).getLocal("x"),o=m.i32_add(m.getLocal("x"),m.i32_const(bU)),p=m.i32_add(m.getLocal("x"),m.i32_const(2*bU)),l.addCode(m.ret(m.i32_and(m.i32_and(m.call(f+"_isOne",n),m.call(f+"_isZero",o)),m.call(f+"_isZero",p)))),(q=a.addFunction(c+"_zero")).addParam("x","i32"),s=(r=q.getCodeBuilder()).getLocal("x"),t=r.i32_add(r.getLocal("x"),r.i32_const(bU)),u=r.i32_add(r.getLocal("x"),r.i32_const(2*bU)),q.addCode(r.call(f+"_zero",s),r.call(f+"_zero",t),r.call(f+"_zero",u)),(v=a.addFunction(c+"_one")).addParam("x","i32"),x=(w=v.getCodeBuilder()).getLocal("x"),y=w.i32_add(w.getLocal("x"),w.i32_const(bU)),z=w.i32_add(w.getLocal("x"),w.i32_const(2*bU)),v.addCode(w.call(f+"_one",x),w.call(f+"_zero",y),w.call(f+"_zero",z)),(A=a.addFunction(c+"_copy")).addParam("x","i32"),A.addParam("r","i32"),C=(B=A.getCodeBuilder()).getLocal("x"),D=B.i32_add(B.getLocal("x"),B.i32_const(bU)),E=B.i32_add(B.getLocal("x"),B.i32_const(2*bU)),F=B.getLocal("r"),G=B.i32_add(B.getLocal("r"),B.i32_const(bU)),H=B.i32_add(B.getLocal("r"),B.i32_const(2*bU)),A.addCode(B.call(f+"_copy",C,F),B.call(f+"_copy",D,G),B.call(f+"_copy",E,H)),(I=a.addFunction(c+"_mul")).addParam("x","i32"),I.addParam("y","i32"),I.addParam("r","i32"),K=(J=I.getCodeBuilder()).getLocal("x"),L=J.i32_add(J.getLocal("x"),J.i32_const(bU)),M=J.i32_add(J.getLocal("x"),J.i32_const(2*bU)),N=J.getLocal("y"),O=J.i32_add(J.getLocal("y"),J.i32_const(bU)),P=J.i32_add(J.getLocal("y"),J.i32_const(2*bU)),Q=J.getLocal("r"),R=J.i32_add(J.getLocal("r"),J.i32_const(bU)),S=J.i32_add(J.getLocal("r"),J.i32_const(2*bU)),T=J.i32_const(a.alloc(bU)),U=J.i32_const(a.alloc(bU)),V=J.i32_const(a.alloc(bU)),W=J.i32_const(a.alloc(bU)),X=J.i32_const(a.alloc(bU)),Y=J.i32_const(a.alloc(bU)),Z=J.i32_const(a.alloc(bU)),$=J.i32_const(a.alloc(bU)),_=J.i32_const(a.alloc(bU)),aa=J.i32_const(a.alloc(bU)),ab=J.i32_const(a.alloc(bU)),ac=J.i32_const(a.alloc(bU)),ad=J.i32_const(a.alloc(bU)),I.addCode(J.call(f+"_mul",K,N,T),J.call(f+"_mul",L,O,U),J.call(f+"_mul",M,P,V),J.call(f+"_add",K,L,W),J.call(f+"_add",N,O,X),J.call(f+"_add",K,M,Y),J.call(f+"_add",N,P,Z),J.call(f+"_add",L,M,$),J.call(f+"_add",O,P,_),J.call(f+"_add",T,U,aa),J.call(f+"_add",T,V,ab),J.call(f+"_add",U,V,ac),J.call(f+"_mul",$,_,Q),J.call(f+"_sub",Q,ac,Q),J.call(b,Q,Q),J.call(f+"_add",T,Q,Q),J.call(f+"_mul",W,X,R),J.call(f+"_sub",R,aa,R),J.call(b,V,ad),J.call(f+"_add",R,ad,R),J.call(f+"_mul",Y,Z,S),J.call(f+"_sub",S,ab,S),J.call(f+"_add",S,U,S)),(ae=a.addFunction(c+"_square")).addParam("x","i32"),ae.addParam("r","i32"),ag=(af=ae.getCodeBuilder()).getLocal("x"),ah=af.i32_add(af.getLocal("x"),af.i32_const(bU)),ai=af.i32_add(af.getLocal("x"),af.i32_const(2*bU)),aj=af.getLocal("r"),ak=af.i32_add(af.getLocal("r"),af.i32_const(bU)),al=af.i32_add(af.getLocal("r"),af.i32_const(2*bU)),am=af.i32_const(a.alloc(bU)),an=af.i32_const(a.alloc(bU)),ao=af.i32_const(a.alloc(bU)),ap=af.i32_const(a.alloc(bU)),aq=af.i32_const(a.alloc(bU)),ar=af.i32_const(a.alloc(bU)),as=af.i32_const(a.alloc(bU)),ae.addCode(af.call(f+"_square",ag,am),af.call(f+"_mul",ag,ah,an),af.call(f+"_add",an,an,ao),af.call(f+"_sub",ag,ah,ap),af.call(f+"_add",ap,ai,ap),af.call(f+"_square",ap,ap),af.call(f+"_mul",ah,ai,aq),af.call(f+"_add",aq,aq,ar),af.call(f+"_square",ai,as),af.call(b,ar,aj),af.call(f+"_add",am,aj,aj),af.call(b,as,ak),af.call(f+"_add",ao,ak,ak),af.call(f+"_add",am,as,al),af.call(f+"_sub",ar,al,al),af.call(f+"_add",ap,al,al),af.call(f+"_add",ao,al,al)),(at=a.addFunction(c+"_add")).addParam("x","i32"),at.addParam("y","i32"),at.addParam("r","i32"),av=(au=at.getCodeBuilder()).getLocal("x"),aw=au.i32_add(au.getLocal("x"),au.i32_const(bU)),ax=au.i32_add(au.getLocal("x"),au.i32_const(2*bU)),ay=au.getLocal("y"),az=au.i32_add(au.getLocal("y"),au.i32_const(bU)),aA=au.i32_add(au.getLocal("y"),au.i32_const(2*bU)),aB=au.getLocal("r"),aC=au.i32_add(au.getLocal("r"),au.i32_const(bU)),aD=au.i32_add(au.getLocal("r"),au.i32_const(2*bU)),at.addCode(au.call(f+"_add",av,ay,aB),au.call(f+"_add",aw,az,aC),au.call(f+"_add",ax,aA,aD)),(aE=a.addFunction(c+"_sub")).addParam("x","i32"),aE.addParam("y","i32"),aE.addParam("r","i32"),aG=(aF=aE.getCodeBuilder()).getLocal("x"),aH=aF.i32_add(aF.getLocal("x"),aF.i32_const(bU)),aI=aF.i32_add(aF.getLocal("x"),aF.i32_const(2*bU)),aJ=aF.getLocal("y"),aK=aF.i32_add(aF.getLocal("y"),aF.i32_const(bU)),aL=aF.i32_add(aF.getLocal("y"),aF.i32_const(2*bU)),aM=aF.getLocal("r"),aN=aF.i32_add(aF.getLocal("r"),aF.i32_const(bU)),aO=aF.i32_add(aF.getLocal("r"),aF.i32_const(2*bU)),aE.addCode(aF.call(f+"_sub",aG,aJ,aM),aF.call(f+"_sub",aH,aK,aN),aF.call(f+"_sub",aI,aL,aO)),(aP=a.addFunction(c+"_neg")).addParam("x","i32"),aP.addParam("r","i32"),aR=(aQ=aP.getCodeBuilder()).getLocal("x"),aS=aQ.i32_add(aQ.getLocal("x"),aQ.i32_const(bU)),aT=aQ.i32_add(aQ.getLocal("x"),aQ.i32_const(2*bU)),aU=aQ.getLocal("r"),aV=aQ.i32_add(aQ.getLocal("r"),aQ.i32_const(bU)),aW=aQ.i32_add(aQ.getLocal("r"),aQ.i32_const(2*bU)),aP.addCode(aQ.call(f+"_neg",aR,aU),aQ.call(f+"_neg",aS,aV),aQ.call(f+"_neg",aT,aW)),(aX=a.addFunction(c+"_sign")).addParam("x","i32"),aX.addLocal("s","i32"),aX.setReturnType("i32"),aZ=(aY=aX.getCodeBuilder()).getLocal("x"),a$=aY.i32_add(aY.getLocal("x"),aY.i32_const(bU)),a_=aY.i32_add(aY.getLocal("x"),aY.i32_const(2*bU)),aX.addCode(aY.setLocal("s",aY.call(f+"_sign",a_)),aY.if(aY.getLocal("s"),aY.ret(aY.getLocal("s"))),aY.setLocal("s",aY.call(f+"_sign",a$)),aY.if(aY.getLocal("s"),aY.ret(aY.getLocal("s"))),aY.ret(aY.call(f+"_sign",aZ))),(a0=a.addFunction(c+"_toMontgomery")).addParam("x","i32"),a0.addParam("r","i32"),a2=(a1=a0.getCodeBuilder()).getLocal("x"),a3=a1.i32_add(a1.getLocal("x"),a1.i32_const(bU)),a4=a1.i32_add(a1.getLocal("x"),a1.i32_const(2*bU)),a5=a1.getLocal("r"),a6=a1.i32_add(a1.getLocal("r"),a1.i32_const(bU)),a7=a1.i32_add(a1.getLocal("r"),a1.i32_const(2*bU)),a0.addCode(a1.call(f+"_toMontgomery",a2,a5),a1.call(f+"_toMontgomery",a3,a6),a1.call(f+"_toMontgomery",a4,a7)),(a8=a.addFunction(c+"_fromMontgomery")).addParam("x","i32"),a8.addParam("r","i32"),ba=(a9=a8.getCodeBuilder()).getLocal("x"),bb=a9.i32_add(a9.getLocal("x"),a9.i32_const(bU)),bc=a9.i32_add(a9.getLocal("x"),a9.i32_const(2*bU)),bd=a9.getLocal("r"),be=a9.i32_add(a9.getLocal("r"),a9.i32_const(bU)),bf=a9.i32_add(a9.getLocal("r"),a9.i32_const(2*bU)),a8.addCode(a9.call(f+"_fromMontgomery",ba,bd),a9.call(f+"_fromMontgomery",bb,be),a9.call(f+"_fromMontgomery",bc,bf)),(bg=a.addFunction(c+"_eq")).addParam("x","i32"),bg.addParam("y","i32"),bg.setReturnType("i32"),bi=(bh=bg.getCodeBuilder()).getLocal("x"),bj=bh.i32_add(bh.getLocal("x"),bh.i32_const(bU)),bk=bh.i32_add(bh.getLocal("x"),bh.i32_const(2*bU)),bl=bh.getLocal("y"),bm=bh.i32_add(bh.getLocal("y"),bh.i32_const(bU)),bn=bh.i32_add(bh.getLocal("y"),bh.i32_const(2*bU)),bg.addCode(bh.i32_and(bh.i32_and(bh.call(f+"_eq",bi,bl),bh.call(f+"_eq",bj,bm)),bh.call(f+"_eq",bk,bn))),(bo=a.addFunction(c+"_inverse")).addParam("x","i32"),bo.addParam("r","i32"),bq=(bp=bo.getCodeBuilder()).getLocal("x"),br=bp.i32_add(bp.getLocal("x"),bp.i32_const(bU)),bs=bp.i32_add(bp.getLocal("x"),bp.i32_const(2*bU)),bt=bp.getLocal("r"),bu=bp.i32_add(bp.getLocal("r"),bp.i32_const(bU)),bv=bp.i32_add(bp.getLocal("r"),bp.i32_const(2*bU)),bw=bp.i32_const(a.alloc(bU)),bx=bp.i32_const(a.alloc(bU)),by=bp.i32_const(a.alloc(bU)),bz=bp.i32_const(a.alloc(bU)),bA=bp.i32_const(a.alloc(bU)),bB=bp.i32_const(a.alloc(bU)),bC=bp.i32_const(a.alloc(bU)),bD=bp.i32_const(a.alloc(bU)),bE=bp.i32_const(a.alloc(bU)),bF=bp.i32_const(a.alloc(bU)),bG=bp.i32_const(a.alloc(bU)),bo.addCode(bp.call(f+"_square",bq,bw),bp.call(f+"_square",br,bx),bp.call(f+"_square",bs,by),bp.call(f+"_mul",bq,br,bz),bp.call(f+"_mul",bq,bs,bA),bp.call(f+"_mul",br,bs,bB),bp.call(b,bB,bC),bp.call(f+"_sub",bw,bC,bC),bp.call(b,by,bD),bp.call(f+"_sub",bD,bz,bD),bp.call(f+"_sub",bx,bA,bE),bp.call(f+"_mul",bs,bD,bF),bp.call(f+"_mul",br,bE,bG),bp.call(f+"_add",bF,bG,bF),bp.call(b,bF,bF),bp.call(f+"_mul",bq,bC,bG),bp.call(f+"_add",bG,bF,bF),bp.call(f+"_inverse",bF,bF),bp.call(f+"_mul",bF,bC,bt),bp.call(f+"_mul",bF,bD,bu),bp.call(f+"_mul",bF,bE,bv)),(bH=a.addFunction(c+"_timesScalar")).addParam("x","i32"),bH.addParam("scalar","i32"),bH.addParam("scalarLen","i32"),bH.addParam("r","i32"),bJ=(bI=bH.getCodeBuilder()).getLocal("x"),bK=bI.i32_add(bI.getLocal("x"),bI.i32_const(bU)),bL=bI.i32_add(bI.getLocal("x"),bI.i32_const(2*bU)),bM=bI.getLocal("r"),bN=bI.i32_add(bI.getLocal("r"),bI.i32_const(bU)),bO=bI.i32_add(bI.getLocal("r"),bI.i32_const(2*bU)),bH.addCode(bI.call(f+"_timesScalar",bJ,bI.getLocal("scalar"),bI.getLocal("scalarLen"),bM),bI.call(f+"_timesScalar",bK,bI.getLocal("scalar"),bI.getLocal("scalarLen"),bN),bI.call(f+"_timesScalar",bL,bI.getLocal("scalar"),bI.getLocal("scalarLen"),bO)),(bP=a.addFunction(c+"_isNegative")).addParam("x","i32"),bP.setReturnType("i32"),bR=(bQ=bP.getCodeBuilder()).getLocal("x"),bS=bQ.i32_add(bQ.getLocal("x"),bQ.i32_const(bU)),bT=bQ.i32_add(bQ.getLocal("x"),bQ.i32_const(2*bU)),bP.addCode(bQ.if(bQ.call(f+"_isZero",bT),bQ.if(bQ.call(f+"_isZero",bS),bQ.ret(bQ.call(f+"_isNegative",bR)),bQ.ret(bQ.call(f+"_isNegative",bS)))),bQ.ret(bQ.call(f+"_isNegative",bT))),a.exportFunction(c+"_isZero"),a.exportFunction(c+"_isOne"),a.exportFunction(c+"_zero"),a.exportFunction(c+"_one"),a.exportFunction(c+"_copy"),a.exportFunction(c+"_mul"),a.exportFunction(c+"_square"),a.exportFunction(c+"_add"),a.exportFunction(c+"_sub"),a.exportFunction(c+"_neg"),a.exportFunction(c+"_sign"),a.exportFunction(c+"_fromMontgomery"),a.exportFunction(c+"_toMontgomery"),a.exportFunction(c+"_eq"),a.exportFunction(c+"_inverse"),e(a,c),d(a,c+"_exp",3*bU,c+"_mul",c+"_square",c+"_copy",c+"_one"),a.exportFunction(c+"_exp"),a.exportFunction(c+"_timesScalar"),a.exportFunction(c+"_batchInverse"),a.exportFunction(c+"_isNegative"),c}},7598:a=>{"use strict";a.exports=require("node:crypto")},7910:a=>{"use strict";a.exports=require("stream")},8286:a=>{a.exports=function(a,b){let c=8*a.modules[b].n64,d=a.addFunction(b+"_batchInverse");d.addParam("pIn","i32"),d.addParam("inStep","i32"),d.addParam("n","i32"),d.addParam("pOut","i32"),d.addParam("outStep","i32"),d.addLocal("itAux","i32"),d.addLocal("itIn","i32"),d.addLocal("itOut","i32"),d.addLocal("i","i32");let e=d.getCodeBuilder(),f=e.i32_const(a.alloc(c));d.addCode(e.setLocal("itAux",e.i32_load(e.i32_const(0))),e.i32_store(e.i32_const(0),e.i32_add(e.getLocal("itAux"),e.i32_mul(e.i32_add(e.getLocal("n"),e.i32_const(1)),e.i32_const(c))))),d.addCode(e.call(b+"_one",e.getLocal("itAux")),e.setLocal("itIn",e.getLocal("pIn")),e.setLocal("itAux",e.i32_add(e.getLocal("itAux"),e.i32_const(c))),e.setLocal("i",e.i32_const(0)),e.block(e.loop(e.br_if(1,e.i32_eq(e.getLocal("i"),e.getLocal("n"))),e.if(e.call(b+"_isZero",e.getLocal("itIn")),e.call(b+"_copy",e.i32_sub(e.getLocal("itAux"),e.i32_const(c)),e.getLocal("itAux")),e.call(b+"_mul",e.getLocal("itIn"),e.i32_sub(e.getLocal("itAux"),e.i32_const(c)),e.getLocal("itAux"))),e.setLocal("itIn",e.i32_add(e.getLocal("itIn"),e.getLocal("inStep"))),e.setLocal("itAux",e.i32_add(e.getLocal("itAux"),e.i32_const(c))),e.setLocal("i",e.i32_add(e.getLocal("i"),e.i32_const(1))),e.br(0))),e.setLocal("itIn",e.i32_sub(e.getLocal("itIn"),e.getLocal("inStep"))),e.setLocal("itAux",e.i32_sub(e.getLocal("itAux"),e.i32_const(c))),e.setLocal("itOut",e.i32_add(e.getLocal("pOut"),e.i32_mul(e.i32_sub(e.getLocal("n"),e.i32_const(1)),e.getLocal("outStep")))),e.call(b+"_inverse",e.getLocal("itAux"),e.getLocal("itAux")),e.block(e.loop(e.br_if(1,e.i32_eqz(e.getLocal("i"))),e.if(e.call(b+"_isZero",e.getLocal("itIn")),[...e.call(b+"_copy",e.getLocal("itAux"),e.i32_sub(e.getLocal("itAux"),e.i32_const(c))),...e.call(b+"_zero",e.getLocal("itOut"))],[...e.call(b+"_copy",e.i32_sub(e.getLocal("itAux"),e.i32_const(c)),f),...e.call(b+"_mul",e.getLocal("itAux"),e.getLocal("itIn"),e.i32_sub(e.getLocal("itAux"),e.i32_const(c))),...e.call(b+"_mul",e.getLocal("itAux"),f,e.getLocal("itOut"))]),e.setLocal("itIn",e.i32_sub(e.getLocal("itIn"),e.getLocal("inStep"))),e.setLocal("itOut",e.i32_sub(e.getLocal("itOut"),e.getLocal("outStep"))),e.setLocal("itAux",e.i32_sub(e.getLocal("itAux"),e.i32_const(c))),e.setLocal("i",e.i32_sub(e.getLocal("i"),e.i32_const(1))),e.br(0)))),d.addCode(e.i32_store(e.i32_const(0),e.getLocal("itAux")))}},8354:a=>{"use strict";a.exports=require("util")},9021:a=>{"use strict";a.exports=require("fs")},9141:a=>{a.exports=function(a,b,c){let d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=c||"int";if(a.modules[v])return v;a.modules[v]={};let w=2*b,x=8*b,y=a.addFunction(v+"_copy");y.addParam("px","i32"),y.addParam("pr","i32");let z=y.getCodeBuilder();for(let a=0;a<b;a++)y.addCode(z.i64_store(z.getLocal("pr"),8*a,z.i64_load(z.getLocal("px"),8*a)));let A=a.addFunction(v+"_zero");A.addParam("pr","i32");let B=A.getCodeBuilder();for(let a=0;a<b;a++)A.addCode(B.i64_store(B.getLocal("pr"),8*a,B.i64_const(0)));(d=a.addFunction(v+"_isZero")).addParam("px","i32"),d.setReturnType("i32"),e=d.getCodeBuilder(),d.addCode(function a(b){return 0==b?e.ret(e.i64_eqz(e.i64_load(e.getLocal("px")))):e.if(e.i64_eqz(e.i64_load(e.getLocal("px"),8*b)),a(b-1),e.ret(e.i32_const(0)))}(b-1)),d.addCode(e.ret(e.i32_const(0)));let C=a.addFunction(v+"_one");C.addParam("pr","i32");let D=C.getCodeBuilder();C.addCode(D.i64_store(D.getLocal("pr"),0,D.i64_const(1)));for(let a=1;a<b;a++)C.addCode(D.i64_store(D.getLocal("pr"),8*a,D.i64_const(0)));(f=a.addFunction(v+"_eq")).addParam("px","i32"),f.addParam("py","i32"),f.setReturnType("i32"),g=f.getCodeBuilder(),f.addCode(function a(b){return 0==b?g.ret(g.i64_eq(g.i64_load(g.getLocal("px")),g.i64_load(g.getLocal("py")))):g.if(g.i64_eq(g.i64_load(g.getLocal("px"),8*b),g.i64_load(g.getLocal("py"),8*b)),a(b-1),g.ret(g.i32_const(0)))}(b-1)),f.addCode(g.ret(g.i32_const(0))),(h=a.addFunction(v+"_gte")).addParam("px","i32"),h.addParam("py","i32"),h.setReturnType("i32"),i=h.getCodeBuilder(),h.addCode(function a(b){return 0==b?i.ret(i.i64_ge_u(i.i64_load(i.getLocal("px")),i.i64_load(i.getLocal("py")))):i.if(i.i64_lt_u(i.i64_load(i.getLocal("px"),8*b),i.i64_load(i.getLocal("py"),8*b)),i.ret(i.i32_const(0)),i.if(i.i64_gt_u(i.i64_load(i.getLocal("px"),8*b),i.i64_load(i.getLocal("py"),8*b)),i.ret(i.i32_const(1)),a(b-1)))}(b-1)),h.addCode(i.ret(i.i32_const(0)));let E=a.addFunction(v+"_add");E.addParam("x","i32"),E.addParam("y","i32"),E.addParam("r","i32"),E.setReturnType("i32"),E.addLocal("c","i64");let F=E.getCodeBuilder();E.addCode(F.setLocal("c",F.i64_add(F.i64_load32_u(F.getLocal("x")),F.i64_load32_u(F.getLocal("y"))))),E.addCode(F.i64_store32(F.getLocal("r"),F.getLocal("c")));for(let a=1;a<w;a++)E.addCode(F.setLocal("c",F.i64_add(F.i64_add(F.i64_load32_u(F.getLocal("x"),4*a),F.i64_load32_u(F.getLocal("y"),4*a)),F.i64_shr_u(F.getLocal("c"),F.i64_const(32))))),E.addCode(F.i64_store32(F.getLocal("r"),4*a,F.getLocal("c")));E.addCode(F.i32_wrap_i64(F.i64_shr_u(F.getLocal("c"),F.i64_const(32))));let G=a.addFunction(v+"_sub");G.addParam("x","i32"),G.addParam("y","i32"),G.addParam("r","i32"),G.setReturnType("i32"),G.addLocal("c","i64");let H=G.getCodeBuilder();G.addCode(H.setLocal("c",H.i64_sub(H.i64_load32_u(H.getLocal("x")),H.i64_load32_u(H.getLocal("y"))))),G.addCode(H.i64_store32(H.getLocal("r"),H.i64_and(H.getLocal("c"),H.i64_const("0xFFFFFFFF"))));for(let a=1;a<w;a++)G.addCode(H.setLocal("c",H.i64_add(H.i64_sub(H.i64_load32_u(H.getLocal("x"),4*a),H.i64_load32_u(H.getLocal("y"),4*a)),H.i64_shr_s(H.getLocal("c"),H.i64_const(32))))),G.addCode(H.i64_store32(H.getLocal("r"),4*a,H.i64_and(H.getLocal("c"),H.i64_const("0xFFFFFFFF"))));return G.addCode(H.i32_wrap_i64(H.i64_shr_s(H.getLocal("c"),H.i64_const(32)))),function(){let b=a.addFunction(v+"_mul");b.addParam("x","i32"),b.addParam("y","i32"),b.addParam("r","i32"),b.addLocal("c0","i64"),b.addLocal("c1","i64");for(let a=0;a<w;a++)b.addLocal("x"+a,"i64"),b.addLocal("y"+a,"i64");let c=b.getCodeBuilder(),d=[],e=[],f="c0",g="c1";for(let a=0;a<2*w-1;a++){for(let h=Math.max(0,a-w+1);h<=a&&h<w;h++){let i=a-h;b.addCode(c.setLocal(f,c.i64_add(c.i64_and(c.getLocal(f),c.i64_const(0xffffffff)),function(a,b){let f,g;return d[a]?f=c.getLocal("x"+a):(f=c.teeLocal("x"+a,c.i64_load32_u(c.getLocal("x"),4*a)),d[a]=!0),e[b]?g=c.getLocal("y"+b):(g=c.teeLocal("y"+b,c.i64_load32_u(c.getLocal("y"),4*b)),e[b]=!0),c.i64_mul(f,g)}(h,i)))),b.addCode(c.setLocal(g,c.i64_add(c.getLocal(g),c.i64_shr_u(c.getLocal(f),c.i64_const(32)))))}b.addCode(c.i64_store32(c.getLocal("r"),4*a,c.getLocal(f))),[f,g]=[g,f],b.addCode(c.setLocal(g,c.i64_shr_u(c.getLocal(f),c.i64_const(32))))}b.addCode(c.i64_store32(c.getLocal("r"),4*w*2-4,c.getLocal(f)))}(),function(){let b=a.addFunction(v+"_square");b.addParam("x","i32"),b.addParam("r","i32"),b.addLocal("c0","i64"),b.addLocal("c1","i64"),b.addLocal("c0_old","i64"),b.addLocal("c1_old","i64");for(let a=0;a<w;a++)b.addLocal("x"+a,"i64");let c=b.getCodeBuilder(),d=[];function e(a,b){let e,f;return d[a]?e=c.getLocal("x"+a):(e=c.teeLocal("x"+a,c.i64_load32_u(c.getLocal("x"),4*a)),d[a]=!0),d[b]?f=c.getLocal("x"+b):(f=c.teeLocal("x"+b,c.i64_load32_u(c.getLocal("x"),4*b)),d[b]=!0),c.i64_mul(e,f)}let f="c0_old",g="c1_old";for(let a=0;a<2*w-1;a++){b.addCode(c.setLocal("c0",c.i64_const(0)),c.setLocal("c1",c.i64_const(0)));for(let d=Math.max(0,a-w+1);d<a+1>>1&&d<w;d++){let f=a-d;b.addCode(c.setLocal("c0",c.i64_add(c.i64_and(c.getLocal("c0"),c.i64_const(0xffffffff)),e(d,f)))),b.addCode(c.setLocal("c1",c.i64_add(c.getLocal("c1"),c.i64_shr_u(c.getLocal("c0"),c.i64_const(32)))))}b.addCode(c.setLocal("c0",c.i64_shl(c.i64_and(c.getLocal("c0"),c.i64_const(0xffffffff)),c.i64_const(1)))),b.addCode(c.setLocal("c1",c.i64_add(c.i64_shl(c.getLocal("c1"),c.i64_const(1)),c.i64_shr_u(c.getLocal("c0"),c.i64_const(32))))),a%2==0&&(b.addCode(c.setLocal("c0",c.i64_add(c.i64_and(c.getLocal("c0"),c.i64_const(0xffffffff)),e(a>>1,a>>1)))),b.addCode(c.setLocal("c1",c.i64_add(c.getLocal("c1"),c.i64_shr_u(c.getLocal("c0"),c.i64_const(32)))))),a>0&&(b.addCode(c.setLocal("c0",c.i64_add(c.i64_and(c.getLocal("c0"),c.i64_const(0xffffffff)),c.i64_and(c.getLocal(f),c.i64_const(0xffffffff))))),b.addCode(c.setLocal("c1",c.i64_add(c.i64_add(c.getLocal("c1"),c.i64_shr_u(c.getLocal("c0"),c.i64_const(32))),c.getLocal(g))))),b.addCode(c.i64_store32(c.getLocal("r"),4*a,c.getLocal("c0"))),b.addCode(c.setLocal(f,c.getLocal("c1")),c.setLocal(g,c.i64_shr_u(c.getLocal(f),c.i64_const(32))))}b.addCode(c.i64_store32(c.getLocal("r"),4*w*2-4,c.getLocal(f)))}(),(j=a.addFunction(v+"_squareOld")).addParam("x","i32"),j.addParam("r","i32"),k=j.getCodeBuilder(),j.addCode(k.call(v+"_mul",k.getLocal("x"),k.getLocal("x"),k.getLocal("r"))),function(){let b,c,d=a.addFunction(v+"__mul1");d.addParam("px","i32"),d.addParam("y","i64"),d.addParam("pr","i32"),d.addLocal("c","i64");let e=d.getCodeBuilder();d.addCode(e.setLocal("c",e.i64_mul(e.i64_load32_u(e.getLocal("px"),0,0),e.getLocal("y")))),d.addCode(e.i64_store32(e.getLocal("pr"),0,0,e.getLocal("c")));for(let a=1;a<w;a++)d.addCode(e.setLocal("c",e.i64_add(e.i64_mul(e.i64_load32_u(e.getLocal("px"),4*a,0),e.getLocal("y")),e.i64_shr_u(e.getLocal("c"),e.i64_const(32))))),d.addCode(e.i64_store32(e.getLocal("pr"),4*a,0,e.getLocal("c")));(b=a.addFunction(v+"__add1")).addParam("x","i32"),b.addParam("y","i64"),b.addLocal("c","i64"),b.addLocal("px","i32"),c=b.getCodeBuilder(),b.addCode(c.setLocal("px",c.getLocal("x"))),b.addCode(c.setLocal("c",c.i64_add(c.i64_load32_u(c.getLocal("px"),0,0),c.getLocal("y")))),b.addCode(c.i64_store32(c.getLocal("px"),0,0,c.getLocal("c"))),b.addCode(c.setLocal("c",c.i64_shr_u(c.getLocal("c"),c.i64_const(32)))),b.addCode(c.block(c.loop(c.br_if(1,c.i64_eqz(c.getLocal("c"))),c.setLocal("px",c.i32_add(c.getLocal("px"),c.i32_const(4))),c.setLocal("c",c.i64_add(c.i64_load32_u(c.getLocal("px"),0,0),c.getLocal("c"))),c.i64_store32(c.getLocal("px"),0,0,c.getLocal("c")),c.setLocal("c",c.i64_shr_u(c.getLocal("c"),c.i64_const(32))),c.br(0))));let f=a.addFunction(v+"_div");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("c","i32"),f.addParam("r","i32"),f.addLocal("rr","i32"),f.addLocal("cc","i32"),f.addLocal("eX","i32"),f.addLocal("eY","i32"),f.addLocal("sy","i64"),f.addLocal("sx","i64"),f.addLocal("ec","i32");let g=f.getCodeBuilder(),h=g.i32_const(a.alloc(x)),i=g.i32_const(a.alloc(x)),j=g.i32_const(a.alloc(x)),k=g.getLocal("cc"),l=g.getLocal("rr"),m=a.alloc(2*x),n=g.i32_const(m),o=g.i32_const(m+x);f.addCode(g.if(g.getLocal("c"),g.setLocal("cc",g.getLocal("c")),g.setLocal("cc",i))),f.addCode(g.if(g.getLocal("r"),g.setLocal("rr",g.getLocal("r")),g.setLocal("rr",j))),f.addCode(g.call(v+"_copy",g.getLocal("x"),l)),f.addCode(g.call(v+"_copy",g.getLocal("y"),h)),f.addCode(g.call(v+"_zero",k)),f.addCode(g.call(v+"_zero",n)),f.addCode(g.setLocal("eX",g.i32_const(x-1))),f.addCode(g.setLocal("eY",g.i32_const(x-1))),f.addCode(g.block(g.loop(g.br_if(1,g.i32_or(g.i32_load8_u(g.i32_add(h,g.getLocal("eY")),0,0),g.i32_eq(g.getLocal("eY"),g.i32_const(3)))),g.setLocal("eY",g.i32_sub(g.getLocal("eY"),g.i32_const(1))),g.br(0)))),f.addCode(g.setLocal("sy",g.i64_add(g.i64_load32_u(g.i32_sub(g.i32_add(h,g.getLocal("eY")),g.i32_const(3)),0,0),g.i64_const(1)))),f.addCode(g.if(g.i64_eq(g.getLocal("sy"),g.i64_const(1)),g.drop(g.i64_div_u(g.i64_const(0),g.i64_const(0))))),f.addCode(g.block(g.loop(g.block(g.loop(g.br_if(1,g.i32_or(g.i32_load8_u(g.i32_add(l,g.getLocal("eX")),0,0),g.i32_eq(g.getLocal("eX"),g.i32_const(7)))),g.setLocal("eX",g.i32_sub(g.getLocal("eX"),g.i32_const(1))),g.br(0))),g.setLocal("sx",g.i64_load(g.i32_sub(g.i32_add(l,g.getLocal("eX")),g.i32_const(7)),0,0)),g.setLocal("sx",g.i64_div_u(g.getLocal("sx"),g.getLocal("sy"))),g.setLocal("ec",g.i32_sub(g.i32_sub(g.getLocal("eX"),g.getLocal("eY")),g.i32_const(4))),g.block(g.loop(g.br_if(1,g.i32_and(g.i64_eqz(g.i64_and(g.getLocal("sx"),g.i64_const("0xFFFFFFFF00000000"))),g.i32_ge_s(g.getLocal("ec"),g.i32_const(0)))),g.setLocal("sx",g.i64_shr_u(g.getLocal("sx"),g.i64_const(8))),g.setLocal("ec",g.i32_add(g.getLocal("ec"),g.i32_const(1))),g.br(0))),g.if(g.i64_eqz(g.getLocal("sx")),[...g.br_if(2,g.i32_eqz(g.call(v+"_gte",l,h))),...g.setLocal("sx",g.i64_const(1)),...g.setLocal("ec",g.i32_const(0))]),g.call(v+"__mul1",h,g.getLocal("sx"),o),g.drop(g.call(v+"_sub",l,g.i32_sub(o,g.getLocal("ec")),l)),g.call(v+"__add1",g.i32_add(k,g.getLocal("ec")),g.getLocal("sx")),g.br(0))))}(),(l=a.addFunction(v+"_inverseMod")).addParam("px","i32"),l.addParam("pm","i32"),l.addParam("pr","i32"),l.addLocal("t","i32"),l.addLocal("newt","i32"),l.addLocal("r","i32"),l.addLocal("qq","i32"),l.addLocal("qr","i32"),l.addLocal("newr","i32"),l.addLocal("swp","i32"),l.addLocal("x","i32"),l.addLocal("signt","i32"),l.addLocal("signnewt","i32"),l.addLocal("signx","i32"),n=(m=l.getCodeBuilder()).i32_const(a.alloc(x)),o=m.i32_const(a.alloc(x)),p=m.i32_const(a.alloc(x)),q=m.i32_const(a.alloc(x)),r=m.i32_const(a.alloc(x)),s=m.i32_const(a.alloc(x)),t=m.i32_const(a.alloc(2*x)),u=m.i32_const(a.alloc(x)),l.addCode(m.setLocal("t",n),m.call(v+"_zero",n),m.setLocal("signt",m.i32_const(0))),l.addCode(m.setLocal("r",o),m.call(v+"_copy",m.getLocal("pm"),o)),l.addCode(m.setLocal("newt",p),m.call(v+"_one",p),m.setLocal("signnewt",m.i32_const(0))),l.addCode(m.setLocal("newr",q),m.call(v+"_copy",m.getLocal("px"),q)),l.addCode(m.setLocal("qq",r)),l.addCode(m.setLocal("qr",s)),l.addCode(m.setLocal("x",u)),l.addCode(m.block(m.loop(m.br_if(1,m.call(v+"_isZero",m.getLocal("newr"))),m.call(v+"_div",m.getLocal("r"),m.getLocal("newr"),m.getLocal("qq"),m.getLocal("qr")),m.call(v+"_mul",m.getLocal("qq"),m.getLocal("newt"),t),m.if(m.getLocal("signt"),m.if(m.getLocal("signnewt"),m.if(m.call(v+"_gte",t,m.getLocal("t")),[...m.drop(m.call(v+"_sub",t,m.getLocal("t"),m.getLocal("x"))),...m.setLocal("signx",m.i32_const(0))],[...m.drop(m.call(v+"_sub",m.getLocal("t"),t,m.getLocal("x"))),...m.setLocal("signx",m.i32_const(1))]),[...m.drop(m.call(v+"_add",t,m.getLocal("t"),m.getLocal("x"))),...m.setLocal("signx",m.i32_const(1))]),m.if(m.getLocal("signnewt"),[...m.drop(m.call(v+"_add",t,m.getLocal("t"),m.getLocal("x"))),...m.setLocal("signx",m.i32_const(0))],m.if(m.call(v+"_gte",m.getLocal("t"),t),[...m.drop(m.call(v+"_sub",m.getLocal("t"),t,m.getLocal("x"))),...m.setLocal("signx",m.i32_const(0))],[...m.drop(m.call(v+"_sub",t,m.getLocal("t"),m.getLocal("x"))),...m.setLocal("signx",m.i32_const(1))]))),m.setLocal("swp",m.getLocal("t")),m.setLocal("t",m.getLocal("newt")),m.setLocal("newt",m.getLocal("x")),m.setLocal("x",m.getLocal("swp")),m.setLocal("signt",m.getLocal("signnewt")),m.setLocal("signnewt",m.getLocal("signx")),m.setLocal("swp",m.getLocal("r")),m.setLocal("r",m.getLocal("newr")),m.setLocal("newr",m.getLocal("qr")),m.setLocal("qr",m.getLocal("swp")),m.br(0)))),l.addCode(m.if(m.getLocal("signt"),m.drop(m.call(v+"_sub",m.getLocal("pm"),m.getLocal("t"),m.getLocal("pr"))),m.call(v+"_copy",m.getLocal("t"),m.getLocal("pr")))),a.exportFunction(v+"_copy"),a.exportFunction(v+"_zero"),a.exportFunction(v+"_one"),a.exportFunction(v+"_isZero"),a.exportFunction(v+"_eq"),a.exportFunction(v+"_gte"),a.exportFunction(v+"_add"),a.exportFunction(v+"_sub"),a.exportFunction(v+"_mul"),a.exportFunction(v+"_square"),a.exportFunction(v+"_squareOld"),a.exportFunction(v+"_div"),a.exportFunction(v+"_inverseMod"),v}},9142:a=>{a.exports=function(a,b,c){let d,e,f,g,h,i,j,k,l=8*a.modules[c].n64;return(d=a.addFunction(b+"_buildABC")).addParam("pCoefs","i32"),d.addParam("nCoefs","i32"),d.addParam("pWitness","i32"),d.addParam("pA","i32"),d.addParam("pB","i32"),d.addParam("pC","i32"),d.addParam("offsetOut","i32"),d.addParam("nOut","i32"),d.addParam("offsetWitness","i32"),d.addParam("nWitness","i32"),d.addLocal("it","i32"),d.addLocal("ita","i32"),d.addLocal("itb","i32"),d.addLocal("last","i32"),d.addLocal("m","i32"),d.addLocal("c","i32"),d.addLocal("s","i32"),d.addLocal("pOut","i32"),f=(e=d.getCodeBuilder()).i32_const(a.alloc(l)),d.addCode(e.setLocal("ita",e.getLocal("pA")),e.setLocal("itb",e.getLocal("pB")),e.setLocal("last",e.i32_add(e.getLocal("pA"),e.i32_mul(e.getLocal("nOut"),e.i32_const(l)))),e.block(e.loop(e.br_if(1,e.i32_eq(e.getLocal("ita"),e.getLocal("last"))),e.call(c+"_zero",e.getLocal("ita")),e.call(c+"_zero",e.getLocal("itb")),e.setLocal("ita",e.i32_add(e.getLocal("ita"),e.i32_const(l))),e.setLocal("itb",e.i32_add(e.getLocal("itb"),e.i32_const(l))),e.br(0))),e.setLocal("it",e.getLocal("pCoefs")),e.setLocal("last",e.i32_add(e.getLocal("pCoefs"),e.i32_mul(e.getLocal("nCoefs"),e.i32_const(l+12)))),e.block(e.loop(e.br_if(1,e.i32_eq(e.getLocal("it"),e.getLocal("last"))),e.setLocal("s",e.i32_load(e.getLocal("it"),8)),e.if(e.i32_or(e.i32_lt_u(e.getLocal("s"),e.getLocal("offsetWitness")),e.i32_ge_u(e.getLocal("s"),e.i32_add(e.getLocal("offsetWitness"),e.getLocal("nWitness")))),[...e.setLocal("it",e.i32_add(e.getLocal("it"),e.i32_const(l+12))),...e.br(1)]),e.setLocal("m",e.i32_load(e.getLocal("it"))),e.if(e.i32_eq(e.getLocal("m"),e.i32_const(0)),e.setLocal("pOut",e.getLocal("pA")),e.if(e.i32_eq(e.getLocal("m"),e.i32_const(1)),e.setLocal("pOut",e.getLocal("pB")),[...e.setLocal("it",e.i32_add(e.getLocal("it"),e.i32_const(l+12))),...e.br(1)])),e.setLocal("c",e.i32_load(e.getLocal("it"),4)),e.if(e.i32_or(e.i32_lt_u(e.getLocal("c"),e.getLocal("offsetOut")),e.i32_ge_u(e.getLocal("c"),e.i32_add(e.getLocal("offsetOut"),e.getLocal("nOut")))),[...e.setLocal("it",e.i32_add(e.getLocal("it"),e.i32_const(l+12))),...e.br(1)]),e.setLocal("pOut",e.i32_add(e.getLocal("pOut"),e.i32_mul(e.i32_sub(e.getLocal("c"),e.getLocal("offsetOut")),e.i32_const(l)))),e.call(c+"_mul",e.i32_add(e.getLocal("pWitness"),e.i32_mul(e.i32_sub(e.getLocal("s"),e.getLocal("offsetWitness")),e.i32_const(l))),e.i32_add(e.getLocal("it"),e.i32_const(12)),f),e.call(c+"_add",e.getLocal("pOut"),f,e.getLocal("pOut")),e.setLocal("it",e.i32_add(e.getLocal("it"),e.i32_const(l+12))),e.br(0))),e.setLocal("ita",e.getLocal("pA")),e.setLocal("itb",e.getLocal("pB")),e.setLocal("it",e.getLocal("pC")),e.setLocal("last",e.i32_add(e.getLocal("pA"),e.i32_mul(e.getLocal("nOut"),e.i32_const(l)))),e.block(e.loop(e.br_if(1,e.i32_eq(e.getLocal("ita"),e.getLocal("last"))),e.call(c+"_mul",e.getLocal("ita"),e.getLocal("itb"),e.getLocal("it")),e.setLocal("ita",e.i32_add(e.getLocal("ita"),e.i32_const(l))),e.setLocal("itb",e.i32_add(e.getLocal("itb"),e.i32_const(l))),e.setLocal("it",e.i32_add(e.getLocal("it"),e.i32_const(l))),e.br(0)))),(g=a.addFunction(b+"_joinABC")).addParam("pA","i32"),g.addParam("pB","i32"),g.addParam("pC","i32"),g.addParam("n","i32"),g.addParam("pP","i32"),g.addLocal("ita","i32"),g.addLocal("itb","i32"),g.addLocal("itc","i32"),g.addLocal("itp","i32"),g.addLocal("last","i32"),i=(h=g.getCodeBuilder()).i32_const(a.alloc(l)),g.addCode(h.setLocal("ita",h.getLocal("pA")),h.setLocal("itb",h.getLocal("pB")),h.setLocal("itc",h.getLocal("pC")),h.setLocal("itp",h.getLocal("pP")),h.setLocal("last",h.i32_add(h.getLocal("pA"),h.i32_mul(h.getLocal("n"),h.i32_const(l)))),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("ita"),h.getLocal("last"))),h.call(c+"_mul",h.getLocal("ita"),h.getLocal("itb"),i),h.call(c+"_sub",i,h.getLocal("itc"),h.getLocal("itp")),h.setLocal("ita",h.i32_add(h.getLocal("ita"),h.i32_const(l))),h.setLocal("itb",h.i32_add(h.getLocal("itb"),h.i32_const(l))),h.setLocal("itc",h.i32_add(h.getLocal("itc"),h.i32_const(l))),h.setLocal("itp",h.i32_add(h.getLocal("itp"),h.i32_const(l))),h.br(0)))),(j=a.addFunction(b+"_batchAdd")).addParam("pa","i32"),j.addParam("pb","i32"),j.addParam("n","i32"),j.addParam("pr","i32"),j.addLocal("ita","i32"),j.addLocal("itb","i32"),j.addLocal("itr","i32"),j.addLocal("last","i32"),k=j.getCodeBuilder(),j.addCode(k.setLocal("ita",k.getLocal("pa")),k.setLocal("itb",k.getLocal("pb")),k.setLocal("itr",k.getLocal("pr")),k.setLocal("last",k.i32_add(k.getLocal("pa"),k.i32_mul(k.getLocal("n"),k.i32_const(l)))),k.block(k.loop(k.br_if(1,k.i32_eq(k.getLocal("ita"),k.getLocal("last"))),k.call(c+"_add",k.getLocal("ita"),k.getLocal("itb"),k.getLocal("itr")),k.setLocal("ita",k.i32_add(k.getLocal("ita"),k.i32_const(l))),k.setLocal("itb",k.i32_add(k.getLocal("itb"),k.i32_const(l))),k.setLocal("itr",k.i32_add(k.getLocal("itr"),k.i32_const(l))),k.br(0)))),a.exportFunction(b+"_buildABC"),a.exportFunction(b+"_joinABC"),a.exportFunction(b+"_batchAdd"),b}},9171:(a,b,c)=>{let d=c(4246),e=c(760),f=c(2239),g=c(2123),h=c(7594),i=c(5939),j=c(6340),k=c(2763),l=c(9142),m=c(905),{bitLength:n,modInv:o,isOdd:p,isNegative:q}=c(5856);a.exports=function(a,b){let c,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a$,a_,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b$,b_,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA=b||"bn128";if(a.modules[cA])return cA;let cB=Math.floor((n(0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n-1n)-1)/64)+1,cC=8*cB,cD=2*cC,cE=12*cC,cF=a.alloc(d.bigInt2BytesLE(0x30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001n,cC)),cG=e(a,0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n,"f1m");f(a,0x30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001n,"fr","frm");let cH=a.alloc(d.bigInt2BytesLE(cN(3n),cC)),cI=i(a,"g1m","f1m",cH);j(a,"frm","frm","frm","frm_mul"),k(a,"pol","frm"),l(a,"qap","frm");let cJ=g(a,"f1m_neg","f2m","f1m"),cK=a.alloc([...d.bigInt2BytesLE(cN(0x2b149d40ceb8aaae81be18991be06ac3b5b4c5e559dbefa33267e6dc24a138e5n),cC),...d.bigInt2BytesLE(cN(0x9713b03af0fed4cd2cafadeed8fdf4a74fa084e52d1852e4a2bd0685c315d2n),cC)]),cL=i(a,"g2m","f2m",cK);function cM(b,c){let d=a.addFunction(b);d.addParam("pG","i32"),d.addParam("pFr","i32"),d.addParam("pr","i32");let e=d.getCodeBuilder(),f=e.i32_const(a.alloc(cC));d.addCode(e.call("frm_fromMontgomery",e.getLocal("pFr"),f),e.call(c,e.getLocal("pG"),f,e.i32_const(cC),e.getLocal("pr"))),a.exportFunction(b)}function cN(a){return BigInt(a)*(1n<<BigInt(8*cC))%0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n}cM("g1m_timesFr","g1m_timesScalar"),j(a,"g1m","g1m","frm","g1m_timesFr"),cM("g2m_timesFr","g2m_timesScalar"),j(a,"g2m","g2m","frm","g2m_timesFr"),cM("g1m_timesFrAffine","g1m_timesScalarAffine"),cM("g2m_timesFrAffine","g2m_timesScalarAffine"),m(a,"frm_batchApplyKey","fmr","frm",cC,cC,cC,"frm_mul"),m(a,"g1m_batchApplyKey","g1m","frm",3*cC,3*cC,cC,"g1m_timesFr"),m(a,"g1m_batchApplyKeyMixed","g1m","frm",2*cC,3*cC,cC,"g1m_timesFrAffine"),m(a,"g2m_batchApplyKey","g2m","frm",2*cC*3,3*cC*2,cC,"g2m_timesFr"),m(a,"g2m_batchApplyKeyMixed","g2m","frm",2*cC*2,3*cC*2,cC,"g2m_timesFrAffine");let cO=a.alloc([...d.bigInt2BytesLE(cN(1n),cC),...d.bigInt2BytesLE(cN(2n),cC),...d.bigInt2BytesLE(cN(1n),cC)]),cP=a.alloc([...d.bigInt2BytesLE(cN(0n),cC),...d.bigInt2BytesLE(cN(1n),cC),...d.bigInt2BytesLE(cN(0n),cC)]),cQ=[[0x1800deef121f1e76426a00665e5c4479674322d4f75edadd46debd5cd992f6edn,0x198e9393920d483a7260bfb731fb5d25f1aa493335a9e71297e485b7aef312c2n],[0x12c85ea5db8c6deb4aab71808dcb408fe3d1e7690c43d37b4ce6cc0166fa7daan,0x90689d0585ff075ec9e99ad690c3395bc4b313370b38ef355acdadcd122975bn],[1n,0n]],cR=a.alloc([...d.bigInt2BytesLE(cN(cQ[0][0]),cC),...d.bigInt2BytesLE(cN(cQ[0][1]),cC),...d.bigInt2BytesLE(cN(cQ[1][0]),cC),...d.bigInt2BytesLE(cN(cQ[1][1]),cC),...d.bigInt2BytesLE(cN(cQ[2][0]),cC),...d.bigInt2BytesLE(cN(cQ[2][1]),cC)]),cS=[[0n,0n],[1n,0n],[0n,0n]],cT=a.alloc([...d.bigInt2BytesLE(cN(cS[0][0]),cC),...d.bigInt2BytesLE(cN(cS[0][1]),cC),...d.bigInt2BytesLE(cN(cS[1][0]),cC),...d.bigInt2BytesLE(cN(cS[1][1]),cC),...d.bigInt2BytesLE(cN(cS[2][0]),cC),...d.bigInt2BytesLE(cN(cS[2][1]),cC)]),cU=a.alloc([...d.bigInt2BytesLE(cN(1),cC),...d.bigInt2BytesLE(cN(0),cC),...d.bigInt2BytesLE(cN(0),cC),...d.bigInt2BytesLE(cN(0),cC),...d.bigInt2BytesLE(cN(0),cC),...d.bigInt2BytesLE(cN(0),cC),...d.bigInt2BytesLE(cN(0),cC),...d.bigInt2BytesLE(cN(0),cC),...d.bigInt2BytesLE(cN(0),cC),...d.bigInt2BytesLE(cN(0),cC),...d.bigInt2BytesLE(cN(0),cC),...d.bigInt2BytesLE(cN(0),cC)]),cV=a.alloc([...d.bigInt2BytesLE(cN(9),cC),...d.bigInt2BytesLE(cN(1),cC)]),cW=a.alloc([...d.bigInt2BytesLE(cN(o(2n,0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n)),cC),...d.bigInt2BytesLE(0n,cC)]),cX=a.alloc([...d.bigInt2BytesLE(cN(0x2b149d40ceb8aaae81be18991be06ac3b5b4c5e559dbefa33267e6dc24a138e5n),cC),...d.bigInt2BytesLE(cN(0x9713b03af0fed4cd2cafadeed8fdf4a74fa084e52d1852e4a2bd0685c315d2n),cC)]);(c=a.addFunction(cA+"_mulNR6")).addParam("x","i32"),c.addParam("pr","i32"),r=c.getCodeBuilder(),c.addCode(r.call(cJ+"_mul",r.i32_const(cV),r.getLocal("x"),r.getLocal("pr")));let cY=h(a,cA+"_mulNR6","f6m","f2m");(s=a.addFunction(cA+"_mulNR12")).addParam("x","i32"),s.addParam("pr","i32"),t=s.getCodeBuilder(),s.addCode(t.call(cJ+"_mul",t.i32_const(cV),t.i32_add(t.getLocal("x"),t.i32_const(4*cC)),t.getLocal("pr")),t.call(cJ+"_copy",t.getLocal("x"),t.i32_add(t.getLocal("pr"),t.i32_const(2*cC))),t.call(cJ+"_copy",t.i32_add(t.getLocal("x"),t.i32_const(2*cC)),t.i32_add(t.getLocal("pr"),t.i32_const(4*cC))));let cZ=g(a,cA+"_mulNR12","ftm",cY),c$=function(a){let b=0x19d797039be763ba8n,c=[];for(;b>0n;)p(b)?c.push(1):c.push(0),b>>=1n;return c}(0x19d797039be763ba8n),c_=a.alloc(c$),c0=3*cD,c1=c$.length-1,c2=c$.reduce((a,b)=>a+ +(0!=b),0),c3=6*cC,c4=3*cC*2+(c2+c1+1)*c0;a.modules[cA]={n64:cB,pG1gen:cO,pG1zero:cP,pG1b:cH,pG2gen:cR,pG2zero:cT,pG2b:cK,pq:a.modules.f1m.pq,pr:cF,pOneT:cU,prePSize:c3,preQSize:c4,r:0x30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001n.toString(),q:0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n.toString()};let c5=a.alloc(c3),c6=a.alloc(c4);(u=a.addFunction(cA+"_prepAddStep")).addParam("pQ","i32"),u.addParam("pR","i32"),u.addParam("pCoef","i32"),w=(v=u.getCodeBuilder()).getLocal("pQ"),x=v.i32_add(v.getLocal("pQ"),v.i32_const(cD)),y=v.getLocal("pR"),z=v.i32_add(v.getLocal("pR"),v.i32_const(cD)),A=v.i32_add(v.getLocal("pR"),v.i32_const(2*cD)),B=v.getLocal("pCoef"),C=v.i32_add(v.getLocal("pCoef"),v.i32_const(cD)),D=v.i32_add(v.getLocal("pCoef"),v.i32_const(2*cD)),E=v.i32_const(a.alloc(cD)),F=v.i32_const(a.alloc(cD)),G=v.i32_const(a.alloc(cD)),H=v.i32_const(a.alloc(cD)),I=v.i32_const(a.alloc(cD)),J=v.i32_const(a.alloc(cD)),K=v.i32_const(a.alloc(cD)),u.addCode(v.call(cJ+"_mul",w,A,C),v.call(cJ+"_sub",y,C,C),v.call(cJ+"_mul",x,A,E),v.call(cJ+"_sub",z,E,E),v.call(cJ+"_square",C,F),v.call(cJ+"_square",E,G),v.call(cJ+"_mul",C,F,H),v.call(cJ+"_mul",y,F,I),v.call(cJ+"_add",I,I,K),v.call(cJ+"_mul",A,G,J),v.call(cJ+"_add",H,J,J),v.call(cJ+"_sub",J,K,J),v.call(cJ+"_mul",C,J,y),v.call(cJ+"_mul",H,z,z),v.call(cJ+"_sub",I,J,K),v.call(cJ+"_mul",E,K,K),v.call(cJ+"_sub",K,z,z),v.call(cJ+"_mul",A,H,A),v.call(cJ+"_mul",C,x,K),v.call(cJ+"_mul",E,w,B),v.call(cJ+"_sub",B,K,B),v.call(cJ+"_mul",B,v.i32_const(cV),B),v.call(cJ+"_neg",E,D)),(L=a.addFunction(cA+"_prepDblStep")).addParam("pR","i32"),L.addParam("pCoef","i32"),N=(M=L.getCodeBuilder()).getLocal("pR"),O=M.i32_add(M.getLocal("pR"),M.i32_const(cD)),P=M.i32_add(M.getLocal("pR"),M.i32_const(2*cD)),Q=M.getLocal("pCoef"),R=M.i32_add(M.getLocal("pCoef"),M.i32_const(cD)),S=M.i32_add(M.getLocal("pCoef"),M.i32_const(2*cD)),T=M.i32_const(a.alloc(cD)),U=M.i32_const(a.alloc(cD)),V=M.i32_const(a.alloc(cD)),W=M.i32_const(a.alloc(cD)),X=M.i32_const(a.alloc(cD)),Y=M.i32_const(a.alloc(cD)),Z=M.i32_const(a.alloc(cD)),$=M.i32_const(a.alloc(cD)),_=M.i32_const(a.alloc(cD)),aa=M.i32_const(a.alloc(cD)),ab=M.i32_const(a.alloc(cD)),ac=M.i32_const(a.alloc(cD)),L.addCode(M.call(cJ+"_mul",O,M.i32_const(cW),T),M.call(cJ+"_mul",N,T,T),M.call(cJ+"_square",O,U),M.call(cJ+"_square",P,V),M.call(cJ+"_add",V,V,W),M.call(cJ+"_add",W,V,W),M.call(cJ+"_mul",M.i32_const(cX),W,X),M.call(cJ+"_add",X,X,Y),M.call(cJ+"_add",X,Y,Y),M.call(cJ+"_add",U,Y,Z),M.call(cJ+"_mul",Z,M.i32_const(cW),Z),M.call(cJ+"_add",U,V,ac),M.call(cJ+"_add",O,P,$),M.call(cJ+"_square",$,$),M.call(cJ+"_sub",$,ac,$),M.call(cJ+"_sub",X,U,_),M.call(cJ+"_square",N,aa),M.call(cJ+"_square",X,ab),M.call(cJ+"_sub",U,Y,ac),M.call(cJ+"_mul",T,ac,N),M.call(cJ+"_add",ab,ab,ac),M.call(cJ+"_add",ab,ac,ac),M.call(cJ+"_square",Z,O),M.call(cJ+"_sub",O,ac,O),M.call(cJ+"_mul",U,$,P),M.call(cJ+"_mul",M.i32_const(cV),_,Q),M.call(cJ+"_neg",$,R),M.call(cJ+"_add",aa,aa,S),M.call(cJ+"_add",aa,S,S)),(ad=a.addFunction(cA+"_prepareG1")).addParam("pP","i32"),ad.addParam("ppreP","i32"),ae=ad.getCodeBuilder(),ad.addCode(ae.call(cI+"_normalize",ae.getLocal("pP"),ae.getLocal("ppreP"))),(af=a.addFunction(cA+"_mulByQ")).addParam("p1","i32"),af.addParam("pr","i32"),ah=(ag=af.getCodeBuilder()).getLocal("p1"),ai=ag.i32_add(ag.getLocal("p1"),ag.i32_const(cD)),aj=ag.i32_add(ag.getLocal("p1"),ag.i32_const(2*cD)),ak=ag.getLocal("pr"),al=ag.i32_add(ag.getLocal("pr"),ag.i32_const(cD)),am=ag.i32_add(ag.getLocal("pr"),ag.i32_const(2*cD)),an=ag.i32_const(a.alloc([...d.bigInt2BytesLE(cN("21575463638280843010398324269430826099269044274347216827212613867836435027261"),cC),...d.bigInt2BytesLE(cN("10307601595873709700152284273816112264069230130616436755625194854815875713954"),cC)])),ao=ag.i32_const(a.alloc([...d.bigInt2BytesLE(cN("2821565182194536844548159561693502659359617185244120367078079554186484126554"),cC),...d.bigInt2BytesLE(cN("3505843767911556378687030309984248845540243509899259641013678093033130930403"),cC)])),af.addCode(ag.call(cJ+"_conjugate",ah,ak),ag.call(cJ+"_mul",an,ak,ak),ag.call(cJ+"_conjugate",ai,al),ag.call(cJ+"_mul",ao,al,al),ag.call(cJ+"_conjugate",aj,am)),(ap=a.addFunction(cA+"_prepareG2")).addParam("pQ","i32"),ap.addParam("ppreQ","i32"),ap.addLocal("pCoef","i32"),ap.addLocal("i","i32"),ar=(aq=ap.getCodeBuilder()).getLocal("pQ"),as=a.alloc(3*cD),at=aq.i32_const(as),au=aq.i32_const(as),av=aq.i32_const(as+cD),aw=aq.i32_const(as+2*cD),ax=aq.i32_add(aq.getLocal("ppreQ"),aq.i32_const(0)),ay=aq.i32_add(aq.getLocal("ppreQ"),aq.i32_const(cD)),az=a.alloc(3*cD),aA=aq.i32_const(az),aB=a.alloc(3*cD),aC=aq.i32_const(aB),aD=aq.i32_const(aB+cD),ap.addCode(aq.call(cL+"_normalize",ar,ax),aq.call(cJ+"_copy",ax,au),aq.call(cJ+"_copy",ay,av),aq.call(cJ+"_one",aw)),ap.addCode(aq.setLocal("pCoef",aq.i32_add(aq.getLocal("ppreQ"),aq.i32_const(3*cD))),aq.setLocal("i",aq.i32_const(c$.length-2)),aq.block(aq.loop(aq.call(cA+"_prepDblStep",at,aq.getLocal("pCoef")),aq.setLocal("pCoef",aq.i32_add(aq.getLocal("pCoef"),aq.i32_const(c0))),aq.if(aq.i32_load8_s(aq.getLocal("i"),c_),[...aq.call(cA+"_prepAddStep",ax,at,aq.getLocal("pCoef")),...aq.setLocal("pCoef",aq.i32_add(aq.getLocal("pCoef"),aq.i32_const(c0)))]),aq.br_if(1,aq.i32_eqz(aq.getLocal("i"))),aq.setLocal("i",aq.i32_sub(aq.getLocal("i"),aq.i32_const(1))),aq.br(0)))),ap.addCode(aq.call(cA+"_mulByQ",ax,aA),aq.call(cA+"_mulByQ",aA,aC)),ap.addCode(aq.call(cJ+"_neg",aD,aD),aq.call(cA+"_prepAddStep",aA,at,aq.getLocal("pCoef")),aq.setLocal("pCoef",aq.i32_add(aq.getLocal("pCoef"),aq.i32_const(c0))),aq.call(cA+"_prepAddStep",aC,at,aq.getLocal("pCoef")),aq.setLocal("pCoef",aq.i32_add(aq.getLocal("pCoef"),aq.i32_const(c0)))),(aE=a.addFunction(cA+"__mulBy024")).addParam("pEll0","i32"),aE.addParam("pEllVW","i32"),aE.addParam("pEllVV","i32"),aE.addParam("pR","i32"),aG=(aF=aE.getCodeBuilder()).getLocal("pEll0"),aH=aF.getLocal("pEllVV"),aI=aF.getLocal("pEllVW"),aJ=aF.getLocal("pR"),aK=aF.i32_add(aF.getLocal("pR"),aF.i32_const(2*cC)),aL=aF.i32_add(aF.getLocal("pR"),aF.i32_const(4*cC)),aM=aF.i32_add(aF.getLocal("pR"),aF.i32_const(6*cC)),aN=aF.i32_add(aF.getLocal("pR"),aF.i32_const(8*cC)),aO=aF.i32_add(aF.getLocal("pR"),aF.i32_const(10*cC)),aP=aF.i32_const(a.alloc(cD)),aQ=aF.i32_const(a.alloc(cD)),aR=aF.i32_const(a.alloc(cD)),aS=aF.i32_const(a.alloc(cD)),aT=aF.i32_const(a.alloc(cD)),aU=aF.i32_const(a.alloc(cD)),aV=aF.i32_const(a.alloc(cD)),aW=aF.i32_const(a.alloc(cD)),aX=aF.i32_const(a.alloc(cD)),aY=aF.i32_const(a.alloc(cD)),aZ=aF.i32_const(a.alloc(cD)),aE.addCode(aF.call(cJ+"_mul",aJ,aG,aV),aF.call(cJ+"_mul",aL,aH,aW),aF.call(cJ+"_mul",aN,aI,aX),aF.call(cJ+"_add",aJ,aN,aR),aF.call(cJ+"_add",aJ,aL,aQ),aF.call(cJ+"_add",aK,aM,aS),aF.call(cJ+"_add",aS,aO,aS),aF.call(cJ+"_mul",aK,aH,aY),aF.call(cJ+"_add",aY,aX,aT),aF.call(cJ+"_mul",aF.i32_const(cV),aT,aU),aF.call(cJ+"_add",aU,aV,aJ),aF.call(cJ+"_mul",aO,aI,aT),aF.call(cJ+"_add",aY,aT,aY),aF.call(cJ+"_add",aT,aW,aT),aF.call(cJ+"_mul",aF.i32_const(cV),aT,aU),aF.call(cJ+"_mul",aK,aG,aT),aF.call(cJ+"_add",aY,aT,aY),aF.call(cJ+"_add",aU,aT,aK),aF.call(cJ+"_add",aG,aH,aP),aF.call(cJ+"_mul",aQ,aP,aT),aF.call(cJ+"_add",aV,aW,aZ),aF.call(cJ+"_sub",aT,aZ,aT),aF.call(cJ+"_mul",aM,aI,aU),aF.call(cJ+"_add",aY,aU,aY),aF.call(cJ+"_add",aL,aN,aP),aF.call(cJ+"_add",aT,aU,aL),aF.call(cJ+"_add",aH,aI,aQ),aF.call(cJ+"_mul",aQ,aP,aT),aF.call(cJ+"_add",aW,aX,aZ),aF.call(cJ+"_sub",aT,aZ,aT),aF.call(cJ+"_mul",aF.i32_const(cV),aT,aU),aF.call(cJ+"_mul",aM,aG,aT),aF.call(cJ+"_add",aY,aT,aY),aF.call(cJ+"_add",aU,aT,aM),aF.call(cJ+"_mul",aO,aH,aT),aF.call(cJ+"_add",aY,aT,aY),aF.call(cJ+"_mul",aF.i32_const(cV),aT,aU),aF.call(cJ+"_add",aG,aI,aP),aF.call(cJ+"_mul",aR,aP,aT),aF.call(cJ+"_add",aV,aX,aZ),aF.call(cJ+"_sub",aT,aZ,aT),aF.call(cJ+"_add",aU,aT,aN),aF.call(cJ+"_add",aG,aH,aP),aF.call(cJ+"_add",aP,aI,aP),aF.call(cJ+"_mul",aS,aP,aT),aF.call(cJ+"_sub",aT,aY,aO)),(a$=a.addFunction(cA+"__mulBy024Old")).addParam("pEll0","i32"),a$.addParam("pEllVW","i32"),a$.addParam("pEllVV","i32"),a$.addParam("pR","i32"),a0=(a_=a$.getCodeBuilder()).getLocal("pEll0"),a1=a_.getLocal("pEllVV"),a2=a_.getLocal("pEllVW"),a3=a_.getLocal("pR"),a4=a.alloc(cE),a5=a_.i32_const(a4),a6=a_.i32_const(a4),a7=a_.i32_const(a4+cD),a8=a_.i32_const(a4+2*cD),a9=a_.i32_const(a4+3*cD),ba=a_.i32_const(a4+4*cD),bb=a_.i32_const(a4+5*cD),a$.addCode(a_.call(cJ+"_copy",a0,a6),a_.call(cJ+"_zero",a7),a_.call(cJ+"_copy",a1,a8),a_.call(cJ+"_zero",a9),a_.call(cJ+"_copy",a2,ba),a_.call(cJ+"_zero",bb),a_.call(cZ+"_mul",a5,a3,a3)),(bc=a.addFunction(cA+"_millerLoop")).addParam("ppreP","i32"),bc.addParam("ppreQ","i32"),bc.addParam("r","i32"),bc.addLocal("pCoef","i32"),bc.addLocal("i","i32"),be=(bd=bc.getCodeBuilder()).getLocal("ppreP"),bf=bd.i32_add(bd.getLocal("ppreP"),bd.i32_const(cC)),bg=bd.getLocal("pCoef"),bh=bd.i32_add(bd.getLocal("pCoef"),bd.i32_const(cD)),bi=bd.i32_add(bd.getLocal("pCoef"),bd.i32_const(2*cD)),bj=a.alloc(cD),bk=bd.i32_const(bj),bl=a.alloc(cD),bm=bd.i32_const(bl),bn=bd.getLocal("r"),bc.addCode(bd.call(cZ+"_one",bn),bd.setLocal("pCoef",bd.i32_add(bd.getLocal("ppreQ"),bd.i32_const(3*cD))),bd.setLocal("i",bd.i32_const(c$.length-2)),bd.block(bd.loop(bd.call(cZ+"_square",bn,bn),bd.call(cJ+"_mul1",bh,bf,bk),bd.call(cJ+"_mul1",bi,be,bm),bd.call(cA+"__mulBy024",bg,bk,bm,bn),bd.setLocal("pCoef",bd.i32_add(bd.getLocal("pCoef"),bd.i32_const(c0))),bd.if(bd.i32_load8_s(bd.getLocal("i"),c_),[...bd.call(cJ+"_mul1",bh,bf,bk),...bd.call(cJ+"_mul1",bi,be,bm),...bd.call(cA+"__mulBy024",bg,bk,bm,bn),...bd.setLocal("pCoef",bd.i32_add(bd.getLocal("pCoef"),bd.i32_const(c0)))]),bd.br_if(1,bd.i32_eqz(bd.getLocal("i"))),bd.setLocal("i",bd.i32_sub(bd.getLocal("i"),bd.i32_const(1))),bd.br(0)))),bc.addCode(bd.call(cJ+"_mul1",bh,bf,bk),bd.call(cJ+"_mul1",bi,be,bm),bd.call(cA+"__mulBy024",bg,bk,bm,bn),bd.setLocal("pCoef",bd.i32_add(bd.getLocal("pCoef"),bd.i32_const(c0))),bd.call(cJ+"_mul1",bh,bf,bk),bd.call(cJ+"_mul1",bi,be,bm),bd.call(cA+"__mulBy024",bg,bk,bm,bn),bd.setLocal("pCoef",bd.i32_add(bd.getLocal("pCoef"),bd.i32_const(c0))));for(let b=0;b<10;b++)!function(b){let c=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0x1284b71c2865a7dfe8b99fdd76e68b605c521e08292f2176d60b35dadcc9e470n,0x246996f3b4fae7e6a6327cfe12150b8e747992778eeec7e5ca5cf05f80f362acn],[0x30644e72e131a0295e6dd9e7e0acccb0c28f069fbb966e3de4bd44e5607cfd49n,0n],[0x19dc81cfcc82e4bbefe9608cd0acaa90894cb38dbe55d24ae86f7d391ed4a67fn,0xabf8b60be77d7306cbeee33576139d7f03a5e397d439ec7694aa2bf4c0c101n],[0x30644e72e131a0295e6dd9e7e0acccb0c28f069fbb966e3de4bd44e5607cfd48n,0n],[0x757cab3a41d3cdc072fc0af59c61f302cfa95859526b0d41264475e420ac20fn,0xca6b035381e35b618e9b79ba4e2606ca20b7dfd71573c93e85845e34c4a5b9cn],[0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd46n,0n],[0x1ddf9756b8cbf849cf96a5d90a9accfd3b2f4c893f42a9166615563bfbb318d7n,0xbfab77f2c36b843121dc8b86f6c4ccf2307d819d98302a771c39bb757899a9bn],[0x59e26bcea0d48bacd4f263f1acdb5c4f5763473177fffffen,0n],[0x1687cca314aebb6dc866e529b0d4adcd0e34b703aa1bf84253b10eddb9a856c8n,0x2fb855bcd54a22b6b18456d34c0b44c0187dc4add09d90a0c58be1eae3bc3c46n],[0x59e26bcea0d48bacd4f263f1acdb5c4f5763473177ffffffn,0n],[0x290c83bf3d14634db120850727bb392d6a86d50bd34b19b929bc44b896723b38n,0x23bd9e3da9136a739f668e1adc9ef7f0f575ec93f71a8df953c846338c32a1abn]]],e=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0x2fb347984f7911f74c0bec3cf559b143b78cc310c2c3330c99e39557176f553dn,0x16c9e55061ebae204ba4cc8bd75a079432ae2a1d0b7c9dce1665d51c640fcba2n],[0x30644e72e131a0295e6dd9e7e0acccb0c28f069fbb966e3de4bd44e5607cfd48n,0n],[0x856e078b755ef0abaff1c77959f25ac805ffd3d5d6942d37b746ee87bdcfb6dn,0x4f1de41b3d1766fa9f30e6dec26094f0fdf31bf98ff2631380cab2baaa586den],[0x59e26bcea0d48bacd4f263f1acdb5c4f5763473177fffffen,0n],[0x28be74d4bb943f51699582b87809d9caf71614d4b0b71f3a62e913ee1dada9e4n,0x14a88ae0cb747b99c2b86abcbe01477a54f40eb4c3f6068dedae0bcec9c7aac7n]],[[1n,0n],[0x5b54f5e64eea80180f3c0b75a181e84d33365f7be94ec72848a1f55921ea762n,0x2c145edbe7fd8aee9f3a80b03b0b1c923685d2ea1bdec763c13b4711cd2b8126n],[0x59e26bcea0d48bacd4f263f1acdb5c4f5763473177fffffen,0n],[0xbc58c6611c08dab19bee0f7b5b2444ee633094575b06bcb0e1a92bc3ccbf066n,0x23d5e999e1910a12feb0f6ef0cd21d04a44a9e08737f96e55fe3ed9d730c239fn],[0x30644e72e131a0295e6dd9e7e0acccb0c28f069fbb966e3de4bd44e5607cfd48n,0n],[0x1ee972ae6a826a7d1d9da40771b6f589de1afb54342c724fa97bda050992657fn,0x10de546ff8d4ab51d2b513cdbb25772454326430418536d15721e37e70c255c9n]]],f=a.addFunction(cA+"__frobeniusMap"+b);f.addParam("x","i32"),f.addParam("r","i32");let g=f.getCodeBuilder();for(let h=0;h<6;h++){let i=0==h?g.getLocal("x"):g.i32_add(g.getLocal("x"),g.i32_const(h*cD)),j=g.i32_add(g.getLocal("x"),g.i32_const(h*cD+cC)),k=0==h?g.getLocal("r"):g.i32_add(g.getLocal("r"),g.i32_const(h*cD)),l=g.i32_add(g.getLocal("r"),g.i32_const(h*cD+cC)),m=function(a,b){let c=BigInt(a[0]),d=BigInt(a[1]),e=BigInt(b[0]),f=BigInt(b[1]),g=[(c*e-d*f)%0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n,(c*f+d*e)%0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n];return q(g[0])&&(g[0]=g[0]+0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n),g}(c[Math.floor(h/3)][b%12],e[h%3][b%6]),n=a.alloc([...d.bigInt2BytesLE(cN(m[0]),32),...d.bigInt2BytesLE(cN(m[1]),32)]);b%2==1?f.addCode(g.call(cG+"_copy",i,k),g.call(cG+"_neg",j,l),g.call(cJ+"_mul",k,g.i32_const(n),k)):f.addCode(g.call(cJ+"_mul",i,g.i32_const(n),k))}}(b),a.exportFunction(cA+"__frobeniusMap"+b);(bo=a.addFunction(cA+"_finalExponentiationOld")).addParam("x","i32"),bo.addParam("r","i32"),bp=a.alloc(d.bigInt2BytesLE(0x2f4b6dc97020fddadf107d20bc842d43bf6369b1ff6a1c71015f3f7be2e1e30a73bb94fec0daf15466b2383a5d3ec3d15ad524d8f70c54efee1bd8c3b21377e563a09a1b705887e72eceaddea3790364a61f676baaf977870e88d5c6c8fef0781361e443ae77f5b63a2a2264487f2940a8b1ddb3d15062cd0fb2015dfc6668449aed3cc48a82d0d602d268c7daab6a41294c0cc4ebe5664568dfc50e1648a45a4a1e3a5195846a3ed011a337a02088ec80e0ebae8755cfe107acf3aafb40494e406f804216bb10cf430b0f37856b42db8dc5514724ee93dfb10826f0dd4a0364b9580291d2cd65664814fde37ca80bb4ea44eacc5e641bbadf423f9a2cbf813b8d145da90029baee7ddadda71c7f3811c4105262945bba1668c3be69a3c230974d83561841d766f9c9d570bb7fbe04c7e8a6c3c760c0de81def35692da361102b6b9b2b918837fa97896e84abb40a4efb7e54523a486964b64ca86f120n,352)),bq=bo.getCodeBuilder(),bo.addCode(bq.call(cZ+"_exp",bq.getLocal("x"),bq.i32_const(bp),bq.i32_const(352),bq.getLocal("r"))),(br=a.addFunction(cA+"__finalExponentiationFirstChunk")).addParam("x","i32"),br.addParam("r","i32"),bt=(bs=br.getCodeBuilder()).getLocal("x"),bu=bs.i32_add(bt,bs.i32_const(6*cC)),bv=bs.getLocal("r"),bw=a.alloc(cE),bx=bs.i32_const(bw),by=bs.i32_const(bw+6*cC),bz=bs.i32_const(a.alloc(cE)),bA=bs.i32_const(a.alloc(cE)),bB=bs.i32_const(a.alloc(cE)),br.addCode(bs.call(cY+"_copy",bt,bx),bs.call(cY+"_neg",bu,by),bs.call(cZ+"_inverse",bt,bz),bs.call(cZ+"_mul",bx,bz,bA),bs.call(cA+"__frobeniusMap2",bA,bB),bs.call(cZ+"_mul",bA,bB,bv)),(bC=a.addFunction(cA+"__cyclotomicSquare")).addParam("x","i32"),bC.addParam("r","i32"),bE=(bD=bC.getCodeBuilder()).getLocal("x"),bF=bD.i32_add(bD.getLocal("x"),bD.i32_const(cD)),bG=bD.i32_add(bD.getLocal("x"),bD.i32_const(2*cD)),bH=bD.i32_add(bD.getLocal("x"),bD.i32_const(3*cD)),bI=bD.i32_add(bD.getLocal("x"),bD.i32_const(4*cD)),bJ=bD.i32_add(bD.getLocal("x"),bD.i32_const(5*cD)),bK=bD.getLocal("r"),bL=bD.i32_add(bD.getLocal("r"),bD.i32_const(cD)),bM=bD.i32_add(bD.getLocal("r"),bD.i32_const(2*cD)),bN=bD.i32_add(bD.getLocal("r"),bD.i32_const(3*cD)),bO=bD.i32_add(bD.getLocal("r"),bD.i32_const(4*cD)),bP=bD.i32_add(bD.getLocal("r"),bD.i32_const(5*cD)),bQ=bD.i32_const(a.alloc(cD)),bR=bD.i32_const(a.alloc(cD)),bS=bD.i32_const(a.alloc(cD)),bT=bD.i32_const(a.alloc(cD)),bU=bD.i32_const(a.alloc(cD)),bV=bD.i32_const(a.alloc(cD)),bW=bD.i32_const(a.alloc(cD)),bX=bD.i32_const(a.alloc(cD)),bC.addCode(bD.call(cJ+"_mul",bE,bI,bW),bD.call(cJ+"_mul",bI,bD.i32_const(cV),bQ),bD.call(cJ+"_add",bE,bQ,bQ),bD.call(cJ+"_add",bE,bI,bX),bD.call(cJ+"_mul",bX,bQ,bQ),bD.call(cJ+"_mul",bD.i32_const(cV),bW,bX),bD.call(cJ+"_add",bW,bX,bX),bD.call(cJ+"_sub",bQ,bX,bQ),bD.call(cJ+"_add",bW,bW,bR),bD.call(cJ+"_mul",bH,bG,bW),bD.call(cJ+"_mul",bG,bD.i32_const(cV),bS),bD.call(cJ+"_add",bH,bS,bS),bD.call(cJ+"_add",bH,bG,bX),bD.call(cJ+"_mul",bX,bS,bS),bD.call(cJ+"_mul",bD.i32_const(cV),bW,bX),bD.call(cJ+"_add",bW,bX,bX),bD.call(cJ+"_sub",bS,bX,bS),bD.call(cJ+"_add",bW,bW,bT),bD.call(cJ+"_mul",bF,bJ,bW),bD.call(cJ+"_mul",bJ,bD.i32_const(cV),bU),bD.call(cJ+"_add",bF,bU,bU),bD.call(cJ+"_add",bF,bJ,bX),bD.call(cJ+"_mul",bX,bU,bU),bD.call(cJ+"_mul",bD.i32_const(cV),bW,bX),bD.call(cJ+"_add",bW,bX,bX),bD.call(cJ+"_sub",bU,bX,bU),bD.call(cJ+"_add",bW,bW,bV),bD.call(cJ+"_sub",bQ,bE,bK),bD.call(cJ+"_add",bK,bK,bK),bD.call(cJ+"_add",bQ,bK,bK),bD.call(cJ+"_add",bR,bI,bO),bD.call(cJ+"_add",bO,bO,bO),bD.call(cJ+"_add",bR,bO,bO),bD.call(cJ+"_mul",bV,bD.i32_const(cV),bX),bD.call(cJ+"_add",bX,bH,bN),bD.call(cJ+"_add",bN,bN,bN),bD.call(cJ+"_add",bX,bN,bN),bD.call(cJ+"_sub",bU,bG,bM),bD.call(cJ+"_add",bM,bM,bM),bD.call(cJ+"_add",bU,bM,bM),bD.call(cJ+"_sub",bS,bF,bL),bD.call(cJ+"_add",bL,bL,bL),bD.call(cJ+"_add",bS,bL,bL),bD.call(cJ+"_add",bT,bJ,bP),bD.call(cJ+"_add",bP,bP,bP),bD.call(cJ+"_add",bT,bP,bP)),bY=(function(a){let b=0x44e992b44a6909f1n,c=[];for(;b>0n;){if(p(b)){let a=2-Number(b%4n);c.push(a),b-=BigInt(a)}else c.push(0);b>>=1n}return c})(0x44e992b44a6909f1n).map(a=>-1==a?255:a),bZ=a.alloc(bY),(b$=a.addFunction(cA+"__cyclotomicExp_w0")).addParam("x","i32"),b$.addParam("r","i32"),b$.addLocal("bit","i32"),b$.addLocal("i","i32"),b0=(b_=b$.getCodeBuilder()).getLocal("x"),b1=b_.getLocal("r"),b2=b_.i32_const(a.alloc(cE)),b$.addCode(b_.call(cZ+"_conjugate",b0,b2),b_.call(cZ+"_one",b1),b_.if(b_.teeLocal("bit",b_.i32_load8_s(b_.i32_const(bY.length-1),bZ)),b_.if(b_.i32_eq(b_.getLocal("bit"),b_.i32_const(1)),b_.call(cZ+"_mul",b1,b0,b1),b_.call(cZ+"_mul",b1,b2,b1))),b_.setLocal("i",b_.i32_const(bY.length-2)),b_.block(b_.loop(b_.call(cA+"__cyclotomicSquare",b1,b1),b_.if(b_.teeLocal("bit",b_.i32_load8_s(b_.getLocal("i"),bZ)),b_.if(b_.i32_eq(b_.getLocal("bit"),b_.i32_const(1)),b_.call(cZ+"_mul",b1,b0,b1),b_.call(cZ+"_mul",b1,b2,b1))),b_.br_if(1,b_.i32_eqz(b_.getLocal("i"))),b_.setLocal("i",b_.i32_sub(b_.getLocal("i"),b_.i32_const(1))),b_.br(0)))),(b3=a.addFunction(cA+"__finalExponentiationLastChunk")).addParam("x","i32"),b3.addParam("r","i32"),b5=(b4=b3.getCodeBuilder()).getLocal("x"),b6=b4.getLocal("r"),b7=b4.i32_const(a.alloc(cE)),b8=b4.i32_const(a.alloc(cE)),b9=b4.i32_const(a.alloc(cE)),ca=b4.i32_const(a.alloc(cE)),cb=b4.i32_const(a.alloc(cE)),cc=b4.i32_const(a.alloc(cE)),cd=b4.i32_const(a.alloc(cE)),ce=b4.i32_const(a.alloc(cE)),cf=b4.i32_const(a.alloc(cE)),cg=b4.i32_const(a.alloc(cE)),ch=b4.i32_const(a.alloc(cE)),ci=b4.i32_const(a.alloc(cE)),cj=b4.i32_const(a.alloc(cE)),ck=b4.i32_const(a.alloc(cE)),cl=b4.i32_const(a.alloc(cE)),cm=b4.i32_const(a.alloc(cE)),cn=b4.i32_const(a.alloc(cE)),co=b4.i32_const(a.alloc(cE)),cp=b4.i32_const(a.alloc(cE)),cq=b4.i32_const(a.alloc(cE)),cr=b4.i32_const(a.alloc(cE)),b3.addCode(b4.call(cA+"__cyclotomicExp_w0",b5,b7),b4.call(cZ+"_conjugate",b7,b7),b4.call(cA+"__cyclotomicSquare",b7,b8),b4.call(cA+"__cyclotomicSquare",b8,b9),b4.call(cZ+"_mul",b9,b8,ca),b4.call(cA+"__cyclotomicExp_w0",ca,cb),b4.call(cZ+"_conjugate",cb,cb),b4.call(cA+"__cyclotomicSquare",cb,cc),b4.call(cA+"__cyclotomicExp_w0",cc,cd),b4.call(cZ+"_conjugate",cd,cd),b4.call(cZ+"_conjugate",ca,ce),b4.call(cZ+"_conjugate",cd,cf),b4.call(cZ+"_mul",cf,cb,cg),b4.call(cZ+"_mul",cg,ce,ch),b4.call(cZ+"_mul",ch,b8,ci),b4.call(cZ+"_mul",ch,cb,cj),b4.call(cZ+"_mul",cj,b5,ck),b4.call(cA+"__frobeniusMap1",ci,cl),b4.call(cZ+"_mul",cl,ck,cm),b4.call(cA+"__frobeniusMap2",ch,cn),b4.call(cZ+"_mul",cn,cm,co),b4.call(cZ+"_conjugate",b5,cp),b4.call(cZ+"_mul",cp,ci,cq),b4.call(cA+"__frobeniusMap3",cq,cr),b4.call(cZ+"_mul",cr,co,b6)),(cs=a.addFunction(cA+"_finalExponentiation")).addParam("x","i32"),cs.addParam("r","i32"),cu=(ct=cs.getCodeBuilder()).getLocal("x"),cv=ct.getLocal("r"),cw=ct.i32_const(a.alloc(cE)),cs.addCode(ct.call(cA+"__finalExponentiationFirstChunk",cu,cw),ct.call(cA+"__finalExponentiationLastChunk",cw,cv));for(let b=1;b<=5;b++)!function(b){let c=a.addFunction(cA+"_pairingEq"+b);for(let a=0;a<b;a++)c.addParam("p_"+a,"i32"),c.addParam("q_"+a,"i32");c.addParam("c","i32"),c.setReturnType("i32");let d=c.getCodeBuilder(),e=d.i32_const(a.alloc(cE)),f=d.i32_const(a.alloc(cE));c.addCode(d.call(cZ+"_one",e));for(let a=0;a<b;a++)c.addCode(d.call(cA+"_prepareG1",d.getLocal("p_"+a),d.i32_const(c5))),c.addCode(d.call(cA+"_prepareG2",d.getLocal("q_"+a),d.i32_const(c6))),c.addCode(d.call(cA+"_millerLoop",d.i32_const(c5),d.i32_const(c6),f)),c.addCode(d.call(cZ+"_mul",e,f,e));c.addCode(d.call(cA+"_finalExponentiation",e,e)),c.addCode(d.call(cZ+"_eq",e,d.getLocal("c")))}(b),a.exportFunction(cA+"_pairingEq"+b);(cx=a.addFunction(cA+"_pairing")).addParam("p","i32"),cx.addParam("q","i32"),cx.addParam("r","i32"),cz=(cy=cx.getCodeBuilder()).i32_const(a.alloc(cE)),cx.addCode(cy.call(cA+"_prepareG1",cy.getLocal("p"),cy.i32_const(c5))),cx.addCode(cy.call(cA+"_prepareG2",cy.getLocal("q"),cy.i32_const(c6))),cx.addCode(cy.call(cA+"_millerLoop",cy.i32_const(c5),cy.i32_const(c6),cz)),cx.addCode(cy.call(cA+"_finalExponentiation",cz,cy.getLocal("r"))),a.exportFunction(cA+"_pairing"),a.exportFunction(cA+"_prepareG1"),a.exportFunction(cA+"_prepareG2"),a.exportFunction(cA+"_millerLoop"),a.exportFunction(cA+"_finalExponentiation"),a.exportFunction(cA+"_finalExponentiationOld"),a.exportFunction(cA+"__mulBy024"),a.exportFunction(cA+"__mulBy024Old"),a.exportFunction(cA+"__cyclotomicSquare"),a.exportFunction(cA+"__cyclotomicExp_w0")}},9294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9426:(a,b,c)=>{a.exports.buildBn128=c(9171),a.exports.buildBls12381=c(5967),c(760)},9428:a=>{"use strict";a.exports=require("buffer")}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[445,152,510],()=>b(b.s=3042));module.exports=c})();